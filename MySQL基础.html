<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>MySQLåŸºç¡€</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #00a15c;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}
/*==èƒŒæ™¯é«˜äº®==*/
mark {
    background: #ffffff;
    color: #db3f1e;
    font-weight: bold;
    border-bottom: 0px solid #ffffff;
    padding: 0.0px;
    margin: 0 0px;
  }



</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><h1><a name="summary" class="md-header-anchor"></a><span>Summary</span></h1><p><span>è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œæœ‰é—²æš‡æ—¶é—´è¿˜æ˜¯çœ‹å®˜ç½‘æ–‡æ¡£ï¼</span></p><p><span>ä¹¦ç±</span>ğŸ“š<span> æ•°æ®åº“åŸç†ä¸æŠ€æœ¯</span></p><h1><a name="mysqlå¸¸ç”¨å‘½ä»¤" class="md-header-anchor"></a><span>MySQLå¸¸ç”¨å‘½ä»¤</span></h1><h2><a name="mysqlä½¿ç”¨" class="md-header-anchor"></a><span>MySQLä½¿ç”¨</span></h2><p><span>ç™»å½•é€€å‡º</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql -uroot -proot -hip -p port</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">exit</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>winå¯åŠ¨å…³é—­æœåŠ¡&amp;linuxå¯åŠ¨å…³é—­æœåŠ¡</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#win</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net <span class="cm-keyword">start</span> æœåŠ¡å</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net stop æœåŠ¡å</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#linux</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">service <span class="cm-keyword">start</span> mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">service restart mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">service stop mysql</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h2><a name="sqlå‘½ä»¤" class="md-header-anchor"></a><span>SQLå‘½ä»¤</span></h2><p><span>DCLï¼šåˆ›å»ºç”¨æˆ·ï¼ŒæŸ¥çœ‹ç”¨æˆ·ï¼Œåˆ é™¤ç”¨æˆ·ï¼Œæ›´æ”¹å¯†ç ï¼Œåˆ›å»ºç”¨æˆ·çš„åŒæ—¶æˆæƒï¼ŒæŸ¥çœ‹æƒé™ï¼Œæˆäºˆæƒé™ï¼Œæ’¤é”€æƒé™</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">###################ç”¨æˆ·ç›¸å…³###################</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">user</span> <span class="cm-string">'username'</span><span class="cm-variable-2">@'ip' identified by 'password'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> mysql<span class="cm-variable-2">.user</span>; <span class="cm-comment"># å¸¸å…³æ³¨ user,hostè¿™ä¸¤ä¸ªå­—æ®µçš„å€¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">user</span> username<span class="cm-variable-2">@'ip'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è€ç‰ˆæœ¬</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">user</span> <span class="cm-string">'username'</span><span class="cm-variable-2">@'ip' identified by 'new_password'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ–°ç‰ˆæœ¬</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> mysql<span class="cm-variable-2">.user</span> <span class="cm-keyword">set</span> authentication_string=<span class="cm-keyword">PASSWORD</span>(<span class="cm-string">'new_password'</span>) <span class="cm-keyword">where</span> <span class="cm-keyword">user</span>=<span class="cm-string">'username'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">###################æƒé™ç›¸å…³###################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åŠæ—¶åˆ·æ–°æƒé™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">flush</span> <span class="cm-keyword">privileges</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">grant</span> pri1,pri2,..<span class="cm-variable-2">.prin</span> <span class="cm-keyword">on</span> {DB_NAME.*|*.*} <span class="cm-keyword">to</span> username <span class="cm-variable-2">@'ip' identified by 'password'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">grant</span> pri1,pri2,..<span class="cm-variable-2">.prin</span> <span class="cm-keyword">on</span> {DB_NAME.*|*.*} <span class="cm-keyword">to</span> username;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">grants</span> <span class="cm-keyword">for</span> username<span class="cm-variable-2">@'ip'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">revoke</span> pri1,pri2,.. <span class="cm-keyword">from</span> username<span class="cm-variable-2">@'ip'</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="display: none; height: 368px;"></div></div></div></pre><p><span>DDLï¼šåˆ›å»ºæ•°æ®åº“ï¼Œåˆ é™¤æ•°æ®åº“ï¼Œæ›´æ”¹æ•°æ®åº“ï¼ŒæŸ¥è¯¢æ•°æ®åº“ï¼Œè¡¨çš„å®šä¹‰ï¼ŒæŸ¥è¯¢ï¼Œåˆ é™¤</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åº“ç›¸å…³</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">database</span> DB_NAME;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">databases</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">use</span> DB_NAME;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">database</span> DB_NAME;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">rename</span> OLD_DB_NAME <span class="cm-keyword">to</span> NEW_DB_NAME;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¡¨ç›¸å…³</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> tb_name(col_name_1 col_type_1 constraints,col_name_2 col_type_2 constraints,...,col_name_n col_type_n constraints)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">tables</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">desc</span> tb_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> tb_name <span class="cm-variable-2">\G</span>;<span class="cm-comment">#"\G"é€‰é¡¹ä½¿è®°å½•èƒ½å¤ŸæŒ‰ç…§å­—æ®µç«–ç€æ’åˆ—ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">table</span> tb_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> old_tb_name <span class="cm-keyword">rename</span> [<span class="cm-keyword">TO</span>] new_tb_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­—æ®µç›¸å…³</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> tb_name <span class="cm-keyword">MODIFY</span>|<span class="cm-keyword">ADD</span>|<span class="cm-keyword">DROP</span>|<span class="cm-keyword">CHANGE</span> [<span class="cm-keyword">column</span>] column_definition [<span class="cm-keyword">FIRST</span> | <span class="cm-keyword">AFTER</span> col_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> tb_name <span class="cm-keyword">engine</span>=<span class="cm-keyword">innodb</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> tb_name <span class="cm-keyword">add</span>  [<span class="cm-keyword">UNIQUE</span> | <span class="cm-keyword">FULLTEXT</span> | <span class="cm-keyword">SPATIAL</span>] &nbsp;<span class="cm-keyword">INDEX</span> | <span class="cm-keyword">KEY</span>  [ç´¢å¼•å] (å­—æ®µå1 [(é•¿åº¦)] [<span class="cm-keyword">ASC</span> | <span class="cm-keyword">DESC</span>]) [<span class="cm-keyword">USING</span> ç´¢å¼•æ–¹æ³•];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">index</span> ç´¢å¼•å <span class="cm-keyword">on</span> tb_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> tb_name <span class="cm-keyword">drop</span> <span class="cm-keyword">index</span> ç´¢å¼•å;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 506px;"></div><div class="CodeMirror-gutters" style="display: none; height: 506px;"></div></div></div></pre><p><span>DMLï¼šè¡¨çš„å¢åˆ æ”¹æŸ¥</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>â€‹</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’å…¥è®°å½•</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> tb_name(field1,field2,...,fieldn) <span class="cm-keyword">values</span>(value1,value2,...,valuen);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ã€€æŒ‡å®šå­—æ®µå</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp(ename,hiredate,sal,deptno) <span class="cm-keyword">values</span>(<span class="cm-string">'Long'</span>,<span class="cm-string">'2020-07-11'</span>,<span class="cm-number">5000</span>,<span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¸æŒ‡å®šå­—æ®µåï¼Œä½†æ˜¯valuesçš„é¡ºåºå¿…é¡»å’Œè¡¨ä¸­çš„å­—æ®µæ’åˆ—é¡ºåºä¸€è‡´</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp <span class="cm-keyword">values</span>(<span class="cm-string">'Ming'</span>, <span class="cm-string">'2020-07-11'</span>,<span class="cm-number">5050</span>, <span class="cm-number">2</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¯¹äºå«å¯ç©ºå­—æ®µã€éç©ºä½†æ˜¯å«æœ‰é»˜è®¤å€¼çš„å­—æ®µã€è‡ªå¢å­—æ®µï¼Œå¯ä»¥ä¸ç”¨å†insertåçš„å­—æ®µåˆ—è¡¨é‡Œé¢å‡ºç°ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># valuesåé¢ç›´æ¥è·Ÿå¯¹åº”å­—æ®µçš„åç§°value</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp (ename,sal) <span class="cm-keyword">values</span>(<span class="cm-string">'Ting'</span>, <span class="cm-number">5000</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ‰¹é‡æ’å…¥(Mysqlç‰¹æ€§)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> tb_name (field1,field2,...,fieldn) <span class="cm-keyword">values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(record1_value1,record1_value2,...,record1_valuen),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(record2_value1,record2_value2,...,record2_valuen),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(recordn_value1,recordn_value2,...,recordn_valuen);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ›´æ–°è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> tb_name <span class="cm-keyword">set</span> field1=value1,field2=value2,...,fieldn =valuen [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ é™¤è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ã€€æŸ¥è¯¢è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># [WHERE CONDITION]æ¡ä»¶æŸ¥è¯¢ï¼Œwhereåé¢çš„æ¡ä»¶å¯ä»¥ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦(&gt;,&lt;,&gt;=,&lt;=,!=...)ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¤šä¸ªæ¡ä»¶ä¹‹é—´å¯ä»¥ç”¨andã€orç­‰é€»è¾‘è¿ç®—ç¬¦è¿›è¡Œå¤šæ¡ä»¶è”åˆæŸ¥è¯¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> field1,field2,..,fieldn <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥è¯¢ä¸é‡å¤è®°å½•[å»é‡] distinct</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-keyword">distinct</span> <span class="cm-keyword">field</span> <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’åºå’Œé™åˆ¶</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ORDER BYåè·Ÿæ’åºå­—æ®µï¼Œå¯ä»¥è·Ÿå¤šä¸ªï¼›DESC|ASCæ˜¯æ’åºå…³é”®å­—ï¼Œä¸å†™æ­¤å…³é”®å­—é»˜è®¤æ˜¯å‡åºæ’åˆ—ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¦‚æœæ’åºå­—æ®µçš„å€¼ä¸€æ ·ï¼Œåˆ™å€¼ç›¸åŒçš„å­—æ®µæŒ‰ç…§ç¬¬äºŒä¸ªæ’åºå­—æ®µè¿›è¡Œæ’åºï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœåªæœ‰ä¸€ä¸ª</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’åºå­—æ®µï¼Œåˆ™è¿™äº›å­—æ®µç›¸åŒçš„è®°å½•ä¼šæ— åºæ’åˆ—ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>] [<span class="cm-keyword">ORDER</span> <span class="cm-keyword">BY</span> field1 [<span class="cm-keyword">DESC</span>|<span class="cm-keyword">ASC</span>],field2 [<span class="cm-keyword">DESC</span>|<span class="cm-keyword">ASC</span>],..<span class="cm-variable-2">.fieldn</span> [<span class="cm-keyword">DESC</span>|<span class="cm-keyword">ASC</span>]]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># é™åˆ¶æˆ–åˆ†é¡µæŸ¥è¯¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># offset_startè¡¨ç¤ºè®°å½•çš„èµ·å§‹åç§»é‡ï¼Œrow_countè¡¨ç¤ºæ˜¾ç¤ºçš„è¡Œæ•°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œèµ·å§‹åç§»é‡ä¸º0ï¼Œåªéœ€è¦å†™è®°å½•è¡Œæ•°å°±å¯ä»¥ï¼Œè¿™æ—¶å€™æ˜¾ç¤ºçš„å®é™…å°±æ˜¯å‰næ¡è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ...[<span class="cm-keyword">LIMIT</span> offset_start,row_count]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># èšåˆ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›æ±‡æ€»æ“ä½œï¼Œæ¯”å¦‚ç»Ÿè®¡æ•´ä¸ªå…¬å¸çš„äººæ•°æˆ–è€…ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„äººæ•°ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°SQLçš„èšåˆæ“ä½œã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> [field1,field2,..<span class="cm-variable-2">.fieldn</span>] fun_name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">from</span> tb_name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-keyword">WHERE</span> where_condition]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-keyword">GROUP</span> <span class="cm-keyword">BY</span> field1,field2,..<span class="cm-variable-2">.fieldn</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-keyword">WITH</span> <span class="cm-keyword">ROLLUP</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-keyword">HAVING</span> where_condition]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å‚æ•°è¯´æ˜</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># fun_name è¡¨ç¤ºè¦åšçš„èšåˆæ“ä½œï¼Œä¹Ÿå°±æ˜¯èšåˆå‡½æ•°ï¼Œå¸¸ç”¨çš„æœ‰sumã€count(*)ã€maxã€minã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># GROUP BYå…³é”®å­—è¡¨ç¤ºè¦è¿›è¡Œåˆ†ç±»èšåˆçš„å­—æ®µã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># WITH ROLLUPæ˜¯å¯é€‰è¯­æ³•ï¼Œè¡¨ç¤ºæ˜¯å¦å¯¹åˆ†ç±»èšåˆåçš„ç»“æœè¿›è¡Œåœ¨æ±‡æ€»ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># HAVINGå…³é”®å­—è¡¨ç¤ºå¯¹åˆ†ç±»åçš„ç»“æœåœ¨è¿›è¡Œæ¡ä»¶çš„è¿‡æ»¤ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ³¨æ„ï¼šhavingæ˜¯å¯¹èšåˆåçš„è®°è¿‡è¿›è¡Œæ¡ä»¶çš„è¿‡æ»¤ï¼Œwhereæ˜¯åœ¨èšåˆä¹‹å‰å°±å¯¹è®°å½•è¿›è¡Œè¿‡æ»¤ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å¦‚æœé€»è¾‘å…è®¸ï¼Œæˆ‘ä»¬å°½å¯èƒ½ç”¨whereå…ˆè¿‡æ»¤è®°å½•ï¼Œä¹‹åå†æ ¹æ®é€»è¾‘çœ‹æ˜¯å¦ç”¨havingå†è¿‡æ»¤ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># with rollupè¡¨ç¤ºå¯¹èšåˆåçš„ç»“æœæ±‚æ€»æ•°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> deptno,<span class="cm-keyword">count</span>(<span class="cm-number">1</span>) number <span class="cm-keyword">from</span> emp <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> deptno <span class="cm-keyword">with</span> <span class="cm-keyword">rollup</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ç»Ÿè®¡äººæ•°å¤§äº1çš„éƒ¨é—¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> deptno,<span class="cm-keyword">count</span>(<span class="cm-number">1</span>) <span class="cm-keyword">from</span> emp <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> deptno <span class="cm-keyword">having</span> <span class="cm-keyword">count</span>(<span class="cm-number">1</span>) &gt; <span class="cm-number">1</span>; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ç»Ÿè®¡å‘˜å·¥è–ªæ°´</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">max</span>(sal),<span class="cm-keyword">min</span>(sal),<span class="cm-keyword">avg</span>(sal) <span class="cm-keyword">from</span> emp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŒ‰éƒ¨é—¨å·æ’åº[é»˜è®¤asc]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> deptno;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŒ‰éƒ¨é—¨å·æ’åºï¼Œéƒ¨é—¨å·ç›¸åŒçš„åˆ™æŒ‰salé™åºæ’åº</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> deptno, sal <span class="cm-keyword">desc</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¿æ¥æŸ¥è¯¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¡¨è¿æ¥åˆ†ä¸ºå†…è¿æ¥å’Œå¤–è¿æ¥ï¼Œä»–ä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯å†…è¿æ¥ä»…é€‰å‡ºä¸¤å¼ è¡¨ä¸­äº’ç›¸åŒ¹é…çš„è®°å½•ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è€Œå¤–è¿æ¥ä¼šé€‰å‡ºå…¶ä»–ä¸åŒ¹é…çš„è®°å½•ã€‚å¸¸ç”¨å†…è¿æ¥ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ename,deptname <span class="cm-keyword">from</span> emp,dept <span class="cm-keyword">where</span> emp<span class="cm-variable-2">.deptno</span> = dept<span class="cm-variable-2">.deptno</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¤–è¿æ¥åˆåˆ†ä¸ºå·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å·¦è¿æ¥ï¼šåŒ…å«æ‰€æœ‰çš„å·¦è¾¹è¡¨ä¸­çš„è®°å½•ç”šè‡³æ˜¯å³è¾¹è¡¨ä¸­æ²¡æœ‰å’Œå®ƒåŒ¹é…çš„è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å³è¿æ¥ï¼šåŒ…å«æ‰€æœ‰çš„å³è¾¹è¡¨ä¸­çš„è®°å½•ç”šè‡³æ˜¯å·¦è¾¹è¡¨ä¸­æ²¡æœ‰å’Œå®ƒåŒ¹é…çš„è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ename,deptname <span class="cm-keyword">from</span> emp <span class="cm-keyword">left</span> <span class="cm-keyword">join</span> dept <span class="cm-keyword">on</span> emp<span class="cm-variable-2">.deptno</span> = dept<span class="cm-variable-2">.deptno</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> deptname,ename <span class="cm-keyword">from</span> emp <span class="cm-keyword">right</span> <span class="cm-keyword">join</span> dept <span class="cm-keyword">on</span> emp<span class="cm-variable-2">.deptno</span> = dept<span class="cm-variable-2">.deptno</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­æŸ¥è¯¢ï¼šæŸ¥è¯¢çš„æ¡ä»¶æ˜¯å¦å¤–ä¸€ä¸ªselectè¯­å¥çš„ç»“æœ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­æŸ¥è¯¢çš„å…³é”®å­—åŒ…æ‹¬ï¼šinã€not inã€=ã€!=ã€existsã€not existsç­‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> deptno <span class="cm-keyword">in</span> (<span class="cm-keyword">select</span> deptno <span class="cm-keyword">from</span> dept);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¦‚æœå­æŸ¥è¯¢è®°å½•æ•°å”¯ä¸€ï¼Œå¯ä»¥ç”¨=ä»£æ›¿in</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸäº›æƒ…å†µä¸‹ï¼Œå­æŸ¥è¯¢å¯ä»¥è½¬åŒ–ä¸ºè¡¨è¿æ¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è®°å½•è”åˆï¼ˆä¸å¸¸ç”¨ï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å°†ä¸¤è¡¨çš„æ•°æ®æŒ‰ç…§ä¸€å®šçš„æŸ¥è¯¢æ¡ä»¶æŸ¥è¯¢å‡ºæ¥åï¼Œå°†ç»“æœåˆå¹¶åˆ°ä¸€èµ·æ˜¾ç¤ºå‡ºæ¥ã€‚å°±éœ€è¦ä½¿ç”¨unionå’Œunion allå…³é”®å­—ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># UNION ALLï¼šå°†æ‰€æœ‰ç»“æœé›†ç›´æ¥åˆå¹¶åœ¨ä¸€èµ·</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># UNIONï¼šå°†UNION ALLåçš„ç»“æœè¿›è¡Œä¸€æ¬¡DISTINCTï¼Œå»é™¤é‡å¤è®°å½•åçš„ç»“æœ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">UNION</span>|<span class="cm-keyword">UNION</span> <span class="cm-keyword">ALL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">UNION</span>|<span class="cm-keyword">UNION</span> <span class="cm-keyword">ALL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> tn;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2231px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2231px;"></div></div></div></pre><h2><a name="æ•°æ®ç±»å‹ç›¸å…³å‘½ä»¤" class="md-header-anchor"></a><span>æ•°æ®ç±»å‹ç›¸å…³å‘½ä»¤</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1.</span> now()å‡½æ•°ï¼šä»¥å¹´æœˆæ—¥æ—¶åˆ†ç§’çš„å½¢å¼æ˜¾ç¤ºå½“å‰æ—¶é—´</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ç¤ºä¾‹ï¼š</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> now();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| now() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">09</span>-<span class="cm-number">09</span> <span class="cm-number">09</span>:36:47 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2.</span> bin(<span class="cm-keyword">field</span>):å°†bit(M)ç±»å‹çš„å­—æ®µä»¥äºŒè¿›åˆ¶æ˜¾ç¤ºï¼Œ</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">é»˜è®¤selectæ˜¾ç¤ºä¸åŠ æ“ä½œæ˜¯æŸ¥è¯¢ä¸åˆ°æ•°æ®çš„</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> bin(<span class="cm-number">5</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| bin(<span class="cm-number">5</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">101</span> &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3.</span> concat(a, b)ï¼šå°†å­—ç¬¦aä¸bç›¸äº’è¿æ¥</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> concat(<span class="cm-string">'a'</span>, <span class="cm-string">'b'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| concat(<span class="cm-string">'a'</span>, <span class="cm-string">'b'</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ab &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4.</span> length(<span class="cm-keyword">field</span>)ï¼šæŸ¥çœ‹æŸå­—æ®µçš„é•¿åº¦å€¼</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> length(<span class="cm-string">'abc'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| length(<span class="cm-string">'abc'</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 782px;"></div><div class="CodeMirror-gutters" style="display: none; height: 782px;"></div></div></div></pre><h2><a name="show-create" class="md-header-anchor"></a><span>show create</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># showå‘½ä»¤ç›¸å…³</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1.</span> æŸ¥è¯¢è¡¨å’Œæ•°æ®åº“</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">tables</span>|<span class="cm-keyword">databases</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2.</span> æŸ¥çœ‹æ•°æ®åº“è¡¨ç»“æ„</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span>|<span class="cm-keyword">database</span>  db_name|tb_name [<span class="cm-variable-2">\g</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3.</span> æŸ¥çœ‹ç”¨æˆ·æ‰€æˆäºˆæƒé™</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">grants</span> <span class="cm-keyword">for</span> username<span class="cm-variable-2">@'ip'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4.</span> æŸ¥çœ‹è¿è¡ŒSQLè¯­å¥æ—¶çš„warning</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">warnings</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5.</span> æŸ¥çœ‹MySQLç³»ç»Ÿå˜é‡åŠå¸¸ç”¨å˜é‡æŸ¥è¯¢</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'pattern'</span>|<span class="cm-keyword">where</span> expr;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5.1</span> æŸ¥çœ‹mysqlå®¢æˆ·ç«¯ç›¸å…³å­—ç¬¦é›†</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'character_set_client'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">=ç­‰åŒäº</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">where</span> Variable_name=<span class="cm-string">'character_set_client'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5.2</span> æŸ¥çœ‹æ—¶åŒº</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'time_zone'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5.3</span> æŸ¥çœ‹å¤–é”®å…³è”çŠ¶æ€ï¼Œä¸»è¦ç”¨äºå¯¼å…¥å…¶ä»–æ•°æ®åº“æ—¶ï¼Œåœ¨å­˜åœ¨å¤–é”®å…³è”ï¼Œ</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ä¸”æœªçŸ¥å…¶å…³è”æ€§(è°å…ˆå…³è”è°çš„æƒ…å†µä¸‹)ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤–é”®å…³è”æš‚æ—¶å…³é—­ã€‚</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%FOREIGN_KEY_CHECKS%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5.4</span> æŸ¥çœ‹è¿è¡Œæ—¶çš„SQLMode</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%mode%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6.</span> æŸ¥çœ‹å½“å‰æ¨¡å¼</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-variable-2">@@sql_mode</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%mode%'</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 644px;"></div><div class="CodeMirror-gutters" style="display: none; height: 644px;"></div></div></div></pre><h1><a name="æ•°æ®åº“åŸç†ä¸æŠ€æœ¯æ–°å¢ç« èŠ‚ï¼‰2020-10" class="md-header-anchor"></a><span>æ•°æ®åº“åŸç†ä¸æŠ€æœ¯ï¼ˆæ–°å¢ç« èŠ‚ï¼‰2020-10</span></h1><h2><a name="åŸºæœ¬æ¦‚å¿µ" class="md-header-anchor"></a><span>åŸºæœ¬æ¦‚å¿µ</span></h2><p><span>æ•°æ®åº“ï¼ˆDBï¼‰ï¼šæ˜¯æŒ‰ç…§ä¸€å®šç»“æ„ç»„ç»‡å¹¶é•¿æœŸå­˜å‚¨åœ¨è®¡ç®—æœºå†…çš„ã€å¯å…±äº«çš„å¤§é‡æ•°æ®çš„æœ‰æœºé›†åˆã€‚</span></p><p><span>è§£é‡Šï¼š</span></p><p><span>1ï¼‰æ•°æ®åº“ä¸­çš„æ•°æ®æ˜¯æŒ‰ç…§ä¸€å®šçš„ç»“æ„</span><strong><span>æ•°æ®æ¨¡å‹</span></strong><span>æ¥è¿›è¡Œç»„ç»‡çš„ï¼Œå³æ•°æ®é—´æœ‰ä¸€å®šçš„è”ç³»ä»¥åŠæ•°æ®æœ‰è¯­ä¹‰è§£é‡Šã€‚</span></p><p><span>æ•°æ®æ¨¡å‹ï¼šæ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒå’ŒåŸºç¡€ï¼Œæ˜¯å…³äºæè¿°æ•°æ®ä¸æ•°æ®ä¹‹é—´çš„è”ç³»ã€æ•°æ®çš„è¯­ä¹‰ã€ä¸€è‡´æ€§çº¦æŸçš„æ¦‚å¿µæ€§å·¥å…·çš„é›†åˆã€‚</span></p><p><span>æ•°æ®æ¨¡å‹çš„åˆ†ç±»ï¼š</span></p><ul><li><span>ä¸‰ç§åŸºæœ¬æ•°æ®æ¨¡å‹ï¼šå±‚æ¬¡æ¨¡å‹ã€</span><strong><span>å…³ç³»æ¨¡å‹</span></strong><span>ï¼ˆé‡ç‚¹æŒæ¡ï¼‰ã€ç½‘çŠ¶æ¨¡å‹ã€‚</span></li><li><span>é¢å‘å¯¹è±¡æ•°æ®æ¨¡å‹</span></li><li><span>è°“è¯æ¨¡å‹ï¼ˆé€»è¾‘æ¨¡å‹ï¼‰</span></li><li><span>XMLæ•°æ®æ¨¡å‹</span></li><li><span>éSQLæ•°æ®æ¨¡å‹</span></li><li><span>æ‰©å……çš„æ•°æ®æ¨¡å‹</span></li></ul><p><span>æ•°æ®æ¨¡å‹é€šå¸¸æ˜¯ç”±ï¼š</span><strong><span>æ•°æ®ç»“æ„ã€æ•°æ®æ“ä½œå’Œå®Œæ•´æ€§çº¦æŸ</span></strong><span>ç»„æˆã€‚</span></p><ul><li><span>æ•°æ®ç»“æ„ï¼šç³»ç»Ÿé™æ€ç‰¹å¾çš„æè¿°ï¼Œæè¿°å¯¹è±¡åŒ…å«çš„æ•°æ®ç±»å‹ã€å†…å®¹ã€æ€§è´¨å’Œæ•°æ®ä¹‹é—´çš„ç›¸äº’å…³ç³»ã€‚</span></li><li><span>æ•°æ®æ“ä½œï¼šç³»ç»ŸåŠ¨æ€ç‰¹å¾çš„æè¿°ï¼Œæ˜¯å¯¹æ•°æ®åº“å„ç§å¯¹è±¡å®ä¾‹çš„æ“ä½œã€‚</span></li><li><span>å®Œæ•´æ€§çº¦æŸï¼šå®šä¹‰äº†ç»™å®šæ•°æ®æ¨¡å‹ä¸­æ•°æ®åŠè”ç³»æ‰€å…·æœ‰çš„åˆ¶çº¦å’Œä¾å­˜å…³ç³»ã€‚</span></li></ul><p><span>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼šç®¡ç†å’Œç»´æŠ¤æ•°æ®åº“çš„</span><strong><span>ç³»ç»Ÿè½¯ä»¶</span></strong><span>ï¼Œæ˜¯æ•°æ®åº“å’Œç”¨æˆ·ä¹‹é—´çš„ä¸€ä¸ªæ¥å£ã€‚</span></p><p><span>æ•°æ®åº“ç³»ç»Ÿï¼ˆDBSï¼‰ï¼šå®ç°æœ‰ç»„ç»‡åœ°ã€åŠ¨æ€åœ°å­˜å‚¨å¤§é‡å…³è”æ•°æ®ã€æ–¹ä¾¿å¤šç”¨æˆ·è®¿é—®çš„è®¡ç®—æœºè½¯ä»¶ã€ç¡¬ä»¶å’Œäººç»„æˆçš„ç³»ç»Ÿã€‚</span></p><blockquote><p><span>è®¡ç®—æœºç³»ç»Ÿä¸­å¼•å…¥æ•°æ®åº“æŠ€æœ¯åå½¢æˆæ•°æ®åº“ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥è¯´æ•°æ®åº“ç³»ç»Ÿæ˜¯å…·æœ‰ç®¡ç†æ•°æ®åº“åŠŸèƒ½çš„è®¡ç®—æœºç³»ç»Ÿã€‚</span></p></blockquote><p><span>å…³ç³»ï¼šDBS=è®¡ç®—æœºç³»ç»Ÿï¼ˆç¡¬ä»¶ã€è½¯ä»¶å¹³å°ã€äººï¼‰+ DBMS + DB</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20201015132230.png" referrerpolicy="no-referrer"></p><div align="center"><font color="gray">DBã€DBMSã€DBSä¹‹é—´çš„å…³ç³»</font></div><p><span>å…³ç³»æ¨¡å‹æ•°æ®ç»“æ„ï¼šè¡Œå’Œåˆ—ç»„æˆçš„äºŒç»´è¡¨ç»“æ„ã€‚</span></p><p><strong><span>1.ç¬›å¡å°”ç§¯</span></strong><span>ï¼ˆæ•°æ®åº“ï¼‰</span></p><p><span>ç¬›å¡å°”ç§¯æ˜¯åœ¨åŸŸä¸Šçš„ä¸€ç§è¿ç®—ã€‚åŸŸæ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒæ•°æ®ç±»å‹çš„å€¼é›†åˆã€‚åŸŸç”¨æ¥è¡¨æ˜å®šä¹‰å±æ€§çš„å–å€¼èŒƒå›´ã€‚</span></p><p><span>ç»™å®šä¸€ç»„åŸŸD</span><sub><span>1</span></sub><span>,D</span><sub><span>2</span></sub><span>,...,D</span><sub><span>n</span></sub><span>ï¼Œåˆ™D</span><sub><span>1</span></sub><span>,D</span><sub><span>2</span></sub><span>,...,D</span><sub><span>n</span></sub><span>çš„ç¬›å¡å°”ç§¯ä¸º</span></p><p><span>D</span><sub><span>1</span></sub><span> X D</span><sub><span>2</span></sub><span> X ... X D</span><sub><span>n</span></sub><span> = {(d</span><sub><span>1</span></sub><span>,d</span><sub><span>2</span></sub><span>,...,d</span><sub><span>n</span></sub><span>) | d</span><sub><span>i</span></sub><span> âˆˆ D</span><sub><span>i</span></sub><span>, i=1,2,...,n }</span></p><p><span>åœ¨æ•°å­¦ä¸­ï¼Œä¸¤ä¸ªé›†åˆXå’ŒYçš„ç¬›å¡å°“ç§¯ï¼ˆCartesian productï¼‰ï¼Œåˆç§°ç›´ç§¯ï¼Œè¡¨ç¤ºä¸ºX Ã— Yï¼Œç¬¬ä¸€ä¸ªå¯¹è±¡æ˜¯Xçš„æˆå‘˜è€Œç¬¬äºŒä¸ªå¯¹è±¡æ˜¯Yçš„æ‰€æœ‰å¯èƒ½æœ‰åºå¯¹çš„å…¶ä¸­ä¸€ä¸ªæˆå‘˜ã€‚</span></p><p><strong><span>ç®€å•è¯´å°±æ˜¯ä¸¤é›†åˆä¸­ï¼Œæ¯ä¸€é¡¹ä¸å¦ä¸€é›†åˆä¸­æ¯ä¸€é¡¹çš„ä¹˜ç§¯ã€‚</span></strong></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20201015132229.png" referrerpolicy="no-referrer"></p><p><strong><span>2.å…³ç³»</span></strong></p><p><span>å…³ç³»ä¸­åŸºæœ¬æœ¯è¯­ï¼š</span></p><p><span>ï¼ˆ1ï¼‰å…ƒç»„ä¸å±æ€§</span></p><p><span>ï¼ˆ2ï¼‰å€™é€‰é”®</span></p><p><span>ï¼ˆ3ï¼‰ä¸»é”®</span></p><p><span>ï¼ˆ4ï¼‰å¤–é”®</span></p><p><strong><span>3.å…³ç³»çš„å®Œæ•´æ€§çº¦æŸ</span></strong></p><p><span>å…³ç³»å‹æ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸï¼šå®ä½“å®Œæ•´æ€§ã€å‚ç…§å®Œæ•´æ€§ã€ç”¨æˆ·è‡ªå®šä¹‰</span></p><p><span>å®ä½“å®Œæ•´æ€§ï¼šä¸»é”®</span></p><p><span>å‚ç…§å®Œæ•´æ€§ï¼šå¤–é”®</span></p><p><span>ç”¨æˆ·è‡ªå®šä¹‰ï¼šå­—æ®µéç©ºã€å–å€¼èŒƒå›´è¦æ±‚</span></p><h2><a name="å…³ç³»ä»£æ•°" class="md-header-anchor"></a><span>å…³ç³»ä»£æ•°</span></h2><p><span>	</span><span>å…³ç³»ä»£æ•°æ˜¯ä¸€ç§æŠ½è±¡è¯­è¨€ï¼Œå®ƒé€šè¿‡å¯¹å…³ç³»çš„è¿ç®—æ¥è¡¨è¾¾æŸ¥è¯¢ã€‚å…³ç³»ä»£æ•°ä»¥å…³ç³»ä¸ºè¿ç®—å¯¹è±¡ï¼Œé€šè¿‡å¯¹å…³ç³»è¿›è¡Œâ€œç»„åˆâ€æˆ–â€œåˆ†å‰²â€ï¼Œå¾—åˆ°æ‰€éœ€çš„æ•°æ®é›†åˆâ€”ä¸€ä¸ªæ–°çš„å…³ç³»ã€‚</span></p><p><span>å…³ç³»ä»£æ•°å¯åˆ†ä¸ºï¼š</span></p><p><span>1ï¼‰é›†åˆè¿ç®—ï¼ˆå¹¶äº¤å·®ã€å¹¿ä¹‰ç¬›å¡å°”ç§¯ï¼‰</span></p><p><span>2ï¼‰å…³ç³»è¿ç®—ï¼ˆæŠ•å½±ã€é€‰æ‹©ã€è¿æ¥å’Œé™¤è¿ç®—ï¼‰</span></p><p><span>3ï¼‰æ‰©å……çš„å…³ç³»è¿ç®—ï¼ˆå¹¿ä¹‰æŠ•å½±ã€å¤–è¿æ¥ã€åŠè¿æ¥ã€èšé›†ç­‰ï¼‰</span></p><p>ğŸ”–<span> </span>ğŸ†•</p><p><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><mark><span>=</span></mark><span>æœªå®Œå¾…ç»­</span></p><h1><a name="æŸ¥è¯¢" class="md-header-anchor"></a><span>æŸ¥è¯¢</span></h1><p><span>SQLå†™æ³•é¡ºåºå’Œæ‰§è¡Œé¡ºåº</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">å†™æ³•é¡ºåºï¼šselect--from--where--group by--having--order by </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">æ‰§è¡Œé¡ºåºï¼šfrom--where--group by [having]--select--order by</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">å°±æ˜¯selectè¦æ”¾åé¢ï¼Œå¦‚æœæœ‰order byï¼Œåˆ™order byæ”¾æœ€åï¼Œå› ä¸ºorder by æ˜¯å¯¹ç»“æœè¿›è¡Œæ’åº</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><strong><span>ç”¨GROUP BYå…³é”®å­—åˆ†ç»„æŸ¥è¯¢</span></strong></p><p><span>é€šè¿‡GROUP BYå­å¥å¯ä»¥å°†æ•°æ®åˆ’åˆ†åˆ°ä¸åŒçš„ç»„ä¸­ï¼Œå®ç°å¯¹è®°å½•è¿›è¡Œåˆ†ç»„æŸ¥è¯¢ã€‚åœ¨æŸ¥è¯¢æ—¶ï¼Œ</span><strong><span>æ‰€æŸ¥è¯¢çš„åˆ—å¿…é¡»åŒ…å«åœ¨åˆ†ç»„ä¸­</span></strong><span>ã€‚</span></p><p><span>æ‰§è¡Œå¦‚ä¸‹sql,å‘ç°èƒ½æ­£å¸¸æ‰§è¡Œ,è€Œä¸”groupbyåé»˜è®¤å–æ¯ç»„ç¬¬ä¸€æ¡æ•°æ®ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20201015144624.png" referrerpolicy="no-referrer"></p><p><span>å½“åŒæ—¶å«æœ‰whereå­å¥ã€group by å­å¥ ã€havingå­å¥åŠèšé›†å‡½æ•°æ—¶ï¼Œæ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</span>
<span>--æ‰§è¡Œwhereå­å¥æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼›</span>
<span>--ä½¿ç”¨group by å­å¥å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼›å¯¹group by å­å¥å½¢æˆçš„ç»„è¿è¡Œèšé›†å‡½æ•°è®¡ç®—æ¯ä¸€ç»„çš„å€¼ï¼›æœ€åç”¨having å­å¥å»æ‰ä¸ç¬¦åˆæ¡ä»¶çš„ç»„ã€‚</span>
<span>--having å­å¥ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¹Ÿå¿…é¡»å‡ºç°åœ¨selectåˆ—è¡¨ä¸­ã€‚æœ‰äº›æ•°æ®åº“ä¾‹å¤–ï¼Œå¦‚oracle.</span>
<span>--havingå­å¥å’Œwhereå­å¥éƒ½å¯ä»¥ç”¨æ¥è®¾å®šé™åˆ¶æ¡ä»¶ä»¥ä½¿æŸ¥è¯¢ç»“æœæ»¡è¶³ä¸€å®šçš„æ¡ä»¶é™åˆ¶ã€‚</span>
<span>--havingå­å¥é™åˆ¶çš„æ˜¯ç»„ï¼Œè€Œä¸æ˜¯è¡Œã€‚whereå­å¥ä¸­ä¸èƒ½ä½¿ç”¨èšé›†å‡½æ•°ï¼Œè€Œhavingå­å¥ä¸­å¯ä»¥ã€‚</span></p><h1><a name="ç¬¬ä¸€éƒ¨åˆ†-åŸºç¡€ç¯‡" class="md-header-anchor"></a><span>ç¬¬ä¸€éƒ¨åˆ† åŸºç¡€ç¯‡</span></h1><h1><a name="1-mysqlçš„å®‰è£…ä¸é…ç½®" class="md-header-anchor"></a><span>1. MySQLçš„å®‰è£…ä¸é…ç½®</span></h1><h2><a name="11-windowsç³»ç»Ÿ" class="md-header-anchor"></a><span>1.1 Windowsç³»ç»Ÿ</span></h2><p><span>Winä¸‹å®‰è£…MySQLæ•´ä½“æ¥è¯´æ²¡ä»€ä¹ˆéš¾åº¦ï¼ŒåŸºæœ¬éƒ½æ˜¯å‚»ç™½ç”œæ“ä½œã€‚</span></p><p><span>æ­¥éª¤ï¼š</span></p><ul><li><span>å®˜ç½‘ä¸‹è½½MySQLå®‰è£…åŒ…</span></li><li><span>å®‰è£…ï¼Œå®‰è£…è¿‡ç¨‹æœ‰å¾ˆå¤šé…ç½®ï¼Œéƒ½å¾ˆç®€å•ï¼Œnext</span></li><li><span>å®‰è£…æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡MySQL commandå‘½ä»¤çª—å£è¿›è¡Œæ“ä½œ</span></li></ul><p><span>æ³¨æ„ç‚¹ï¼š</span></p><p><span>é…ç½®MySQLç¯å¢ƒå˜é‡ï¼Œåœ¨dosä¸‹å°±èƒ½å¤Ÿæ‰§è¡ŒMySQLç›¸å…³å‘½ä»¤ï¼Œå…·ä½“å°±æ˜¯exeè·¯å¾„é…ç½®åˆ°PATHé‡Œé¢å³å¯ã€‚</span></p><p><span>å¸¸ç”¨å‘½ä»¤ï¼š</span><strong><span>å¯åŠ¨å…³é—­</span><code>mysql</code><span>æœåŠ¡å¿…é¡»ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ </span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¿…é¡»ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ³¨æ„è¿™é‡Œæ˜¯ä½ è‡ªå·±çš„MySQLæœåŠ¡å</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net <span class="cm-keyword">start</span> mysql56 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net stop mysql56</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># mysqlç™»å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql -uUSERNAME [-hIP] -pPASSWORD</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æœ¬åœ°ç™»å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql -uroot -proot</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¿œç¨‹ç™»å½•ï¼ˆå‰ææ˜¯è¿œç¨‹ç™»å½•è¢«æˆæƒï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql -uroot -h39<span class="cm-number">.97.181.76</span> -proot;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p><strong><span>Skill Points:</span></strong><span> winä¸‹mysqlé…ç½®æ–‡ä»¶ä¸º my.inï¼ŒLinuxç³»ç»Ÿä¸‹mysqlé…ç½®æ–‡ä»¶ä¸ºmy.cnf</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="markdown"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="markdown"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" cm-header cm-header1 CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class=" cm-header cm-header1"># winä¸‹æŸ¥çœ‹mysqlé»˜è®¤æ–‡ä»¶è·¯åŠ²ï¼ˆbaseDirï¼‰</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; select @@baseDir;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">--&gt; C:\Program Files (x86)\MySQL\MySQL Server 5.6\</span></pre><pre class=" cm-header cm-header1 CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class=" cm-header cm-header1"># linux</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">whereis my.cnf</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p><span>mysqlçš„é…ç½®æ–‡ä»¶ç®€å•ä»‹ç»ï¼š</span></p><p><span>port = 3306ï¼šæŒ‡å®šäº†Mysqlå¼€æ”¾çš„ç«¯å£ï¼›</span></p><p><span>basedir = /usr/local/mysqlï¼šæŒ‡å®šMysqlå®‰è£…çš„ç»å¯¹è·¯å¾„ï¼›</span></p><p><span>datadir = /data/mysql_db_dataï¼šæŒ‡å®šMysqlæ•°æ®å­˜æ”¾çš„ç»å¯¹è·¯å¾„ï¼›</span></p><p><span>socket = /tmp/mysql.sockï¼šå¥—æ¥å­—æ–‡ä»¶</span></p><p><span>...</span></p><h2><a name="12-linuxç³»ç»Ÿ" class="md-header-anchor"></a><span>1.2 Linuxç³»ç»Ÿ</span></h2><p><span>Linuxç³»ç»Ÿå®‰è£…mysqlæœ‰äºŒè¿›åˆ¶åŒ…ç¼–è¯‘å®‰è£…å’ŒrpmåŒ…å®‰è£…ï¼Œrpmç›¸å¯¹äºäºŒè¿›åˆ¶åŒ…æ¥è¯´ï¼Œå®‰è£…æ–¹ä¾¿ï¼Œä¸éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚è¿™é‡Œä¸»è¦è®²è§£äºŒè¿›åˆ¶åŒ…ç¼–è¯‘å®‰è£…ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="bash" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#1.æ¸…é™¤å·¥ä½œ</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#é¦–å…ˆæŸ¥çœ‹linuxæ˜¯å¦å·²ç»å®‰è£…è¿‡mysqlç›¸å…³çš„è½¯ä»¶å’Œé…ç½® æ¸…é™¤é…ç½®ï¼Œé˜²æ­¢å®‰è£…å¤±è´¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æŸ¥çœ‹æ˜¯å¦æœ‰mysqlç›¸å…³rpmåŒ…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">rpm <span class="cm-attribute">-qa</span> | <span class="cm-builtin">grep</span> mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å¦‚æœå­˜åœ¨åˆ™åˆ é™¤ --nodepså¿½ç•¥ä¾èµ–å…³ç³»</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">rpm <span class="cm-attribute">-e</span> <span class="cm-attribute">--nodeps</span> mysql-xxx-xxx</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æœç´¢mysqlå‘½ä»¤æ‰€åœ¨ç›®å½•åŠä¿¡æ¯</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">whereis mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æœç´¢mysqlç›¸å…³ç›®å½• findå‘½ä»¤æ”¯æŒé€šé…ç¬¦ * ?</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">find</span> / <span class="cm-attribute">-name</span> mysql </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ¸…é™¤ç›®å½•æˆ–å‘½ä»¤</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">rm</span> <span class="cm-attribute">-rf</span> xxx</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#2.å‡†å¤‡å·¥ä½œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ£€æŸ¥mysqlç”¨æˆ·ç»„ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»º</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cat</span> /etc/group | <span class="cm-builtin">grep</span> mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ·»åŠ mysqlç”¨æˆ·å’Œç”¨æˆ·ç»„</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">groupadd mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">useradd <span class="cm-attribute">-r</span> <span class="cm-attribute">-g</span> mysql mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ä¸‹è½½Linuxçš„Mysqlå®‰è£…åŒ…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">wget</span> https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#è§£å‹ç¼© ç§»åŠ¨ é‡å‘½åæ–‡ä»¶æˆ–è€…å»ºç«‹è½¯é“¾æ¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#è§£å‹ç¼©</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tar <span class="cm-attribute">-zxvf</span> mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å°†è§£å‹ç¼©åçš„æ–‡ä»¶é‡å‘½å</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cp</span>|mv mysql-5.7.26-linux-glibc2.12-x86_64 mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ç§»åŠ¨ä½ç½®</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">mv</span> mysql /usr/local/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#åˆ›å»ºmysqlæ•°æ®ç›®å½•å¹¶ç»™äºˆmysqlè¯»å†™æƒé™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">mkdir</span> /usr/local/mysql/data</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">chown</span> <span class="cm-attribute">-R</span> mysql:mysql /usr/local/mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">chmod</span> <span class="cm-attribute">-R</span> <span class="cm-number">755</span> /usr/local/mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ›´æ”¹å®Œæ¯•ä¹‹å å¯ä»¥ls -l æŸ¥çœ‹ä¸€ä¸‹mysqlæ‰€å±ç”¨æˆ·å’Œç»„ç”¨æˆ·æ˜¯å¦å˜æ›´ä¸ºmysql</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#3.å®‰è£… é…ç½®</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ç¼–è¯‘å®‰è£…mysql /usr/local/mysql/binç›®å½•ä¸‹æ‰§è¡Œï¼ï¼ï¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">./mysqld <span class="cm-attribute">--initialize</span> <span class="cm-attribute">--user</span><span class="cm-operator">=</span>mysql <span class="cm-attribute">--datadir</span><span class="cm-operator">=</span>/usr/local/mysql/data <span class="cm-attribute">--basedir</span><span class="cm-operator">=</span>/usr/local/mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å®‰è£…è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°äº†libaio.so.1ç›¸å…³é”™è¯¯ï¼Œå¯èƒ½æ˜¯è¯¥ä¾èµ–æ²¡æœ‰å®‰è£…ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">bin/mysqld: error <span class="cm-keyword">while</span> loading shared libraries: libaio.so.1: cannot open shared object file: No such file or directory</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">è§£å†³æ–¹æ³•ï¼šyum install <span class="cm-attribute">-y</span> libaio  //å®‰è£…ååœ¨åˆå§‹åŒ–å°±OKäº†ï¼‰</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ç¼–è¾‘é…ç½®æ–‡ä»¶my.cnf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">vim</span> /etc/my.cnf</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ·»åŠ  æ³¨ï¼š[mysqld]ä¸è¦çœç•¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[mysqld]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">basedir</span><span class="cm-operator">=</span>/usr/local/mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">datadir</span><span class="cm-operator">=</span>/usr/local/mysql/data</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">bind-address</span><span class="cm-operator">=</span><span class="cm-number">0</span>.0.0.0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">port</span><span class="cm-operator">=</span><span class="cm-number">3306</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">user</span><span class="cm-operator">=</span>mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">socket</span><span class="cm-operator">=</span>/tmp/mysql.sock</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#character config</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">character_set_server</span><span class="cm-operator">=</span>utf8mb4</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">symbolic-links</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#4.æµ‹è¯•å¯åŠ¨mysql</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/usr/local/mysql/support-files/mysql.server <span class="cm-builtin">start</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¯åŠ¨æŠ¥é”™ï¼Œæ²¡æœ‰è¯¥æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è§£å†³ï¼šåˆ›å»ºæ”¹æ–‡ä»¶ï¼Œå¹¶èµ‹äºˆmysqlæƒé™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/usr/local/mysql/support-files/mysql.server <span class="cm-builtin">start</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Starting MySQL.2020-10-03T02:23:26.745432Z mysqld_safe error: log-error <span class="cm-keyword">set</span> to <span class="cm-string">'/var/log/mariadb/mariadb.log'</span>, however file don<span class="cm-string">'t exists. Create writable for user '</span>mysql<span class="cm-string">'.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">The server quit without updating PID file (/usr/local/mysql[FAILED]2zehjjhi300kynwdk13iz.pid).</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@iz2zehjjhi300kynwdk13iz mysql]<span class="cm-comment"># mkdir /var/log/mariadb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@iz2zehjjhi300kynwdk13iz mysql]<span class="cm-comment"># touch /var/log/mariadb/mariadb.log</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@iz2zehjjhi300kynwdk13iz mysql]<span class="cm-comment"># chown -R mysql:mysql /var/log/mariadb/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># é‡å¯</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@iz2zehjjhi300kynwdk13iz mysql]<span class="cm-comment"># /usr/local/mysql/support-files/mysql.server start</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ·»åŠ è½¯é“¾æ¥ï¼Œé‡å¯mysqlæœåŠ¡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">ln</span> <span class="cm-attribute">-s</span> /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">ln</span> <span class="cm-attribute">-s</span> /usr/local/mysql/bin/mysql /usr/bin/mysql</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">service</span> mysql <span class="cm-builtin">restart</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æŸ¥çœ‹mysqlåˆå§‹å¯†ç </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">grep</span> â€˜temporary passwordâ€™ /var/log/mysqld.log</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ ¹æ®åˆå§‹å¯†ç ç™»å½•å³å¯</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¯åŠ¨å’Œå…³é—­æœåŠ¡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">service</span> mysql <span class="cm-builtin">restart</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹mysqlæœåŠ¡çŠ¶æ€</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">netstat <span class="cm-attribute">-nlp</span> | <span class="cm-builtin">grep</span> mysql</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2001px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2001px;"></div></div></div></pre><p><a href='https://blog.csdn.net/weixin_38003389/article/details/90696337'><span>å‚è€ƒä¸€</span></a><span>  </span><a href='https://www.jianshu.com/p/276d59cbc529'><span>å‚è€ƒäºŒ</span></a></p><h1><a name="2-sqlåŸºç¡€" class="md-header-anchor"></a><span>2. SQLåŸºç¡€</span></h1><h2><a name="21-ddlè¯­å¥" class="md-header-anchor"></a><span>2.1 DDLè¯­å¥</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åº“å‘½ä»¤ç›¸å…³</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ›å»ºæ•°æ®åº“</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">database</span> DB_NAME;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹æ•°æ®åº“</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">databases</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># é€‰æ‹©æ•°æ®åº“</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">use</span> DB_NAME;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ é™¤æ•°æ®åº“</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">database</span> DB_NAME;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ›´æ”¹æ•°æ®åº“å(ä¸æ”¯æŒ)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">rename</span> OLD_DB_NAME <span class="cm-keyword">to</span> NEW_DB_NAME;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¡¨å‘½ä»¤ç›¸å…³</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ›å»ºè¡¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> tb_name(col_name_1 col_type_1 constraints,col_name_2 col_type_2 constraints,...,col_name_n col_type_n constraints)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ³¨ï¼šmysqlçš„è¡¨åæ˜¯ä»¥ç›®å½•çš„å½¢å¼å­˜åœ¨äºç£ç›˜ä¸Šï¼Œæ‰€ä»¥è¡¨åçš„å­—ç¬¦å¯ä»¥ç”¨ä»»ä½•ç›®å½•åå…è®¸çš„å­—ç¬¦ã€‚col_nameæ˜¯åˆ—åï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#col_typeæ˜¯æ•°æ®ç±»å‹ï¼Œconstraintsæ˜¯çº¦æŸæ¡ä»¶ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ç¤ºä¾‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> emp(ename <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>), hiredate <span class="cm-builtin">date</span>,sal <span class="cm-builtin">decimal</span>(<span class="cm-number">10</span>,<span class="cm-number">2</span>),deptno <span class="cm-builtin">int</span>(<span class="cm-number">2</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹æ•°æ®åº“ä¸­çš„è¡¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">tables</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹è¡¨ç»“æ„</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">desc</span> tb_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> tb_name <span class="cm-variable-2">\G</span>;<span class="cm-comment">#"\G"é€‰é¡¹ä½¿è®°å½•èƒ½å¤ŸæŒ‰ç…§å­—æ®µç«–ç€æ’åˆ—ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ é™¤è¡¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">table</span> tb_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¿®æ”¹è¡¨å</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> old_tb_name <span class="cm-keyword">rename</span> [<span class="cm-keyword">TO</span>] new_tb_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¿®æ”¹è¡¨å­—æ®µ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> tb_name <span class="cm-keyword">MODIFY</span>|<span class="cm-keyword">ADD</span>|<span class="cm-keyword">DROP</span>|<span class="cm-keyword">CHANGE</span> [<span class="cm-keyword">column</span>] column_definition [<span class="cm-keyword">FIRST</span> | <span class="cm-keyword">AFTER</span> col_name]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">desc</span> emp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+---------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Field</span> &nbsp;  | Type &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-atom">Null</span> | <span class="cm-keyword">Key</span> | <span class="cm-keyword">Default</span> | Extra |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+---------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ename &nbsp;  | <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>) &nbsp; | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hiredate | <span class="cm-builtin">date</span> &nbsp; &nbsp; &nbsp; &nbsp;  | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| sal &nbsp; &nbsp;  | <span class="cm-builtin">decimal</span>(<span class="cm-number">10</span>,<span class="cm-number">2</span>) | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| deptno &nbsp; | <span class="cm-builtin">int</span>(<span class="cm-number">2</span>) &nbsp; &nbsp; &nbsp;  | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+---------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ä¿®æ”¹åˆ—å­—æ®µç±»å‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> emp <span class="cm-keyword">modify</span> ename <span class="cm-builtin">varchar</span>(<span class="cm-number">20</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å¢åŠ è¡¨å­—æ®µ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> emp <span class="cm-keyword">add</span> age <span class="cm-builtin">int</span>(<span class="cm-number">3</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å¢åŠ åˆ°æŒ‡å®šä½ç½®</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> emp <span class="cm-keyword">add</span> birth <span class="cm-builtin">date</span> <span class="cm-keyword">after</span> ename;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#åˆ é™¤è¡¨å­—æ®µ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> emp <span class="cm-keyword">drop</span> ename;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å­—æ®µæ”¹å</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> emp <span class="cm-keyword">change</span> sal salary <span class="cm-builtin">decimal</span>(<span class="cm-number">10</span>,<span class="cm-number">2</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1173px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1173px;"></div></div></div></pre><h2><a name="22-dmlè¯­å¥" class="md-header-anchor"></a><span>2.2 DMLè¯­å¥</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+---------------+------+-----+---------+-------+</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Field</span> &nbsp;  | Type &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-atom">Null</span> | <span class="cm-keyword">Key</span> | <span class="cm-keyword">Default</span> | Extra |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+---------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ename &nbsp;  | <span class="cm-builtin">varchar</span>(<span class="cm-number">20</span>) &nbsp; | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hiredate | <span class="cm-builtin">date</span> &nbsp; &nbsp; &nbsp; &nbsp;  | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| sal &nbsp; &nbsp;  | <span class="cm-builtin">decimal</span>(<span class="cm-number">10</span>,<span class="cm-number">2</span>) | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| deptno &nbsp; | <span class="cm-builtin">int</span>(<span class="cm-number">2</span>) &nbsp; &nbsp; &nbsp;  | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+---------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’å…¥è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> tb_name(field1,field2,...,fieldn) <span class="cm-keyword">values</span>(value1,value2,...,valuen);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ã€€æŒ‡å®šå­—æ®µå</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp(ename,hiredate,sal,deptno) <span class="cm-keyword">values</span>(<span class="cm-string">'Long'</span>,<span class="cm-string">'2020-07-11'</span>,<span class="cm-number">5000</span>,<span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¸æŒ‡å®šå­—æ®µåï¼Œä½†æ˜¯valuesçš„é¡ºåºå¿…é¡»å’Œè¡¨ä¸­çš„å­—æ®µæ’åˆ—é¡ºåºä¸€è‡´</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp <span class="cm-keyword">values</span>(<span class="cm-string">'Ming'</span>, <span class="cm-string">'2020-07-11'</span>,<span class="cm-number">5050</span>, <span class="cm-number">2</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¯¹äºå«å¯ç©ºå­—æ®µã€éç©ºä½†æ˜¯å«æœ‰é»˜è®¤å€¼çš„å­—æ®µã€è‡ªå¢å­—æ®µï¼Œå¯ä»¥ä¸ç”¨å†insertåçš„å­—æ®µåˆ—è¡¨é‡Œé¢å‡ºç°ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># valuesåé¢ç›´æ¥è·Ÿå¯¹åº”å­—æ®µçš„åç§°value</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> emp (ename,sal) <span class="cm-keyword">values</span>(<span class="cm-string">'Ting'</span>, <span class="cm-number">5000</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ‰¹é‡æ’å…¥(Mysqlç‰¹æ€§)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> tb_name (field1,field2,...,fieldn) <span class="cm-keyword">values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(record1_value1,record1_value2,...,record1_valuen),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(record2_value1,record2_value2,...,record2_valuen),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(recordn_value1,recordn_value2,...,recordn_valuen);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ›´æ–°è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> tb_name <span class="cm-keyword">set</span> field1=value1,field2=value2,...,fieldn =valuen [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ é™¤è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ã€€æŸ¥è¯¢è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># [WHERE CONDITION]æ¡ä»¶æŸ¥è¯¢ï¼Œwhereåé¢çš„æ¡ä»¶å¯ä»¥ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦(&gt;,&lt;,&gt;=,&lt;=,!=...)ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¤šä¸ªæ¡ä»¶ä¹‹é—´å¯ä»¥ç”¨andã€orç­‰é€»è¾‘è¿ç®—ç¬¦è¿›è¡Œå¤šæ¡ä»¶è”åˆæŸ¥è¯¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> field1,field2,..,fieldn <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥è¯¢ä¸é‡å¤è®°å½•[å»é‡] distinct</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-keyword">distinct</span> <span class="cm-keyword">field</span> <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’åºå’Œé™åˆ¶</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ORDER BYåè·Ÿæ’åºå­—æ®µï¼Œå¯ä»¥è·Ÿå¤šä¸ªï¼›DESC|ASCæ˜¯æ’åºå…³é”®å­—ï¼Œä¸å†™æ­¤å…³é”®å­—é»˜è®¤æ˜¯å‡åºæ’åˆ—ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¦‚æœæ’åºå­—æ®µçš„å€¼ä¸€æ ·ï¼Œåˆ™å€¼ç›¸åŒçš„å­—æ®µæŒ‰ç…§ç¬¬äºŒä¸ªæ’åºå­—æ®µè¿›è¡Œæ’åºï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœåªæœ‰ä¸€ä¸ª</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’åºå­—æ®µï¼Œåˆ™è¿™äº›å­—æ®µç›¸åŒçš„è®°å½•ä¼šæ— åºæ’åˆ—ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> tb_name [<span class="cm-keyword">WHERE</span> <span class="cm-keyword">CONDITION</span>] [<span class="cm-keyword">ORDER</span> <span class="cm-keyword">BY</span> field1 [<span class="cm-keyword">DESC</span>|<span class="cm-keyword">ASC</span>],field2 [<span class="cm-keyword">DESC</span>|<span class="cm-keyword">ASC</span>],..<span class="cm-variable-2">.fieldn</span> [<span class="cm-keyword">DESC</span>|<span class="cm-keyword">ASC</span>]]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># é™åˆ¶æˆ–åˆ†é¡µæŸ¥è¯¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># offset_startè¡¨ç¤ºè®°å½•çš„èµ·å§‹åç§»é‡ï¼Œrow_countè¡¨ç¤ºæ˜¾ç¤ºçš„è¡Œæ•°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œèµ·å§‹åç§»é‡ä¸º0ï¼Œåªéœ€è¦å†™è®°å½•è¡Œæ•°å°±å¯ä»¥ï¼Œè¿™æ—¶å€™æ˜¾ç¤ºçš„å®é™…å°±æ˜¯å‰næ¡è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> ...[<span class="cm-keyword">LIMIT</span> offset_start,row_count]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># èšåˆ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›æ±‡æ€»æ“ä½œï¼Œæ¯”å¦‚ç»Ÿè®¡æ•´ä¸ªå…¬å¸çš„äººæ•°æˆ–è€…ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„äººæ•°ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°SQLçš„èšåˆæ“ä½œã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> [field1,field2,..<span class="cm-variable-2">.fieldn</span>] fun_name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">from</span> tb_name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-keyword">WHERE</span> where_condition]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-keyword">GROUP</span> <span class="cm-keyword">BY</span> field1,field2,..<span class="cm-variable-2">.fieldn</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-keyword">WITH</span> <span class="cm-keyword">ROLLUP</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-keyword">HAVING</span> where_condition]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å‚æ•°è¯´æ˜</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># fun_name è¡¨ç¤ºè¦åšçš„èšåˆæ“ä½œï¼Œä¹Ÿå°±æ˜¯èšåˆå‡½æ•°ï¼Œå¸¸ç”¨çš„æœ‰sumã€count(*)ã€maxã€minã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># GROUP BYå…³é”®å­—è¡¨ç¤ºè¦è¿›è¡Œåˆ†ç±»èšåˆçš„å­—æ®µã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># WITH ROLLUPæ˜¯å¯é€‰è¯­æ³•ï¼Œè¡¨ç¤ºæ˜¯å¦å¯¹åˆ†ç±»èšåˆåçš„ç»“æœè¿›è¡Œåœ¨æ±‡æ€»ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># HAVINGå…³é”®å­—è¡¨ç¤ºå¯¹åˆ†ç±»åçš„ç»“æœåœ¨è¿›è¡Œæ¡ä»¶çš„è¿‡æ»¤ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ³¨æ„ï¼šhavingæ˜¯å¯¹èšåˆåçš„è®°è¿‡è¿›è¡Œæ¡ä»¶çš„è¿‡æ»¤ï¼Œwhereæ˜¯åœ¨èšåˆä¹‹å‰å°±å¯¹è®°å½•è¿›è¡Œè¿‡æ»¤ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å¦‚æœé€»è¾‘å…è®¸ï¼Œæˆ‘ä»¬å°½å¯èƒ½ç”¨whereå…ˆè¿‡æ»¤è®°å½•ï¼Œä¹‹åå†æ ¹æ®èºè·çœ‹æ˜¯å¦ç”¨havingå†è¿‡æ»¤ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ename | hiredate &nbsp; | sal &nbsp; &nbsp; | deptno |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-builtin">Long</span>  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">11</span> | <span class="cm-number">6001.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Xiu &nbsp; | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">11</span> | <span class="cm-number">5001.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Dong  | <span class="cm-atom">NULL</span> &nbsp; &nbsp; &nbsp; | <span class="cm-number">2000.00</span> | &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Ting  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3000.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Lin &nbsp; | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3000.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Bi &nbsp;  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3200.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Au &nbsp;  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3300.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># with rollupè¡¨ç¤ºå¯¹èšåˆåçš„ç»“æœæ±‚æ€»æ•°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> deptno,<span class="cm-keyword">count</span>(<span class="cm-number">1</span>) number <span class="cm-keyword">from</span> emp <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> deptno <span class="cm-keyword">with</span> <span class="cm-keyword">rollup</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| deptno | number |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-atom">NULL</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-atom">NULL</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">7</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ç»Ÿè®¡äººæ•°å¤§äº1çš„éƒ¨é—¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> deptno,<span class="cm-keyword">count</span>(<span class="cm-number">1</span>) <span class="cm-keyword">from</span> emp <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> deptno <span class="cm-keyword">having</span> <span class="cm-keyword">count</span>(<span class="cm-number">1</span>) &gt; <span class="cm-number">1</span>; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| deptno | <span class="cm-keyword">count</span>(<span class="cm-number">1</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ç»Ÿè®¡å‘˜å·¥è–ªæ°´</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">max</span>(sal),<span class="cm-keyword">min</span>(sal),<span class="cm-keyword">avg</span>(sal) <span class="cm-keyword">from</span> emp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">max</span>(sal) | <span class="cm-keyword">min</span>(sal) | <span class="cm-keyword">avg</span>(sal) &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">6001.00</span> | &nbsp;<span class="cm-number">2000.00</span> | <span class="cm-number">3643.142857</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŒ‰éƒ¨é—¨å·æ’åº[é»˜è®¤asc]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> deptno;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ename | hiredate &nbsp; | sal &nbsp; &nbsp; | deptno |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Dong  | <span class="cm-atom">NULL</span> &nbsp; &nbsp; &nbsp; | <span class="cm-number">2000.00</span> | &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-builtin">Long</span>  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">11</span> | <span class="cm-number">6001.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Lin &nbsp; | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3000.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Bi &nbsp;  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3200.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Xiu &nbsp; | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">11</span> | <span class="cm-number">5001.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Au &nbsp;  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3300.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Ting  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3000.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŒ‰éƒ¨é—¨å·æ’åºï¼Œéƒ¨é—¨å·ç›¸åŒçš„åˆ™æŒ‰salé™åºæ’åº</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> deptno, sal <span class="cm-keyword">desc</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ename | hiredate &nbsp; | sal &nbsp; &nbsp; | deptno |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Dong  | <span class="cm-atom">NULL</span> &nbsp; &nbsp; &nbsp; | <span class="cm-number">2000.00</span> | &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-builtin">Long</span>  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">11</span> | <span class="cm-number">6001.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Bi &nbsp;  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3200.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Lin &nbsp; | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3000.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Xiu &nbsp; | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">11</span> | <span class="cm-number">5001.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Au &nbsp;  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3300.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Ting  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3000.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¿æ¥æŸ¥è¯¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¡¨è¿æ¥åˆ†ä¸ºå†…è¿æ¥å’Œå¤–è¿æ¥ï¼Œä»–ä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯å†…è¿æ¥ä»…é€‰å‡ºä¸¤å¼ è¡¨ä¸­äº’ç›¸åŒ¹é…çš„è®°å½•ï¼Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è€Œå¤–è¿æ¥ä¼šé€‰å‡ºå…¶ä»–ä¸åŒ¹é…çš„è®°å½•ã€‚å¸¸ç”¨å†…è¿æ¥ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> dept; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| deptno | deptname |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | tech &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> | sale &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> | hr &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ename,deptname <span class="cm-keyword">from</span> emp,dept <span class="cm-keyword">where</span> emp<span class="cm-variable-2">.deptno</span> = dept<span class="cm-variable-2">.deptno</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ename | deptname |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-builtin">Long</span>  | tech &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Xiu &nbsp; | sale &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Lin &nbsp; | tech &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Bi &nbsp;  | tech &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Au &nbsp;  | sale &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¤–è¿æ¥åˆåˆ†ä¸ºå·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å·¦è¿æ¥ï¼šåŒ…å«æ‰€æœ‰çš„å·¦è¾¹è¡¨ä¸­çš„è®°å½•ç”šè‡³æ˜¯å³è¾¹è¡¨ä¸­æ²¡æœ‰å’Œå®ƒåŒ¹é…çš„è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å³è¿æ¥ï¼šåŒ…å«æ‰€æœ‰çš„å³è¾¹è¡¨ä¸­çš„è®°å½•ç”šè‡³æ˜¯å·¦è¾¹è¡¨ä¸­æ²¡æœ‰å’Œå®ƒåŒ¹é…çš„è®°å½•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ename,deptname <span class="cm-keyword">from</span> emp <span class="cm-keyword">left</span> <span class="cm-keyword">join</span> dept <span class="cm-keyword">on</span> emp<span class="cm-variable-2">.deptno</span> = dept<span class="cm-variable-2">.deptno</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ename | deptname |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-builtin">Long</span>  | tech &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Lin &nbsp; | tech &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Bi &nbsp;  | tech &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Xiu &nbsp; | sale &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Au &nbsp;  | sale &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Dong  | <span class="cm-atom">NULL</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Ting  | <span class="cm-atom">NULL</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> deptname,ename <span class="cm-keyword">from</span> emp <span class="cm-keyword">right</span> <span class="cm-keyword">join</span> dept <span class="cm-keyword">on</span> emp<span class="cm-variable-2">.deptno</span> = dept<span class="cm-variable-2">.deptno</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| deptname | ename |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| tech &nbsp; &nbsp; | <span class="cm-builtin">Long</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| sale &nbsp; &nbsp; | Xiu &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| tech &nbsp; &nbsp; | Lin &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| tech &nbsp; &nbsp; | Bi &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| sale &nbsp; &nbsp; | Au &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hr &nbsp; &nbsp; &nbsp; | <span class="cm-atom">NULL</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­æŸ¥è¯¢ï¼šæŸ¥è¯¢çš„æ¡ä»¶æ˜¯å¦å¤–ä¸€ä¸ªselectè¯­å¥çš„ç»“æœ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­æŸ¥è¯¢çš„å…³é”®å­—åŒ…æ‹¬ï¼šinã€not inã€=ã€!=ã€existsã€not existsç­‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> emp <span class="cm-keyword">where</span> deptno <span class="cm-keyword">in</span> (<span class="cm-keyword">select</span> deptno <span class="cm-keyword">from</span> dept);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ename | hiredate &nbsp; | sal &nbsp; &nbsp; | deptno |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-builtin">Long</span>  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">11</span> | <span class="cm-number">6001.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Xiu &nbsp; | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">11</span> | <span class="cm-number">5001.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Lin &nbsp; | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3000.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Bi &nbsp;  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3200.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Au &nbsp;  | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">10</span> | <span class="cm-number">3300.00</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------+---------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¦‚æœå­æŸ¥è¯¢è®°å½•æ•°å”¯ä¸€ï¼Œå¯ä»¥ç”¨=ä»£æ›¿in</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸäº›æƒ…å†µä¸‹ï¼Œå­æŸ¥è¯¢å¯ä»¥è½¬åŒ–ä¸ºè¡¨è¿æ¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è®°å½•è”åˆï¼ˆä¸å¸¸ç”¨ï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å°†ä¸¤è¡¨çš„æ•°æ®æŒ‰ç…§ä¸€å®šçš„æŸ¥è¯¢æ¡ä»¶æŸ¥è¯¢å‡ºæ¥åï¼Œå°†ç»“æœåˆå¹¶åˆ°ä¸€èµ·æ˜¾ç¤ºå‡ºæ¥ã€‚å°±éœ€è¦ä½¿ç”¨unionå’Œunion allå…³é”®å­—ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># UNION ALLï¼šå°†æ‰€æœ‰ç»“æœé›†ç›´æ¥åˆå¹¶åœ¨ä¸€èµ·</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># UNIONï¼šå°†UNION ALLåçš„ç»“æœè¿›è¡Œä¸€æ¬¡DISTINCTï¼Œå»é™¤é‡å¤è®°å½•åçš„ç»“æœ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">UNION</span>|<span class="cm-keyword">UNION</span> <span class="cm-keyword">ALL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">UNION</span>|<span class="cm-keyword">UNION</span> <span class="cm-keyword">ALL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> tn;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> deptno <span class="cm-keyword">from</span> emp <span class="cm-keyword">union</span> <span class="cm-keyword">all</span> <span class="cm-keyword">select</span> deptno <span class="cm-keyword">from</span> dept;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| deptno |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">10</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> deptno <span class="cm-keyword">from</span> emp <span class="cm-keyword">union</span> <span class="cm-keyword">select</span> deptno <span class="cm-keyword">from</span> dept; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| deptno |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 5221px;"></div><div class="CodeMirror-gutters" style="display: none; height: 5221px;"></div></div></div></pre><h2><a name="23-dclè¯­å¥" class="md-header-anchor"></a><span>2.3 DCLè¯­å¥</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ›å»ºç”¨æˆ· </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ipå­—æ®µï¼š(1)localhost (2)å…¬ç½‘ip(æŒ‡å®šipæ®µçš„è¯ä½¿ç”¨'%') (3)% æ‰€æœ‰ip,usernameä¸åŠ å¼•å·å¯ä»¥ï¼Œpasswordå¿…é¡»åŠ å¼•å·</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">user</span> <span class="cm-string">'username'</span><span class="cm-variable-2">@'ip' identified by 'password'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ é™¤ç”¨æˆ·</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">user</span> username <span class="cm-variable-2">@'ip'</span>ï¼›</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¿®æ”¹ç”¨æˆ·å¯†ç </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">user</span> <span class="cm-string">'username'</span><span class="cm-variable-2">@'ip' identified by 'new_password'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ·æ–°æƒé™ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´æ›´æ”¹å¯†ç æ— æ•ˆ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">flush</span> <span class="cm-keyword">privileges</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ©ç”¨DMLæ›´æ”¹ç”¨æˆ·å¯†ç </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">use</span> mysql;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">update</span> <span class="cm-keyword">user</span> <span class="cm-keyword">set</span> authentication_string=<span class="cm-keyword">PASSWORD</span>(<span class="cm-string">'new_password'</span>) <span class="cm-keyword">where</span> <span class="cm-keyword">user</span>=<span class="cm-string">'ç”¨æˆ·å'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">flush</span> <span class="cm-keyword">privileges</span>;//åˆ·æ–°æƒé™ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´æ›´æ”¹å¯†ç æ— æ•ˆ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ç”¨æˆ·æˆæƒ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">grant</span> pri1,pri2,..<span class="cm-variable-2">.prin</span> <span class="cm-keyword">on</span> {DB_NAME.*|*.*} <span class="cm-keyword">to</span> username <span class="cm-variable-2">@'ip'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æˆæƒçš„åŒæ—¶åˆ›å»ºç”¨æˆ·</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">grant</span> pri1,pri2,..<span class="cm-variable-2">.prin</span> <span class="cm-keyword">on</span> {DB_NAME.*|*.*} <span class="cm-keyword">to</span> username <span class="cm-variable-2">@'ip' identified by 'password'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ³¨ï¼šæ”¯æŒé€šé…ç¬¦ï¼Œâ€˜*â€™ä»£è¡¨æ‰€æœ‰ï¼›æˆäºˆæ‰€æœ‰çš„æƒé™å¯ç”¨ all æˆ– all privileges</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å•ç”¨æˆ·æˆäºˆå¤šåº“æƒé™ï¼Œå¤šä¸ªgrantåˆ†å¼€æˆäºˆ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’¤é”€æƒé™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">revoke</span> pri1,pri2..<span class="cm-variable-2">.prin</span> <span class="cm-keyword">on</span> {DB_NAME.*|*.*} <span class="cm-keyword">from</span> username<span class="cm-variable-2">@'ip'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹ç”¨æˆ·æƒé™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">grants</span> <span class="cm-keyword">for</span> username<span class="cm-variable-2">@'ip'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ€»ç»“ï¼šå¯¹ç”¨æˆ·ç›¸å…³çš„æƒé™ã€å¯†ç ã€é…ç½®ç­‰ä¿¡æ¯çš„éƒ½æ˜¯ä¿®æ”¹çš„mysqlä¸‹çš„userè¡¨ï¼Œæ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬é€šè¿‡DCLåˆ›å»ºç”¨æˆ·ï¼Œå®é™…å°±æ˜¯æƒ³mysql.userä¸‹æ’å…¥äº†ä¸€æ¡è®°å½•ï¼Œæ¢è¨€ä¹‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡DMLç›´æ¥å‘è¡¨ä¸­æ’å…¥ï¼Œè¿™æ˜¯å¯ä»¥çš„ï¼Œæ›´æ”¹ç”¨æˆ·å¯†ç ä¹Ÿå¯ä»¥é€šè¿‡updateç­‰æ“ä½œå®ç°ï¼Œä½†é€šå¸¸æˆ‘ä»¬ä¸è¿™æ ·åšã€‚è€Œæ˜¯é€šè¿‡DCLæ¥æ“ä½œã€‚å› ä¸ºDBAæ§åˆ¶ç€DBçš„è¿è½¬ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¸‹é¢è¿›è¡Œå®æ“ äº‘æœåŠ¡å™¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">use</span> mysql;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Database</span> <span class="cm-keyword">changed</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">user</span>,host <span class="cm-keyword">from</span> <span class="cm-keyword">user</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">user</span> &nbsp; &nbsp; &nbsp; &nbsp;  | host &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| mysql<span class="cm-variable-2">.session</span> | localhost |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| mysql<span class="cm-variable-2">.sys</span> &nbsp; &nbsp; | localhost |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| root &nbsp; &nbsp; &nbsp; &nbsp;  | localhost |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ›å»ºè¿œç«¯ç™»å½•ç”¨æˆ·(æŒ‡å®šIP)ï¼Œå¹¶æˆäºˆæƒé™ã€ä¹Ÿå¯ä»¥è®¾ç½®IPæ®µ 112.38.%.%ã€‘</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">grant</span> <span class="cm-keyword">all</span> <span class="cm-keyword">on</span> test.* <span class="cm-keyword">to</span> stronger<span class="cm-variable-2">@'112.38.54.240' identified by '123'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">user</span>,host <span class="cm-keyword">from</span> <span class="cm-keyword">user</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">user</span> &nbsp; &nbsp; &nbsp; &nbsp;  | host &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| stronger &nbsp; &nbsp;  | <span class="cm-number">112.38.54.240</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| mysql<span class="cm-variable-2">.session</span> | localhost &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| mysql<span class="cm-variable-2">.sys</span> &nbsp; &nbsp; | localhost &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| root &nbsp; &nbsp; &nbsp; &nbsp;  | localhost &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># é˜²æ­¢åˆ›å»ºä¸èƒ½åŠæ—¶ç”Ÿæ•ˆ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">flush</span> <span class="cm-keyword">privileges</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æœ¬åœ°ç™»å½•æµ‹è¯•</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/user/dos&gt;mysql -ustronger -h39<span class="cm-number">.97.181.76</span> -p</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/user/dos&gt;Enter <span class="cm-keyword">password</span>: ***</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¸Šè¿°æ“ä½œæŠ¥é”™çš„è§£å†³æ–¹æ¡ˆï¼ˆå¯å‚è€ƒï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># whereis my.cnf å®šä½åˆ°my.cnfæ‰€åœ¨æ–‡ä»¶ï¼ŒæŸ¥çœ‹my.cnfæ˜¯å¦æœ‰bind-address=127.0.0.1,å°†å…¶æ³¨é‡Šæˆ–åˆ å»æˆ–è€…æ”¹ä¸ºbind-address=0.0.0.0ã€‚</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1380px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1380px;"></div></div></div></pre><h2><a name="24-å¸®åŠ©çš„ä½¿ç”¨" class="md-header-anchor"></a><span>2.4 å¸®åŠ©çš„ä½¿ç”¨</span></h2><p><span>mysqlå‘½ä»¤å’Œè™½ä¸åŠlinuxå‘½ä»¤å¤šï¼Œä½†æ˜¯å…¨éƒ¨éƒ½è®°ä½æ˜¯...ï¼Œåœ¨è€Œmysqlä¸Šä½¿ç”¨å¸®åŠ©ï¼Œä¸å•å•æ˜¯æŸ¥çœ‹è¿™ä¸ªå‘½ä»¤æ€ä¹ˆç”¨ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¸‹çš„mysqlæ”¯æŒå“ªäº›å‡½æ•°å’ŒåŠŸèƒ½æˆ–è€…åœ¨è¯¥ç‰ˆæœ¬ä¸ŠæŸäº›å‘½ä»¤æ˜¯å¦è¿˜æ”¯æŒã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ˜¾ç¤ºå¯ä¾›æŸ¥è¯¢çš„åˆ†ç±»ï¼Œç„¶åå¯ä»¥ç»§ç»­ï¼Ÿé€‰æ‹©æŸä¸ªåˆ†ç±»æŸ¥çœ‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-variable-3">? </span>contents</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å…³é”®å­—å¿«é€ŸæŸ¥è¯¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-variable-3">? </span>keyword</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥è¯¢createå‘½ä»¤çš„ç›¸å…³ä½¿ç”¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-variable-3">? </span><span class="cm-keyword">create</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Many <span class="cm-keyword">help</span> items <span class="cm-keyword">for</span> your request exist.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">To</span> make a more <span class="cm-keyword">specific</span> request, please type <span class="cm-string">'help &lt;item&gt;'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">where</span> &lt;item&gt; <span class="cm-keyword">is</span> <span class="cm-keyword">one</span> of the following</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">topics:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">DATABASE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">EVENT</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">FUNCTION</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">FUNCTION</span> UDF</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">INDEX</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> LOGFILE <span class="cm-keyword">GROUP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">PROCEDURE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">SERVER</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLESPACE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TRIGGER</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">USER</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">VIEW</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">SHOW</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">SHOW</span> <span class="cm-keyword">CREATE</span> <span class="cm-keyword">DATABASE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">SHOW</span> <span class="cm-keyword">CREATE</span> <span class="cm-keyword">EVENT</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">SHOW</span> <span class="cm-keyword">CREATE</span> <span class="cm-keyword">FUNCTION</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">SHOW</span> <span class="cm-keyword">CREATE</span> <span class="cm-keyword">PROCEDURE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">SHOW</span> <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">SPATIAL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 736px;"></div><div class="CodeMirror-gutters" style="display: none; height: 736px;"></div></div></div></pre><h1><a name="3-mysqlæ”¯æŒçš„æ•°æ®ç±»å‹" class="md-header-anchor"></a><span>3. MySQLæ”¯æŒçš„æ•°æ®ç±»å‹</span></h1><h2><a name="31-æ•°å€¼ç±»å‹" class="md-header-anchor"></a><span>3.1 æ•°å€¼ç±»å‹</span></h2><p><span>MySQLæ”¯æŒæ‰€æœ‰æ ‡å‡†SQLä¸­çš„æ•°å€¼ç±»å‹ï¼Œä¸»è¦æœ‰</span><strong><span>æ•´æ•°ã€æµ®ç‚¹æ•°ã€å®šç‚¹æ•°ã€ä½ç±»å‹</span></strong><span>ã€‚è¡¨3-1åˆ—å‡ºäº†MySQL5.0ä¸­æ”¯æŒçš„æ‰€æœ‰æ•°å€¼ç±»å‹ã€‚å…³é”®å­—INTæ˜¯INTEGERçš„åŒåè¯ï¼ŒDECæ˜¯DECIMALçš„åŒåè¯ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192409.png" referrerpolicy="no-referrer"></p><h3><a name="311-æ•´æ•°ç±»å‹" class="md-header-anchor"></a><span>3.1.1 æ•´æ•°ç±»å‹</span></h3><p><span>(1) å¯¹äºæ•´å‹æ•°æ®ï¼ŒMySQLæ”¯æŒåœ¨ç±»å‹åç§°åé¢çš„å°æ‹¬å·å†…æŒ‡å®šæ˜¾ç¤ºå®½åº¦ã€‚å¦‚æœä¸æ˜¾ç¤ºæŒ‡å®šå®½åº¦åˆ™é»˜è®¤ä¸ºint(11)ã€‚ä¸€èˆ¬é…åˆzerofillä½¿ç”¨ï¼Œzerofillå°±æ˜¯ç”¨&quot;0&quot;å¡«å……çš„æ„æ€ï¼Œå°±æ˜¯åœ¨æ•°å­—ä½æ•°ä¸å¤Ÿçš„ç©ºé—´ç”¨å­—ç¬¦&quot;0&quot;å¡«æ»¡ã€‚</span></p><p><span>è®¾ç½®äº†å®½åº¦é™åˆ¶åï¼Œå¦‚æœæ’å…¥å¤§äºå®½åº¦é™åˆ¶çš„å€¼ï¼Œä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼Œåªä¸è¿‡å®½åº¦æ ¼å¼å·²ç»å¤±å»äº†å®ƒæœ¬æ¥çš„æ„ä¹‰ã€‚</span></p><p><span>(2)å¯é€‰å±æ€§</span><code>UNSIGNED</code><span>ã€</span><code>AUTO_INCREMENT</code><span>ã€‚</span></p><p><code>UNSIGNED</code><span>ä¿å­˜æ— ç¬¦å·æ•°ï¼ˆéè´Ÿæ•°ï¼‰å¯è®¾ç½®æ­¤é€‰é¡¹ã€‚</span></p><p><code>AUTO_INCREMENT</code><span>äº§ç”Ÿå”¯ä¸€æ ‡è¯†ç¬¦æˆ–é¡ºåºå€¼ï¼Œ</span><strong><span>ä¸€ä¸ªè¡¨ä¸­åªèƒ½æœ‰ä¸€ä¸ª</span><code>AUTO_INCREMENT</code><span>åˆ—ã€‚</span></strong><span>å¯¹äºä»»ä½•æƒ³è¦ä½¿ç”¨</span><code>AUTO_INCREMENT</code><span>çš„åˆ—ï¼Œåº”è¯¥å®šä¹‰ä¸º</span><code>NOT NULL</code><span>ï¼Œå¹¶å®šä¹‰ä¸º</span><code>PRIMARY KEY</code><span>æˆ–å®šä¹‰ä¸º</span><code>UNIQUE</code><span>é”®ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ›å»ºè¡¨t1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t1 (id1 <span class="cm-builtin">int</span>,id2 <span class="cm-builtin">int</span>(<span class="cm-number">5</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.02</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">desc</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Field</span> | Type &nbsp;  | <span class="cm-atom">Null</span> | <span class="cm-keyword">Key</span> | <span class="cm-keyword">Default</span> | Extra |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1 &nbsp; | <span class="cm-builtin">int</span>(<span class="cm-number">11</span>) | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id2 &nbsp; | <span class="cm-builtin">int</span>(<span class="cm-number">5</span>)  | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(<span class="cm-number">128</span>,<span class="cm-number">128</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1  | id2  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">128</span> | &nbsp;<span class="cm-number">128</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¿®æ”¹è¡¨å­—æ®µå±æ€§ä¸ºzerofill</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t1 <span class="cm-keyword">modify</span> id1 <span class="cm-builtin">int</span> <span class="cm-keyword">zerofill</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.05</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Records: <span class="cm-number">1</span>  Duplicates: <span class="cm-number">0</span> &nbsp;<span class="cm-keyword">Warnings</span>: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t1 <span class="cm-keyword">modify</span> id2 <span class="cm-builtin">int</span>(<span class="cm-number">5</span>) <span class="cm-keyword">zerofill</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.05</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Records: <span class="cm-number">1</span>  Duplicates: <span class="cm-number">0</span> &nbsp;<span class="cm-keyword">Warnings</span>: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¸æ»¡è¶³å®½åº¦0å¡«å……</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1 &nbsp; &nbsp; &nbsp;  | id2 &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">0000000128</span> | <span class="cm-number">00128</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’å…¥å¤§äºå®½åº¦å€¼çš„æ•°æ®å¯¹äºå­˜å‚¨æ²¡æœ‰å½±å“</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(<span class="cm-number">128</span>, <span class="cm-number">1280001</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1 &nbsp; &nbsp; &nbsp;  | id2 &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">0000000128</span> | &nbsp; <span class="cm-number">00128</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">0000000128</span> | <span class="cm-number">1280001</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ›´æ”¹è¡¨å­—æ®µå±æ€§ä¸ºUNSIGNED</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t1 <span class="cm-keyword">add</span> id3 <span class="cm-builtin">tinyint</span> <span class="cm-builtin">UNSIGNED</span>; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.06</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Records: <span class="cm-number">0</span>  Duplicates: <span class="cm-number">0</span> &nbsp;<span class="cm-keyword">Warnings</span>: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># MySQLè‡ªåŠ¨ä¸ºzerofillåˆ—æ·»åŠ unsignedå±æ€§</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">desc</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------------------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Field</span> | Type &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-atom">Null</span> | <span class="cm-keyword">Key</span> | <span class="cm-keyword">Default</span> | Extra |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------------------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1 &nbsp; | <span class="cm-builtin">int</span>(<span class="cm-number">10</span>) <span class="cm-builtin">unsigned</span> <span class="cm-keyword">zerofill</span> | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id2 &nbsp; | <span class="cm-builtin">int</span>(<span class="cm-number">5</span>) <span class="cm-builtin">unsigned</span> <span class="cm-keyword">zerofill</span>  | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id3 &nbsp; | <span class="cm-builtin">tinyint</span>(<span class="cm-number">3</span>) <span class="cm-builtin">unsigned</span> &nbsp; &nbsp; &nbsp; | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------------------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’å…¥è´Ÿæ•°æç¤ºå€¼è¶Šç•Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(-<span class="cm-number">1</span>,-<span class="cm-number">1</span>,-<span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ERROR <span class="cm-number">1264</span> (<span class="cm-number">22003</span>): <span class="cm-keyword">Out</span> of <span class="cm-keyword">range</span> <span class="cm-keyword">value</span> <span class="cm-keyword">for</span> <span class="cm-keyword">column</span> <span class="cm-string">'id1'</span> <span class="cm-keyword">at</span> <span class="cm-keyword">row</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å®šä¹‰AUTO_INCREMENTåˆ—çš„æ–¹å¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> A1(ID <span class="cm-builtin">INT</span> <span class="cm-keyword">AUTO_INCREMENT</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> A1(ID <span class="cm-builtin">INT</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>,<span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span>(ID));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> A1(ID <span class="cm-builtin">INT</span> <span class="cm-keyword">AUTO_INCREMENT</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>,<span class="cm-keyword">UNIQUE</span>(ID));</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1679px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1679px;"></div></div></div></pre><h3><a name="312-å°æ•°ç±»å‹" class="md-header-anchor"></a><span>3.1.2 å°æ•°ç±»å‹</span></h3><p><span>MySQLå°æ•°ç±»å‹åˆ†ä¸º</span><strong><span>æµ®ç‚¹æ•°(float,double)å’Œå®šç‚¹æ•°(decimal)</span></strong><span>ã€‚å®šç‚¹æ•°åœ¨MySQLå†…éƒ¨ä»¥å­—ç¬¦ä¸²å½¢å¼å­˜æ”¾ï¼Œæ¯”æµ®ç‚¹æ•°æ›´ç²¾ç¡®ï¼Œé€‚åˆç”¨æ¥è¡¨ç¤ºè´§å¸ç­‰ç²¾åº¦é«˜çš„æ•°æ®ã€‚</span></p><p><span>(1)æµ®ç‚¹æ•°å’Œå®šç‚¹æ•°éƒ½å¯ä»¥ç”¨</span><strong><span>ç±»å‹åç§°ååŠ &quot;(M,D)&quot;</span></strong><span>çš„æ–¹å¼æ¥è¿›è¡Œè¡¨ç¤ºã€‚è¡¨ç¤ºè¯¥å€¼ä¸€å…±æ˜¾ç¤ºMä½(æ•´æ•°ä½+å°æ•°ä½)ï¼Œå…¶ä¸­Dä½ä½äºå°æ•°ç‚¹åé¢ï¼Œæ”¯æŒå››èˆäº”å…¥ï¼Œä¸€èˆ¬æµ®ç‚¹æ•°ä¸è¿™æ ·æŒ‡å®šï¼Œéæ ‡å‡†ç”¨æ³•ã€‚è€Œdecimalåœ¨ä¸æŒ‡å®šç²¾åº¦æ—¶ï¼Œé»˜è®¤çš„æ•´æ•°ä½ä¸º10ï¼Œé»˜è®¤çš„å°æ•°ä½ä¸º0ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ç±»å‹åç§°åŠ (M,D)|(ç²¾åº¦,æ ‡åº¦) </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">å®šä¹‰ä¸€ä¸ªfloat(<span class="cm-number">7</span>,<span class="cm-number">4</span>)çš„åˆ—å¯ä»¥æ˜¾ç¤º-<span class="cm-number">999.9999</span>;å¦‚æœæ’å…¥999<span class="cm-number">.00005</span>ï¼Œè¿‘ä¼¼ç»“æœä¸º999<span class="cm-number">.0001</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>(2)æµ®ç‚¹æ•°å¦‚æœä¸å†™ç²¾åº¦å’Œæ ‡åº¦ï¼Œåˆ™ä¼šæŒ‰ç…§å®é™…ç²¾åº¦å€¼æ˜¾ç¤ºï¼Œå¦‚æœæœ‰ç²¾åº¦å’Œæ ‡åº¦ï¼Œåˆ™ä¼šè‡ªåŠ¨å°†å››èˆäº”å…¥åçš„ç»“æœæ’å…¥ï¼Œç³»ç»Ÿä¸ä¼šæŠ¥é”™ï¼›å®šç‚¹æ•°å¦‚æœä¸å†™ç²¾åº¦å’Œæ ‡åº¦ï¼Œåˆ™æŒ‰ç…§é»˜è®¤å€¼decimal(10,0)æ¥è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”å¦‚æœæ•°æ®è¶…è¶Šäº†ç²¾åº¦å’Œæ ‡åº¦å€¼ï¼Œå°æ•°ä½ä¼šæˆªæ–­ï¼Œå¹¶æŒ‰å››èˆäº”å…¥å¤„ç†ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t1(id1 <span class="cm-builtin">float</span>(<span class="cm-number">3</span>,<span class="cm-number">2</span>),id2 <span class="cm-builtin">double</span>(<span class="cm-number">3</span>,<span class="cm-number">2</span>),id3 <span class="cm-builtin">decimal</span>(<span class="cm-number">3</span>,<span class="cm-number">2</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.02</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># doubleç±»å‹çš„id2å­—æ®µæ’å…¥çš„æ•°æ®è¶…å‡ºæ ‡åº¦ å°æ•°ä½æˆªæ–­å››èˆäº”å…¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(<span class="cm-number">2.55</span>,<span class="cm-number">2.555</span>,<span class="cm-number">2.55</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1  | id2  | id3  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2.55</span> | <span class="cm-number">2.56</span> | <span class="cm-number">2.55</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># decimalç±»å‹çš„id3å­—æ®µæ’å…¥çš„æ•°æ®è¶…å‡ºæ ‡åº¦ ä¼šç»™å‡ºè­¦å‘Šæç¤º</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(<span class="cm-number">2.55</span>,<span class="cm-number">2.55</span>,<span class="cm-number">2.555</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected, <span class="cm-number">1</span> warning (<span class="cm-number">0.01</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æç¤ºid3å­—æ®µçš„æ•°æ®è¢«æˆªæ–­å¤„ç†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">warnings</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------+------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Level</span> | <span class="cm-keyword">Code</span> | Message &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------+------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Note  | <span class="cm-number">1265</span> | <span class="cm-keyword">Data</span> truncated <span class="cm-keyword">for</span> <span class="cm-keyword">column</span> <span class="cm-string">'id3'</span> <span class="cm-keyword">at</span> <span class="cm-keyword">row</span> <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------+------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1  | id2  | id3  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2.55</span> | <span class="cm-number">2.56</span> | <span class="cm-number">2.55</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2.55</span> | <span class="cm-number">2.55</span> | <span class="cm-number">2.56</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ›´æ”¹æ•°æ®ç±»å‹ï¼Œçœç•¥ç²¾åº¦å’Œæ ‡åº¦</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t1 <span class="cm-keyword">modify</span> id1 <span class="cm-builtin">float</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t1 <span class="cm-keyword">modify</span> id2 <span class="cm-builtin">double</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t1 <span class="cm-keyword">modify</span> id3 <span class="cm-builtin">decimal</span>; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># float,doubleçœç•¥ç²¾åº¦å’Œæ ‡åº¦åˆ™ä¼šæŒ‰ç…§å®é™…ç²¾åº¦å€¼æ˜¾ç¤º decimalçœç•¥åç²¾åº¦æ ‡åº¦é»˜è®¤ä¸º(10,0)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">desc</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Field</span> | Type &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-atom">Null</span> | <span class="cm-keyword">Key</span> | <span class="cm-keyword">Default</span> | Extra |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1 &nbsp; | <span class="cm-builtin">float</span> &nbsp; &nbsp; &nbsp; &nbsp; | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id2 &nbsp; | <span class="cm-builtin">double</span> &nbsp; &nbsp; &nbsp;  | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id3 &nbsp; | <span class="cm-builtin">decimal</span>(<span class="cm-number">10</span>,<span class="cm-number">0</span>) | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---------------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’å…¥æ•°æ®</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(<span class="cm-number">2.555</span>,<span class="cm-number">2.555</span>,<span class="cm-number">2.555</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">warnings</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------+------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Level</span> | <span class="cm-keyword">Code</span> | Message &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------+------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Note  | <span class="cm-number">1265</span> | <span class="cm-keyword">Data</span> truncated <span class="cm-keyword">for</span> <span class="cm-keyword">column</span> <span class="cm-string">'id3'</span> <span class="cm-keyword">at</span> <span class="cm-keyword">row</span> <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------+------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># floatå’Œdoubleç±»å‹çš„å­—æ®µå€¼æ²¡æœ‰å‘ç”Ÿå½±å“ï¼Œdecimalç±»å‹çš„å­—æ®µå‘ç”Ÿæˆªæ–­å¤„ç†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1 &nbsp; | id2 &nbsp; | id3  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">2.55</span> | &nbsp;<span class="cm-number">2.56</span> | &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;<span class="cm-number">2.55</span> | &nbsp;<span class="cm-number">2.55</span> | &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2.555</span> | <span class="cm-number">2.555</span> | &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1518px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1518px;"></div></div></div></pre><h3><a name="313-bitä½ç±»å‹" class="md-header-anchor"></a><span>3.1.3 BIT(ä½)ç±»å‹</span></h3><p><span>(1)ç”¨äºå­˜æ”¾ä½å­—æ®µå€¼ï¼ŒBIT(M)å¯ä»¥ç”¨æ¥å­˜æ”¾å¤šä½äºŒè¿›åˆ¶æ•°ï¼ŒMèŒƒå›´ä»1~64ï¼Œå¦‚æœä¸å†™åˆ™é»˜è®¤ä¸º1ä½ã€‚å¯¹äºä½å­—æ®µï¼Œç›´æ¥ä½¿ç”¨</span><code>SELECT</code><span>å‘½ä»¤å°†ä¸ä¼šçœ‹åˆ°ç»“æœï¼Œå¯ä»¥ç”¨</span><code>bin() ï¼ˆæ˜¾ç¤ºä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼‰æˆ–è€…hex()</code><span>å‡½æ•°è¿›è¡Œè¯»å–ã€‚</span></p><p><span>(2)æ•°æ®ä»¥åè¿›åˆ¶è¿›è¡Œæ’å…¥ï¼Œé¦–å…ˆè½¬åŒ–ä¸ºäºŒè¿›åˆ¶ï¼Œå¦‚æœè½¬åŒ–åçš„ä½æ•°å°äºå®é™…å®šä¹‰çš„ä½æ•°ï¼Œåˆ™æ’å…¥å¤±è´¥ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># çœç•¥æ’å…¥çš„ä½æ•°é»˜è®¤ä¸º1ä½</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t1(id1 <span class="cm-builtin">BIT</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.02</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’å…¥åè¿›åˆ¶5,ä¼šè¢«mysqlè½¬åŒ–ä¸º101è¿›è¡Œæ’å…¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(<span class="cm-number">5</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># äºŒè¿›åˆ¶æ•°æ®ä½æ•°101å¤§äºå®šä¹‰çš„BITä½æ•°èŒƒå›´ï¼ŒæŠ¥é”™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ERROR <span class="cm-number">1406</span> (<span class="cm-number">22001</span>): <span class="cm-keyword">Data</span> too <span class="cm-builtin">long</span> <span class="cm-keyword">for</span> <span class="cm-keyword">column</span> <span class="cm-string">'id1'</span> <span class="cm-keyword">at</span> <span class="cm-keyword">row</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¿®æ”¹BITä½æ•°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t1 <span class="cm-keyword">modify</span> id1 <span class="cm-builtin">BIT</span>(<span class="cm-number">4</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å†æ¬¡æ’å…¥æ•°æ®5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(<span class="cm-number">5</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ç›´æ¥ä½¿ç”¨SELECTé»˜è®¤çœ‹ä¸åˆ°ç»“æœ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id1  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> bin(id1) <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| bin(id1) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">101</span> &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(<span class="cm-number">12</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> bin(id1) <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| bin(id1) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">101</span> &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1100</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 805px;"></div><div class="CodeMirror-gutters" style="display: none; height: 805px;"></div></div></div></pre><h2><a name="32-å­—ç¬¦ä¸²" class="md-header-anchor"></a><span>3.2 å­—ç¬¦ä¸²</span></h2><p><span>MySQLä¸­çš„å­—ç¬¦ä¸²åŒ…æ‹¬</span><code>CHARã€VARCHARã€BINARYã€VARBINARYã€BLOBã€TEXTã€ENUMå’ŒSET</code><span>ç­‰å­—ç¬¦ä¸²ç±»å‹ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192634.png" referrerpolicy="no-referrer"></p><p><span>(1)charå’Œvarcharï¼Œå¸¸ç”¨æ¥ä¿å­˜è¾ƒçŸ­çš„å­—ç¬¦ä¸²ï¼Œä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºå­˜å‚¨æ–¹å¼çš„ä¸åŒï¼šcharåˆ—çš„é•¿åº¦å›ºå®šä¸ºåˆ›å»ºè¡¨æ—¶å£°æ˜çš„é•¿åº¦ï¼Œå³ä¸€æ—¦å®šä¹‰ååŠæ—¶å­˜å‚¨æ•°æ®é•¿åº¦ä¸æ»¡è¶³ä¹Ÿä¼š(ç©ºå­—ç¬¦å¡«å……)å å®šä¹‰çš„é•¿åº¦ç©ºé—´ï¼›è€Œvarcharåˆ—ä¸­çš„å€¼ä¸ºå¯å˜å­—ç¬¦ä¸²ï¼Œå­˜å‚¨é•¿åº¦æ ¹æ®å­—ç¬¦ä¸²çš„é•¿åº¦å˜åŒ–ã€‚å¦å¤–ï¼Œåœ¨æ£€ç´¢çš„æ—¶å€™ï¼Œcharåˆ—åˆ é™¤äº†å°¾éƒ¨çš„ç©ºæ ¼ï¼Œè€Œvarcharåˆ™ä¿ç•™è¿™äº›ç©ºæ ¼ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> vc(v <span class="cm-builtin">varchar</span>(<span class="cm-number">4</span>),c <span class="cm-builtin">char</span>(<span class="cm-number">4</span>)); </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’å…¥'ab '</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> vc <span class="cm-keyword">values</span>(<span class="cm-string">'ab '</span>,<span class="cm-string">'ab '</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># charç±»å‹å­—æ®µåˆ é™¤äº†å°¾éƒ¨çš„ç©ºæ ¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> *,length(v),length(c) <span class="cm-keyword">from</span> vc;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+-----------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| v &nbsp;  | c &nbsp;  | length(v) | length(c) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+-----------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ab &nbsp; | ab &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------+-----------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> concat(v,<span class="cm-string">'+'</span>),concat(c,<span class="cm-string">'+'</span>),length(v),length(c) <span class="cm-keyword">from</span> vc; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------+-----------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| concat(v,<span class="cm-string">'+'</span>) | concat(c,<span class="cm-string">'+'</span>) | length(v) | length(c) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------+-----------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ab + &nbsp; &nbsp; &nbsp; &nbsp;  | ab+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+---------------+-----------+-----------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 391px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><p><span>(2)ENUMç±»å‹æ’å…¥æ•°æ®çš„æ—¶å€™æ˜¯å¿½ç•¥å¤§å°å†™çš„ï¼Œå¯¹äºæ’å…¥çš„æ•°æ®ä¸å†ENUMæŒ‡å®šèŒƒå›´å†…çš„å€¼æ—¶ï¼Œä¼šæŠ¥é”™ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¯ä»¥çœ‹å‡ºæšä¸¾é‡ä¸‹æ ‡ä»1å¼€å§‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t <span class="cm-keyword">add</span> gender <span class="cm-keyword">enum</span>(<span class="cm-string">'M'</span>,<span class="cm-string">'F'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(<span class="cm-number">10</span>, <span class="cm-number">2</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id &nbsp; | gender |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-number">20</span> | <span class="cm-atom">NULL</span> &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-number">10</span> | F &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(<span class="cm-number">30</span>, <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id &nbsp; | gender |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-number">20</span> | <span class="cm-atom">NULL</span> &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-number">10</span> | F &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-number">30</span> | M &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 575px;"></div><div class="CodeMirror-gutters" style="display: none; height: 575px;"></div></div></div></pre><h2><a name="33-æ—¥æœŸå’Œæ—¶é—´ç±»å‹" class="md-header-anchor"></a><span>3.3 æ—¥æœŸå’Œæ—¶é—´ç±»å‹</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192400.png" referrerpolicy="no-referrer"></p><p><span>è¿™äº›ç±»å‹çš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š</span></p><ul><li><span>è¡¨ç¤ºå¹´æœˆæ—¥ï¼Œé€šå¸¸ç”¨DATEè¡¨ç¤ºã€‚</span></li><li><span>å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œé€šå¸¸ç”¨DATETIMEè¡¨ç¤ºã€‚</span></li><li><span>åªç”¨æ¥è¡¨ç¤ºæ—¶åˆ†ç§’ï¼Œé€šå¸¸ç”¨TIMEè¡¨ç¤ºã€‚</span></li><li><span>å¦‚æœè¦ç»å¸¸æ’å…¥æˆ–è€…æ›´æ–°æ—¥æœŸä¸ºå½“å‰ç³»ç»Ÿæ—¶é—´ï¼Œåˆ™é€šå¸¸ä½¿ç”¨TIMESTAMPè¡¨ç¤ºã€‚</span></li><li><span>å¦‚æœåªè¡¨ç¤ºå¹´ä»½ï¼Œå¯ä»¥ç”¨YEARæ¥è¡¨ç¤ºï¼Œå®ƒæ¯”DATEå ç”¨æ›´å°‘çš„ç©ºé—´ã€‚YEARæœ‰2ä½æˆ–4ä½æ ¼å¼çš„å¹´ã€‚é»˜è®¤æ˜¯4ä½æ ¼å¼ã€‚åœ¨ä¸¤ä½æ ¼å¼ä¸­å…è®¸çš„å€¼æ˜¯70~69ï¼ˆ1970~2069ï¼‰ã€‚MySQLä»¥YYYYæ ¼å¼æ˜¾ç¤ºYEARå€¼ã€‚</span></li></ul><p><span>ä»ä¸Šè¡¨å¯ä»¥çœ‹å‡ºï¼Œæ¯ç§æ—¥æœŸæ—¶é—´ç±»å‹éƒ½æœ‰ä¸€ä¸ªæœ‰æ•ˆå€¼èŒƒå›´ï¼Œå¦‚æœè¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œåœ¨é»˜è®¤çš„SQLModeä¸‹ï¼Œç³»ç»Ÿä¼šè¿›è¡Œé”™è¯¯æç¤ºï¼Œå¹¶å°†ä»¥é›¶å€¼æ¥è¿›è¡Œå­˜å‚¨ã€‚</span></p><p><span>(1)</span><code>TIMESTAMP</code><span>ç›¸å…³ç‰¹æ€§</span></p><ul><li><span>MySQLä¼šç»™è¡¨ä¸­çš„</span><strong><span>ç¬¬ä¸€ä¸ª</span></strong><code>TIMESTAMP</code><span>ç±»å‹çš„å­—æ®µè®¾ç½®é»˜è®¤å€¼ä¸ºç³»ç»Ÿæ—¥æœŸï¼Œå¦‚æœæœ‰ç¬¬äºŒä¸ªTIMESTAMPç±»å‹ï¼Œåˆ™é»˜è®¤å€¼è®¾ç½®ä¸º0å€¼</span></li><li><code>TIMESTAMP</code><span>å’Œåœ¨ä¸åŒçš„æ—¶åŒºä¸‹æ˜¾ç¤ºçš„æ—¶é—´ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</span></li><li><code>TIMESTAMP</code><span>æ”¯æŒçš„äº‹ä»¶èŒƒå›´è¾ƒå°ï¼Œå¦‚æœæ’å…¥çš„æ—¶é—´èŒƒå›´è¶…å‡ºï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</span></li><li><span>å¦‚æœåœ¨ä¸€ä¸ª</span><code>TIMESTAMP</code><span>åˆ—ä¸­æ’å…¥NULLï¼Œåˆ™è¯¥åˆ—å€¼è‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚åœ¨æ’å…¥æˆ–æ›´æ–°ä¸€è¡Œä½†ä¸æ˜ç¡®ç»™TIMESTAMPåˆ—èµ‹å€¼æ—¶ä¹Ÿä¼šè‡ªåŠ¨è®¾ç½®è¯¥åˆ—çš„å€¼ä¸ºå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t1(d <span class="cm-builtin">date</span>,t <span class="cm-builtin">time</span>,dt <span class="cm-builtin">datetime</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">desc</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Field</span> | Type &nbsp; &nbsp; | <span class="cm-atom">Null</span> | <span class="cm-keyword">Key</span> | <span class="cm-keyword">Default</span> | Extra |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| d &nbsp; &nbsp; | <span class="cm-builtin">date</span> &nbsp; &nbsp; | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| t &nbsp; &nbsp; | <span class="cm-builtin">time</span> &nbsp; &nbsp; | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| dt &nbsp;  | <span class="cm-builtin">datetime</span> | YES  | &nbsp; &nbsp; | <span class="cm-atom">NULL</span> &nbsp;  | &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----------+------+-----+---------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä½¿ç”¨nowå‡½æ•°æ’å…¥å½“å‰ç³»ç»Ÿæ—¶é—´</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t1 <span class="cm-keyword">values</span>(now(),now(),now());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ã€€datetimeæ˜¯dateå’Œtimeçš„ç»“åˆä½“ï¼Œæ‰€ä»¥æ ¹æ®å®é™…éœ€è¦è®¾ç½®ç›¸åº”å­—æ®µç±»å‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t1;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| d &nbsp; &nbsp; &nbsp; &nbsp;  | t &nbsp; &nbsp; &nbsp;  | dt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> | <span class="cm-number">20</span>:01:33 | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">20</span>:01:33 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># timestampç›¸å…³çŸ¥è¯†è®²è§£</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t(ts <span class="cm-builtin">timestamp</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t<span class="cm-variable-2">\G</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">*************************** <span class="cm-number">1.</span> <span class="cm-keyword">row</span> ***************************</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">Table</span>: t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Create</span> <span class="cm-keyword">Table</span>: <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> <span class="cm-variable-2">`t`</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">`ts`</span> <span class="cm-builtin">timestamp</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-keyword">CURRENT_TIMESTAMP</span> <span class="cm-keyword">ON</span> <span class="cm-keyword">UPDATE</span> <span class="cm-keyword">CURRENT_TIMESTAMP</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">) <span class="cm-keyword">ENGINE</span>=<span class="cm-keyword">InnoDB</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-string-2">CHARSET</span>=latin1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¢åŠ åŒç±»å‹å­—æ®µ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t <span class="cm-keyword">add</span> ts1 <span class="cm-builtin">timestamp</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.03</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Records: <span class="cm-number">0</span>  Duplicates: <span class="cm-number">0</span> &nbsp;<span class="cm-keyword">Warnings</span>: <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># MySQLåªä¼šä¸ºç¬¬ä¸€ä¸ªtimestampè®¾ç½®é»˜è®¤å€¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">desc</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-----------+------+-----+---------------------+-----------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Field</span> | Type &nbsp; &nbsp;  | <span class="cm-atom">Null</span> | <span class="cm-keyword">Key</span> | <span class="cm-keyword">Default</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | Extra &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-----------+------+-----+---------------------+-----------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ts &nbsp;  | <span class="cm-builtin">timestamp</span> | <span class="cm-keyword">NO</span> &nbsp; | &nbsp; &nbsp; | <span class="cm-keyword">CURRENT_TIMESTAMP</span> &nbsp; | <span class="cm-keyword">on</span> <span class="cm-keyword">update</span> <span class="cm-keyword">CURRENT_TIMESTAMP</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ts1 &nbsp; | <span class="cm-builtin">timestamp</span> | <span class="cm-keyword">NO</span> &nbsp; | &nbsp; &nbsp; | <span class="cm-number">0000</span>-<span class="cm-number">00</span>-<span class="cm-number">00</span> <span class="cm-number">00</span>:00:00 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-----------+------+-----+---------------------+-----------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹å½“å‰æ—¶åŒº ä¸­å›½é»˜è®¤ä¸œå…«åŒº</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'time_zone'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name | <span class="cm-keyword">Value</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| time_zone &nbsp; &nbsp; | <span class="cm-string-2">SYSTEM</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(now(),now());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ts &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | ts1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">20</span>:11:28 | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">20</span>:11:28 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">set</span> time_zone=<span class="cm-string">'+9:00'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'time_zone'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name | <span class="cm-keyword">Value</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| time_zone &nbsp; &nbsp; | +<span class="cm-number">09</span>:00 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ—¶é—´è‡ªåŠ¨å‘ç”Ÿäº†å˜åŒ–</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ts &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | ts1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">21</span>:11:28 | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">21</span>:11:28 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ’å…¥æ—¶é—´èŒƒå›´å¤§äºTIMESTAMPçš„èŒƒå›´ä¼šæŠ¥é”™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t(t) <span class="cm-keyword">values</span>(<span class="cm-string">'2099-09-09 21:00:00'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ERROR <span class="cm-number">1054</span> (<span class="cm-number">42</span>S22): <span class="cm-atom">Unknown</span> <span class="cm-keyword">column</span> <span class="cm-string">'t'</span> <span class="cm-keyword">in</span> <span class="cm-string">'field list'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ’å…¥NULLå€¼ï¼Œåˆ™è¯¥åˆ—å€¼è‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰çš„æ—¥æœŸå’Œæ—¶é—´</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(<span class="cm-atom">NULL</span>,<span class="cm-atom">NULL</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ts &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | ts1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">21</span>:45:32 | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">21</span>:45:32 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">21</span>:47:25 | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">21</span>:47:25 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2024px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2024px;"></div></div></div></pre><p><span>(2)</span><code>datetime</code><span>ç›¸å…³ç‰¹æ€§</span></p><ul><li><code>YYYY-MM-DD HH:MM:SSæˆ–YY-MM-DD HH:MM:SS</code><span>æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚å…è®¸â€œä¸ä¸¥æ ¼â€è¯­æ³•ï¼šä»»ä½•æ ‡ç‚¹ç¬¦éƒ½å¯ä»¥ç”¨åšæ—¥æœŸéƒ¨åˆ†æˆ–æ—¶é—´éƒ¨åˆ†ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚</span></li><li><code>YYYYMMDDHHMMSSæˆ–YYMMDDHHMMSS</code><span>æ ¼å¼çš„æ²¡æœ‰é—´éš”ç¬¦çš„å­—ç¬¦ä¸²æˆ–</span><strong><span>æ•°å­—</span></strong><span>ï¼Œå‡å®šå­—ç¬¦ä¸²æˆ–æ•°å­—å¯¹äºæ—¥æœŸç±»å‹æ˜¯æœ‰æ„ä¹‰çš„ï¼Œåˆ™ä¼šè‡ªåŠ¨è¢«è§£é‡Šä¸ºç›¸åº”çš„æ—¶é—´ã€‚</span></li><li><span>å‡½æ•°è¿”å›çš„ç»“æœï¼Œå…¶å€¼é€‚åˆ</span><code>DATETIMEã€DATEæˆ–è€…TIMESTAMP</code><span>ä¸Šä¸‹æ–‡ï¼Œä¾‹å¦‚</span><code>NOW()æˆ–CURRENT_DATE</code><span>ã€‚</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t6(dt <span class="cm-builtin">datetime</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t6 <span class="cm-keyword">values</span>(<span class="cm-string">'2020-07-17 20:20:20'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t6 <span class="cm-keyword">values</span>(<span class="cm-string">'2020/07/17 20*20*20'</span>); &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t6 <span class="cm-keyword">values</span>(<span class="cm-string">'20200717202020'</span>); &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t6 <span class="cm-keyword">values</span>(<span class="cm-number">20200717202020</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t6;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| dt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">20</span>:20:20 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">20</span>:20:20 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">20</span>:20:20 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">17</span> <span class="cm-number">20</span>:20:20 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 437px;"></div><div class="CodeMirror-gutters" style="display: none; height: 437px;"></div></div></div></pre><h1><a name="4-mysqlä¸­çš„è¿ç®—ç¬¦" class="md-header-anchor"></a><span>4. MySQLä¸­çš„è¿ç®—ç¬¦</span></h1><p><span>MySQLæ”¯æŒå¤šç§ç±»å‹çš„è¿ç®—ç¬¦ï¼Œæ¥è¿æ¥è¡¨è¾¾å¼çš„é¡¹ã€‚è¿™äº›ç±»å‹ä¸»è¦åŒ…æ‹¬</span><strong><span>ç®—æ•°è¿ç®—ç¬¦ã€æ¯”è¾ƒè¿ç®—ç¬¦ã€é€»è¾‘è¿ç®—ç¬¦å’Œä½è¿ç®—ç¬¦</span></strong><span>ã€‚</span></p><h2><a name="41-ç®—æ•°è¿ç®—ç¬¦" class="md-header-anchor"></a><span>4.1 ç®—æ•°è¿ç®—ç¬¦</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192354.png" referrerpolicy="no-referrer"></p><p><span>(1) â€œ/â€ä¸ºå®æ•°é™¤ï¼Œç»“æœæœ‰å°æ•°ä½ï¼Œâ€œdivâ€ä¸ºæ•´æ•°é™¤ï¼Œç»“æœä¸å­˜åœ¨å°æ•°ä½ï¼Œä¸ä¼šå››èˆäº”å…¥ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ— éœ€é€‰æ‹©æ•°æ®åº“å°±å¯ä»¥è¿›è¡Œè¡¨è¾¾å¼çš„æ“ä½œæŸ¥è¯¢</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">3.1</span>+<span class="cm-number">0.04</span>,<span class="cm-number">3.1</span>-<span class="cm-number">0.04</span>,<span class="cm-number">2</span>*<span class="cm-number">3</span>,<span class="cm-number">1</span>/2,<span class="cm-number">12</span>%<span class="cm-number">8</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+-----+--------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">3.1</span>+<span class="cm-number">0.04</span> | <span class="cm-number">3.1</span>-<span class="cm-number">0.04</span> | <span class="cm-number">2</span>*<span class="cm-number">3</span> | <span class="cm-number">1</span>/2 &nbsp;  | <span class="cm-number">12</span>%<span class="cm-number">8</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+-----+--------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">3.14</span> | &nbsp; &nbsp; <span class="cm-number">3.06</span> | &nbsp; <span class="cm-number">6</span> | <span class="cm-number">0.5000</span> | &nbsp; &nbsp;<span class="cm-number">4</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+-----+--------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># é™¤æ³•è¿ç®—å’Œæ¨¡è¿ç®—ä¸­ï¼Œå¦‚æœé™¤æ•°ä¸º0ï¼Œå°†æ˜¯éæ³•é™¤æ•°ï¼Œè¿”å›ç»“æœä¸ºNULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">1</span>/0;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1</span>/0  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># divæ•´æ•°é™¤ï¼Œç»“æœä¸ä¼šå››èˆäº”å…¥ï¼Œmodå‡½æ•°å¯ä»¥å®ç°%åŒæ ·çš„æ•ˆæœ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">3</span> <span class="cm-keyword">div</span> <span class="cm-number">2</span>,<span class="cm-keyword">mod</span>(<span class="cm-number">12</span>,<span class="cm-number">8</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">3</span> <span class="cm-keyword">div</span> <span class="cm-number">2</span> | <span class="cm-keyword">mod</span>(<span class="cm-number">12</span>,<span class="cm-number">8</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">4</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+-----------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 552px;"></div><div class="CodeMirror-gutters" style="display: none; height: 552px;"></div></div></div></pre><h2><a name="42-æ¯”è¾ƒè¿ç®—ç¬¦" class="md-header-anchor"></a><span>4.2 æ¯”è¾ƒè¿ç®—ç¬¦</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192350.png" referrerpolicy="no-referrer"></p><p><span>(1)MySQLå…è®¸ç”¨æˆ·å¯¹è¡¨è¾¾å¼å·¦å³ä¸¤è¾¹çš„æ“ä½œæ•°è¿›è¡Œæ¯”è¾ƒï¼Œ</span><strong><span>æ¯”è¾ƒç»“æœä¸ºçœŸï¼Œåˆ™è¿”å›1ï¼Œä¸ºå‡åˆ™è¿”å›0ï¼Œæ¯”è¾ƒç»“æœä¸ç¡®å®šåˆ™è¿”å›NULL</span></strong><span>ã€‚</span></p><p><span>(2)</span><strong><span>æ¯”è¾ƒè¿ç®—ç¬¦å¯ä»¥ç”¨äºæ¯”è¾ƒæ•°å­—ã€å­—ç¬¦ä¸²å’Œè¡¨è¾¾å¼ã€‚æ•°å­—ä½œä¸ºæµ®ç‚¹æ•°æ¯”è¾ƒï¼Œè€Œå­—ç¬¦ä¸²ä»¥ä¸åŒºåˆ†å¤§å°å†™çš„æ–¹å¼æ¯”è¾ƒã€‚</span></strong></p><p><mark><span>MySQLå­—ç¬¦ä¸²å››åˆ™è¿ç®—çš„æ³¨æ„ç‚¹ï¼š</span></mark></p><p><span>å¯¹MySQLä¸­çš„å­—ç¬¦ä¸²è¿›è¡Œå››åˆ™è¿ç®—çš„æ—¶å€™ï¼Œä¼šè½¬åŒ–ä¸ºç›¸åº”çš„æ•°å€¼ç±»å‹è¿›è¡Œè¿ç®—ã€‚å³ä½¿è¿ç®—ç¬¦ä¸¤ä¾§çš„å­—ç¬¦ä¸²æ²¡æœ‰æ•°å€¼ç±»å‹ï¼Œä¹Ÿèƒ½å‚ä¸è¿ç®—ã€‚è½¬åŒ–è§„åˆ™ç­‰åŒäºæ¯”è¾ƒçš„è§„åˆ™ã€‚</span></p><p><span>å­—ç¬¦ä¸²ä¸æ•°å€¼ç±»å‹çš„æ¯”è¾ƒ</span></p><ul><li><span>MySQLå­—ç¬¦ä¸²å’Œæ•°å­—æ¯”è¾ƒæ—¶ï¼Œä¼šè‡ªåŠ¨åœ°æŠŠå­—ç¬¦ä¸²ç±»å‹è½¬åŒ–ä¸ºæ•°å­—ç±»å‹ï¼Œä»é¦–å­—æ¯å¼€å§‹ï¼Œé‡åˆ°éæ•°å­—ç±»å‹ç»ˆæ­¢ã€‚</span></li><li><span>å¯¹äºæ•°å­—å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œè½¬æˆæ•°å­—åä¼šè‡ªåŠ¨ä¸¢å¼ƒåé¢çš„å­—æ¯éƒ¨åˆ†ï¼Œåªç•™ä¸‹çº¯æ•°å­—è¿›è¡Œæ¯”è¾ƒã€‚</span></li><li><span>å¯¹äºæ²¡æœ‰æ•°å­—å¼€å¤´çš„å­—ç¬¦ä¸²ä¸æ•°å€¼ç±»å‹æ¯”è¾ƒæ—¶ï¼Œåªä¼šè½¬åŒ–ä¸º0å’Œå…¶ä»–æ•°å€¼è¿›è¡Œæ¯”è¾ƒã€‚</span></li></ul><p><span>åŒç†ï¼ŒMySQLä¼šå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œæ‰€ä»¥å½“å°†å­—ç¬¦ä¸²å’Œæ•°å€¼è¿›è¡Œå››åˆ™è¿ç®—æ—¶åŸç†ï¼Œä¹Ÿæ˜¯åŒä¸Šï¼Œä¼šè¢«æˆªæ–­è½¬åŒ–ä¸ºç›¸åº”çš„æ•°å€¼ç±»å‹ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å¯¹äºå¼€å¤´éƒ¨åˆ†ä¸èƒ½æˆªå–å‡ºæ•°å­—çš„å­—ç¬¦ä¸²æ¥è¯´ï¼Œè½¬æ¢çš„ç»“æœè‡ªç„¶å°±æ˜¯0äº†ã€‚å°±åªå‰©ä¸‹0å»å’Œå…¶ä»–æ•°å€¼è¿›è¡Œæ¯”è¾ƒ</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'a'</span>=<span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'a'</span>=<span class="cm-number">0</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'aa1'</span> &lt; <span class="cm-number">2</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'aa1'</span> &lt; <span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å¯¹äºæ•°æ®å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œè½¬æˆæ•°å­—åä¼šè‡ªåŠ¨ä¸¢å¼ƒåé¢çš„å­—æ¯éƒ¨åˆ†ï¼Œåªç•™ä¸‹çº¯æ•°å­—è¿›è¡Œæ¯”è¾ƒã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'23aa'</span> &lt; <span class="cm-number">3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'23aa'</span> &lt; <span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å­—ç¬¦ä¸²ä¸æ•°å­—ç›¸åŠ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è½¬åŒ–ä¸º 0+3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'a'</span>+<span class="cm-number">3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'a'</span>+<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è½¬åŒ–ä¸º1+3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'1a'</span>+<span class="cm-number">3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'1a'</span>+<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è½¬åŒ–ä¸º2*3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'2a'</span>*<span class="cm-number">3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'2a'</span>*<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span>, <span class="cm-number">1</span> warning (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å­—ç¬¦ä¸²ç›¸åŠ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'3a'</span>+<span class="cm-string">'2b'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'3a'</span>+<span class="cm-string">'2b'</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">5</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#å¯ä»¥çœ‹åˆ°æˆªæ–­è­¦å‘Šçš„æç¤º</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">warnings</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+------+----------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Level</span> &nbsp; | <span class="cm-keyword">Code</span> | Message &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+------+----------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Warning | <span class="cm-number">1292</span> | Truncated incorrect <span class="cm-builtin">DOUBLE</span> <span class="cm-keyword">value</span>: <span class="cm-string">'2a'</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+------+----------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1495px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1495px;"></div></div></div></pre><p>&nbsp;</p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># NULLä¸å¯æ¯”è¾ƒè¿”å›NULL</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">1</span>=<span class="cm-number">0</span>,<span class="cm-number">1</span>=<span class="cm-number">1</span>,<span class="cm-atom">NULL</span>=<span class="cm-number">0</span>,<span class="cm-atom">NULL</span>=<span class="cm-atom">NULL</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+-----+--------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1</span>=<span class="cm-number">0</span> | <span class="cm-number">1</span>=<span class="cm-number">1</span> | <span class="cm-atom">NULL</span>=<span class="cm-number">0</span> | <span class="cm-atom">NULL</span>=<span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+-----+--------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-number">0</span> | &nbsp; <span class="cm-number">1</span> | &nbsp; <span class="cm-atom">NULL</span> | &nbsp; &nbsp; &nbsp;<span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+-----+--------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'ab'</span>=<span class="cm-string">'ab'</span>,<span class="cm-string">'a'</span>&lt;<span class="cm-string">'d'</span>,<span class="cm-number">1</span>&lt;=<span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+---------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'ab'</span>=<span class="cm-string">'ab'</span> | <span class="cm-string">'a'</span>&lt;<span class="cm-string">'d'</span> | <span class="cm-number">1</span>&lt;=<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+---------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+---------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­—ç¬¦ä¸²æ¯”è¾ƒä¸åŒºåˆ†å¤§å°å†™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'ab'</span>=<span class="cm-string">'AB'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'ab'</span>=<span class="cm-string">'AB'</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 506px;"></div><div class="CodeMirror-gutters" style="display: none; height: 506px;"></div></div></div></pre><p><span>(3)</span><strong><span>BETWEEN</span></strong><span>è¿ç®—ç¬¦çš„ä½¿ç”¨æ ¼å¼ä¸º </span><code>a BETWEEN min and max</code><span>ï¼ŒåŒ…æ‹¬minå’Œmaxè¾¹ç•Œå€¼ï¼›å½“æ“ä½œæ•°aã€minã€maxç±»å‹ç›¸åŒæ—¶ï¼Œæ­¤è¡¨è¾¾å¼ç­‰ä»·äº</span><code>a&gt;=min and a&lt;=max)</code><span>ï¼Œå½“æ“ä½œæ•°ç±»å‹ä¸åŒæ—¶ï¼Œæ¯”è¾ƒæ—¶ä¼šéµå¾ªç±»å‹è½¬åŒ–åŸåˆ™è¿›è¡Œè½¬åŒ–åï¼Œåœ¨è¿›è¡Œæ¯”è¾ƒè¿ç®—ã€‚</span></p><p><span>(4)</span><strong><span>IN</span></strong><span>è¿ç®—ç¬¦çš„ä½¿ç”¨æ ¼å¼ä¸º</span><code>a IN(value1,value2,...)</code></p><p><span>(5)</span><strong><span>IS NULLå’ŒIS NOT NULL</span></strong><span>åˆ¤æ–­å€¼æ˜¯å¦ä¸ºNULLæˆ–è€…ä¸ä¸ºNULL</span></p><p><span>(6)</span><strong><span>LIKE</span></strong><span>è¿ç®—ç¬¦å¸¸ç”¨æ¨¡ç³ŠæŸ¥è¯¢ï¼Œ</span><strong><span>%ä»£è¡¨0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œä¸‹åˆ’çº¿&quot;_&quot;ä»£è¡¨ä¸€ä¸ªå­—ç¬¦</span></strong><span>ï¼Œä½¿ç”¨æ ¼å¼ä¸ºâ€œa LIKE %xxx%â€</span></p><p><span>(7)</span><strong><span>REGEXP</span></strong><span>æ­£åˆ™åŒ¹é…è¿ç®—ç¬¦ï¼Œä½¿ç”¨æ ¼å¼â€œstr REGEXP str_patâ€,å½“strå­—ç¬¦ä¸²ä¸­å«æœ‰str_patç›¸åŒ¹é…çš„å­—ç¬¦ä¸²æ—¶ï¼Œè¿”å›1ï¼Œå¦åˆ™è¿”å›0.</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">10</span> <span class="cm-keyword">between</span> <span class="cm-number">10</span> <span class="cm-keyword">and</span> <span class="cm-number">20</span>,<span class="cm-number">9</span> <span class="cm-keyword">between</span> <span class="cm-number">10</span> <span class="cm-keyword">and</span> <span class="cm-number">20</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">10</span> <span class="cm-keyword">between</span> <span class="cm-number">10</span> <span class="cm-keyword">and</span> <span class="cm-number">20</span> | <span class="cm-number">9</span> <span class="cm-keyword">between</span> <span class="cm-number">10</span> <span class="cm-keyword">and</span> <span class="cm-number">20</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">0</span> <span class="cm-keyword">is</span> <span class="cm-atom">null</span>,<span class="cm-number">0</span> <span class="cm-keyword">is</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span>,<span class="cm-atom">null</span> <span class="cm-keyword">is</span> <span class="cm-atom">null</span>,<span class="cm-atom">null</span> <span class="cm-keyword">is</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+---------------+--------------+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">0</span> <span class="cm-keyword">is</span> <span class="cm-atom">null</span> | <span class="cm-number">0</span> <span class="cm-keyword">is</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> | <span class="cm-atom">null</span> <span class="cm-keyword">is</span> <span class="cm-atom">null</span> | <span class="cm-atom">null</span> <span class="cm-keyword">is</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+---------------+--------------+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+---------------+--------------+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'a'</span> <span class="cm-keyword">in</span> (<span class="cm-string">'a'</span>,<span class="cm-string">'ab'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'a'</span> <span class="cm-keyword">in</span> (<span class="cm-string">'a'</span>,<span class="cm-string">'ab'</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'abc'</span> <span class="cm-keyword">regexp</span> <span class="cm-string">'ab'</span>, <span class="cm-string">'aabbc'</span> <span class="cm-keyword">regexp</span> <span class="cm-string">'bc'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'abc'</span> <span class="cm-keyword">regexp</span> <span class="cm-string">'ab'</span> | <span class="cm-string">'aabbc'</span> <span class="cm-keyword">regexp</span> <span class="cm-string">'bc'</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 667px;"></div><div class="CodeMirror-gutters" style="display: none; height: 667px;"></div></div></div></pre><h2><a name="43-é€»è¾‘è¿ç®—ç¬¦" class="md-header-anchor"></a><span>4.3 é€»è¾‘è¿ç®—ç¬¦</span></h2><p><span>	</span><span>é€»è¾‘è¿ç®—ç¬¦åˆç§°ä¸ºå¸ƒå°”è¿ç®—ç¬¦ï¼Œç”¨æ¥ç¡®è®¤è¡¨è¾¾å¼çš„çœŸå’Œå‡ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192658.png" referrerpolicy="no-referrer"></p><p><span>(1) NOT NULLçš„è¿”å›å€¼ä¸ºNULL</span></p><p><span>(2)é€»è¾‘ä¸è¿ç®—ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œæ•°ä¸º0æ—¶ï¼Œæ‰€å¾—ç»“æœä¸º0ï¼Œæ“ä½œæ•°ä¸­æœ‰ä»»ä½•ä¸€ä¸ªä¸ºNULLåˆ™è¿”å›å€¼ä¸ºNULLã€‚</span></p><p><span>(3)é€»è¾‘æˆ–åŠŸèƒ½ä¸å†èµ˜è¿°ï¼Œé€»è¾‘å¼‚æˆ–ï¼Œæ“ä½œæ•°é€»è¾‘çœŸå‡å€¼ç›¸å¼‚ä¸º1ï¼Œç›¸åŒä¸º0</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">not</span> <span class="cm-number">0</span>, !<span class="cm-number">0</span>, <span class="cm-keyword">not</span> <span class="cm-atom">null</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">not</span> <span class="cm-number">0</span> | !<span class="cm-number">0</span> | <span class="cm-keyword">not</span> <span class="cm-atom">null</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">not</span> <span class="cm-number">0</span>, !<span class="cm-number">1</span>, <span class="cm-keyword">not</span> <span class="cm-atom">null</span>; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">not</span> <span class="cm-number">0</span> | !<span class="cm-number">1</span> | <span class="cm-keyword">not</span> <span class="cm-atom">null</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp;<span class="cm-number">0</span> | &nbsp; &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+----+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> (<span class="cm-number">1</span> <span class="cm-keyword">and</span> <span class="cm-number">2</span>),(<span class="cm-number">0</span> &amp;&amp; <span class="cm-number">5</span>),(<span class="cm-number">1</span> <span class="cm-keyword">and</span> <span class="cm-atom">NULL</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+----------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| (<span class="cm-number">1</span> <span class="cm-keyword">and</span> <span class="cm-number">2</span>) | (<span class="cm-number">0</span> &amp;&amp; <span class="cm-number">5</span>) | (<span class="cm-number">1</span> <span class="cm-keyword">and</span> <span class="cm-atom">NULL</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+----------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+----------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> (<span class="cm-number">1</span> <span class="cm-keyword">or</span> <span class="cm-number">0</span>),(<span class="cm-number">0</span> || <span class="cm-number">0</span>),(<span class="cm-atom">NULL</span> <span class="cm-keyword">or</span> <span class="cm-atom">NULL</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| (<span class="cm-number">1</span> <span class="cm-keyword">or</span> <span class="cm-number">0</span>) | (<span class="cm-number">0</span> || <span class="cm-number">0</span>) | (<span class="cm-atom">NULL</span> <span class="cm-keyword">or</span> <span class="cm-atom">NULL</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+----------+----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">1</span> <span class="cm-keyword">xor</span> <span class="cm-number">0</span>, <span class="cm-number">1</span> <span class="cm-keyword">xor</span> <span class="cm-number">1</span>,<span class="cm-atom">null</span> <span class="cm-keyword">xor</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1</span> <span class="cm-keyword">xor</span> <span class="cm-number">0</span> | <span class="cm-number">1</span> <span class="cm-keyword">xor</span> <span class="cm-number">1</span> | <span class="cm-atom">null</span> <span class="cm-keyword">xor</span> <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> | &nbsp; &nbsp; &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 782px;"></div><div class="CodeMirror-gutters" style="display: none; height: 782px;"></div></div></div></pre><h2><a name="44-ä½è¿ç®—ç¬¦" class="md-header-anchor"></a><span>4.4 ä½è¿ç®—ç¬¦</span></h2><p><span>	</span><span>ä½è¿ç®—æ˜¯å°†ç»™å®šçš„æ“ä½œæ•°è½¬åŒ–ä¸ºäºŒè¿›åˆ¶åï¼Œå¯¹å„ä¸ªæ“ä½œæ•°æ¯ä¸€ä½éƒ½è¿›è¡ŒæŒ‡å®šçš„é€»è¾‘è¿ç®—ï¼Œå¾—åˆ°çš„äºŒè¿›åˆ¶ç»“æœè½¬åŒ–ä¸ºåè¿›åˆ¶æ•°åå°±æ˜¯ä½è¿ç®—çš„ç»“æœã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192342.png" referrerpolicy="no-referrer"></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">2</span>&amp;&amp;<span class="cm-number">3</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2</span>&amp;&amp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">2</span>|<span class="cm-number">3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2</span>|<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä½ç›¸å¼‚ä¸º1ï¼Œç›¸åŒä¸º0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">2</span>^<span class="cm-number">3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2</span>^<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 1çš„å–åä¸ºä»€ä¹ˆä¼šæ˜¯è¿™ä¹ˆå¤§çš„æ•°å­—ï¼Ÿ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åœ¨MySQLä¸­ï¼Œå¸¸é‡æ•°å­—é»˜è®¤ä¼šä»¥8å­—èŠ‚æ¥è¡¨ç¤ºï¼Œ8å­—èŠ‚å°±æ˜¯64ä½ï¼Œå¸¸é‡1çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º63ä¸ª0åŠ 1ä¸ª1ï¼Œä½å–ååå°±æ˜¯63ä¸ª1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#åŠ ä¸€ä¸ª0.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ~1,~18446744073709551614;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ~1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | ~18446744073709551614 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">18446744073709551614</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> bin(<span class="cm-number">18446744073709551614</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| bin(<span class="cm-number">18446744073709551614</span>) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1111111111111111111111111111111111111111111111111111111111111110</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä½å³ç§»nä½ï¼Œç›¸å½“äºé™¤ä»¥2^n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">100</span>&gt;&gt;<span class="cm-number">3</span>,<span class="cm-number">100</span> <span class="cm-keyword">div</span> <span class="cm-number">8</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">100</span>&gt;&gt;<span class="cm-number">3</span> | <span class="cm-number">100</span> <span class="cm-keyword">div</span> <span class="cm-number">8</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">12</span> | &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">12</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-number">100</span>&lt;&lt;<span class="cm-number">3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">100</span>&lt;&lt;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp;<span class="cm-number">800</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1150px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1150px;"></div></div></div></pre><h1><a name="5-å¸¸ç”¨å‡½æ•°" class="md-header-anchor"></a><span>5. å¸¸ç”¨å‡½æ•°</span></h1><p><span>	</span><span>MySQLå¸¸ç”¨å‡½æ•°åŒ…æ‹¬å­—ç¬¦ä¸²å‡½æ•°ã€ æ•°å€¼å‡½æ•°ã€æ—¥æœŸå’Œæ—¶é—´å‡½æ•°ã€æµç¨‹å‡½æ•°ç­‰ã€‚ä¹Ÿè®¸åœ¨Javaå¼€å‘ä¸­å¹¶ä¸éœ€è¦å…¨éƒ½æŒæ¡ï¼Œä½†æ˜¯äº†è§£æ€»æ¯”æ˜¯ä¸ªæ„£å¤´é’å¼ºå§ï¼å†µä¸”å¦‚æœç»“åˆä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å‡½æ•°æ¥ç®€åŒ–sqlçš„æŸ¥è¯¢å¤„ç†ï¼Œå¾€å¾€èƒ½äº‹åŠåŠŸå€ã€‚</span></p><p><span>MySQLä¸­çš„å‡½æ•°æ ¼å¼åŸºæœ¬éƒ½æ˜¯å‡½æ•°ååŠ æ‹¬å·åŠ å½¢å‚ç»„æˆï¼Œä¸åªæ˜¯MySQLï¼Œå…¶ä»–è¯­è¨€çš„å‡½æ•°åç§°æ„æˆä¹Ÿå·®ä¸å¤šï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬åœ¨ä½¿ç”¨MySQLæ—¶ï¼Œå‡½æ•°åæ‹¬å·ä¸èƒ½çœç•¥ã€‚MySQLä¸­çš„å­—ç¬¦ä¸²å‡½æ•°ï¼Œä¸ç”¨åˆ»æ„å»è®°å¿†ï¼Œæ¯”å¦‚æ±‚å­ä¸²ï¼Œå­—ç¬¦ä¸²æ›¿æ¢ç­‰ï¼Œå‡½æ•°çš„ç¬¬ä¸€ä¸ªæ“ä½œæ•°å¿…å®šæ˜¯å­—ç¬¦ä¸²æœ¬èº«ï¼Œå…¶ä»–å‚æ•°å°±ç»“åˆå‡½æ•°çš„åŠŸèƒ½å»å¡«å†™ã€‚</span></p><h2><a name="51-å­—ç¬¦ä¸²å‡½æ•°" class="md-header-anchor"></a><span>5.1 å­—ç¬¦ä¸²å‡½æ•°</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192338.png" referrerpolicy="no-referrer"></p><p><span>(1)CONCAT(s1,s2,...sn)å‡½æ•°ï¼šæŠŠä¼ å…¥çš„å‚æ•°è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä»»ä½•å­—ç¬¦ä¸²ä¸NULLè¿æ¥çš„ç»“æœéƒ½å°†æ˜¯NULLã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> concat(<span class="cm-string">"hello"</span>,<span class="cm-string">" world!"</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| concat(<span class="cm-string">"hello"</span>,<span class="cm-string">" world!"</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hello world! &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">insert</span>(<span class="cm-string">"hello world!"</span>,<span class="cm-number">7</span>,<span class="cm-number">6</span>,<span class="cm-string">"mysql!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">insert</span>(<span class="cm-string">"hello world!"</span>,<span class="cm-number">7</span>,<span class="cm-number">6</span>,<span class="cm-string">"mysql!"</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hello mysql! &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> upper(<span class="cm-string">"hello mysql!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| upper(<span class="cm-string">"hello mysql!"</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| HELLO MYSQL! &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">left</span>(<span class="cm-string">"hello mysql!"</span>,<span class="cm-number">5</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">left</span>(<span class="cm-string">"hello mysql!"</span>,<span class="cm-number">5</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hello &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> lpad(<span class="cm-string">" mysql!"</span>,<span class="cm-number">12</span>,<span class="cm-string">"hello"</span>); &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| lpad(<span class="cm-string">" mysql!"</span>,<span class="cm-number">12</span>,<span class="cm-string">"hello"</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hello mysql! &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ltrim(<span class="cm-string">"  mysql"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ltrim(<span class="cm-string">"  mysql"</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| mysql &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">replace</span>(<span class="cm-string">"hello world!"</span>,<span class="cm-string">"world"</span>,<span class="cm-string">"mysql"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">replace</span>(<span class="cm-string">"hello world!"</span>,<span class="cm-string">"world"</span>,<span class="cm-string">"mysql"</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hello mysql! &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­—ç¬¦ä¸²çš„æ¯”è¾ƒæ˜¯æŒ‰ç…§ASCIIç å€¼è¿›è¡Œæ¯”è¾ƒçš„ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦å°±èƒ½ç¡®å®šå¤§å°ï¼Œåˆ™ä¸ä¼šåœ¨å¾€åæ¯”è¾ƒ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># strcmpå‡½æ•°ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²s1å’Œs2çš„ASCIIç å€¼çš„å¤§å°ã€‚å¦‚æœs1æ¯”s2å°ï¼Œé‚£ä¹ˆè¿”å›-1ï¼›å¦‚æœs1ä¸s2ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿”å›0ï¼›å¦‚æœs1æ¯”s2å¤§ï¼Œé‚£ä¹ˆè¿”å›1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> strcmp(<span class="cm-string">'a'</span>,<span class="cm-string">'b'</span>), strcmp(<span class="cm-string">'A'</span>,<span class="cm-string">'A'</span>),strcmp(<span class="cm-string">'C'</span>,<span class="cm-string">'b'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-----------------+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| strcmp(<span class="cm-string">'a'</span>,<span class="cm-string">'b'</span>) | strcmp(<span class="cm-string">'A'</span>,<span class="cm-string">'A'</span>) | strcmp(<span class="cm-string">'C'</span>,<span class="cm-string">'b'</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-----------------+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  -<span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-----------------+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'18'</span>&lt;<span class="cm-string">'2'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'18'</span>&lt;<span class="cm-string">'2'</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-string">'abc'</span> &gt; <span class="cm-string">'123'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string">'abc'</span> &gt; <span class="cm-string">'123'</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> substring(<span class="cm-string">"hello mysql!"</span>,<span class="cm-number">7</span>,<span class="cm-number">5</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| substring(<span class="cm-string">"hello mysql!"</span>,<span class="cm-number">7</span>,<span class="cm-number">5</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| mysql &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1748px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1748px;"></div></div></div></pre><h2><a name="52-æ•°å€¼å‡½æ•°" class="md-header-anchor"></a><span>5.2 æ•°å€¼å‡½æ•°</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192334.png" referrerpolicy="no-referrer"></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> abs(-<span class="cm-number">0.1</span>),abs(<span class="cm-number">0.1</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| abs(-<span class="cm-number">0.1</span>) | abs(<span class="cm-number">0.1</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; <span class="cm-number">0.1</span> | &nbsp; &nbsp; &nbsp;<span class="cm-number">0.1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ceil(-<span class="cm-number">0.8</span>),ceil(<span class="cm-number">0.8</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ceil(-<span class="cm-number">0.8</span>) | ceil(<span class="cm-number">0.8</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> floor(-<span class="cm-number">0.8</span>),floor(<span class="cm-number">0.8</span>); &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| floor(-<span class="cm-number">0.8</span>) | floor(<span class="cm-number">0.8</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp;  -<span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ¨¡æ•°å’Œè¢«æ¨¡æ•°ä»»ä½•ä¸€ä¸ªä¸ºNULLç»“æœéƒ½ä¸ºNULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">mod</span>(<span class="cm-number">15</span>,<span class="cm-number">10</span>),<span class="cm-keyword">mod</span>(<span class="cm-number">1</span>,<span class="cm-number">11</span>),<span class="cm-keyword">mod</span>(<span class="cm-atom">NULL</span>,<span class="cm-number">10</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-----------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">mod</span>(<span class="cm-number">15</span>,<span class="cm-number">10</span>) | <span class="cm-keyword">mod</span>(<span class="cm-number">1</span>,<span class="cm-number">11</span>) | <span class="cm-keyword">mod</span>(<span class="cm-atom">NULL</span>,<span class="cm-number">10</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-----------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> | &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+-----------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># randå‡½æ•°è¿”å›0-1å†…çš„éšæœºå€¼ï¼Œè¾¹ç•Œå€¼å–ä¸åˆ°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> RAND();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| RAND() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">0.5434079063529222</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># äº§ç”Ÿ0-100ä»¥å†…çš„éšæœºæ•´æ•°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ceil(<span class="cm-number">100</span>*rand());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ceil(<span class="cm-number">100</span>*rand()) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">52</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#roundè¿”å›å‚æ•°xçš„å››èˆäº”å…¥çš„æœ‰yä½å°æ•°çš„å€¼ï¼Œtruncateä¸ä¼šå››èˆäº”å…¥ï¼Œä»…ä»…æˆªæ–­yä½å°æ•°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> round(<span class="cm-number">5.125</span>,<span class="cm-number">2</span>),<span class="cm-keyword">truncate</span>(<span class="cm-number">5.125</span>,<span class="cm-number">2</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+-------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| round(<span class="cm-number">5.125</span>,<span class="cm-number">2</span>) | <span class="cm-keyword">truncate</span>(<span class="cm-number">5.125</span>,<span class="cm-number">2</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+-------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">5.13</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">5.12</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+-------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1150px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1150px;"></div></div></div></pre><h2><a name="53-æ—¥æœŸå’Œæ—¶é—´å‡½æ•°" class="md-header-anchor"></a><span>5.3 æ—¥æœŸå’Œæ—¶é—´å‡½æ•°</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192330.png" referrerpolicy="no-referrer"></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#CURDATE():è¿”å›å½“å‰æ—¥æœŸï¼ŒåªåŒ…å«å¹´æœˆæ—¥</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> CURDATE();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| CURDATE()  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">20</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#CUETIME():è¿”å›å½“å‰æ—¶é—´ï¼ŒåªåŒ…å«æ—¶åˆ†ç§’</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> CURTIME();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| CURTIME() |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">15</span>:16:52  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#NOW():è¿”å›å½“å‰çš„æ—¶é—´ï¼Œå¹´æœˆæ—¥æ—¶åˆ†ç§’</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> NOW();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| NOW() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">20</span> <span class="cm-number">15</span>:17:03 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#UNIX_TIMESTAMP(date):è¿”å›æ—¥æœŸdateçš„UNIXæ—¶é—´æˆ³ å¯é€šè¿‡è¯¥å‡½æ•°è¿›è¡Œæ—¥æœŸç±»å‹çš„æ¯”è¾ƒ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#FROM_UNIXTIME(unixtime):è¿”å›UNIXTIMEæ—¶é—´æˆ³çš„æ—¥æœŸå€¼ï¼Œå’ŒUNIXTIMESTAMP(date)äº’ä¸ºé€†æ“ä½œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> UNIX_TIMESTAMP(now());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| UNIX_TIMESTAMP(now()) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1595229496</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> FROM_UNIXTIME(<span class="cm-number">1595229496</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| FROM_UNIXTIME(<span class="cm-number">1595229496</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">20</span> <span class="cm-number">15</span>:18:16 &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#WEEK(date)å’ŒYEAR(date)å‡½æ•°ï¼šå‰è€…è¿”å›æ‰€ç»™çš„æ—¥æœŸæ˜¯ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨ï¼Œåè€…è¿”å›æ‰€ç»™çš„æ—¥æœŸæ˜¯å“ªä¸€å¹´</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> WEEK(CURDATE()),<span class="cm-builtin">YEAR</span>(CURDATE());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| WEEK(CURDATE()) | <span class="cm-builtin">YEAR</span>(CURDATE()) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">29</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2020</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#HOUR(time)å’ŒMINUTE(time)å‡½æ•°ï¼šå‰è€…è¿”å›æ‰€ç»™æ—¶é—´çš„å°æ—¶ï¼Œåè€…è¿”å›æ‰€ç»™æ—¶é—´çš„åˆ†é’Ÿã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> HOUR(CURTIME()),MINUTE(CURTIME());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| HOUR(CURTIME()) | MINUTE(CURTIME()) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">15</span> | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">27</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------+-------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#MONTHNAME(date):è¿”å›dateçš„è‹±æ–‡æœˆä»½åç§°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> MONTHNAME(CURDATE());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| MONTHNAME(CURDATE()) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| July &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ã€äº†è§£ã€‘</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#DATE_FORMAT(date,fmt):æŒ‰å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¥æœŸå€¼ï¼ŒMySQLä¸­çš„æ—¥æœŸæ—¶é—´æ ¼å¼å¦‚è¡¨5-4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#DATE_ADD(date,INTERVAL expr type)ï¼šè¿”å›ä¸æ‰€ç»™æ—¥æœŸdateç›¸å·®INTERVALæ—¶é—´æ®µçš„æ—¥æœŸã€‚INTERVALæ˜¯é—´éš”ç±»å‹å…³é”®å­—ï¼Œexpræ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œtypeè¡¨ç¤ºé—´éš”ç±»å‹ï¼Œtypeé—´éš”ç±»å‹å¦‚è¡¨5-5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#DATEDIFF(date1,date2):ç”¨æ¥è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´ç›¸å·®çš„å¤©æ•°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> DATE_FORMAT(NOW(),<span class="cm-string">"%Y %M %D"</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| DATE_FORMAT(NOW(),<span class="cm-string">"%Y %M %D"</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span> July <span class="cm-number">20</span>th &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; &nbsp;<span class="cm-keyword">select</span> now() <span class="cm-keyword">current</span>,date_add(now(),<span class="cm-keyword">INTERVAL</span> <span class="cm-number">31</span> day) after31days,date_add(now(),<span class="cm-keyword">INTERVAL</span> <span class="cm-string">'1_2'</span> <span class="cm-keyword">year_month</span>) after_oneyear_twomonth;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">current</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | after31days &nbsp; &nbsp; &nbsp; &nbsp; | after_oneyear_twomonth |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">20</span> <span class="cm-number">15</span>:41:56 | <span class="cm-number">2020</span>-<span class="cm-number">08</span>-<span class="cm-number">20</span> <span class="cm-number">15</span>:41:56 | <span class="cm-number">2021</span>-<span class="cm-number">09</span>-<span class="cm-number">20</span> <span class="cm-number">15</span>:41:56 &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¯ä»¥ç”¨è´Ÿæ•°è®©å®ƒè¿”å›ä¹‹å‰çš„æŸä¸ªæ—¥æœŸæ—¶é—´</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; &nbsp;<span class="cm-keyword">select</span> now() <span class="cm-keyword">current</span>,date_add(now(),<span class="cm-keyword">INTERVAL</span> -<span class="cm-number">31</span> day) before31days,date_add(now(),<span class="cm-keyword">INTERVAL</span> <span class="cm-string">'-1_-2'</span> <span class="cm-keyword">year_month</span>) before_oneyear_twomonth;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+-------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">current</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | before31days &nbsp; &nbsp; &nbsp;  | before_oneyear_twomonth |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+-------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">20</span> <span class="cm-number">15</span>:42:04 | <span class="cm-number">2020</span>-<span class="cm-number">06</span>-<span class="cm-number">19</span> <span class="cm-number">15</span>:42:04 | <span class="cm-number">2019</span>-<span class="cm-number">05</span>-<span class="cm-number">20</span> <span class="cm-number">15</span>:42:04 &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------+---------------------+-------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è·ç¦»æ–°å¹´è¿˜æœ‰å¤šå°‘å¤© å¸Œæœ›å†æ¬¡çœ‹åˆ°çš„è¯ï¼ŒåŠªåŠ›æ²¡æœ‰ç™½è´¹ï¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> DATEDIFF(<span class="cm-string">'2021-01-01'</span>,CURDATE()); &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| DATEDIFF(<span class="cm-string">'2021-01-01'</span>,CURDATE()) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">165</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2139px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2139px;"></div></div></div></pre><blockquote><p><span>ä»€ä¹ˆæ˜¯æ—¶é—´æˆ³ï¼Ÿ</span></p><p><span>æ—¶é—´æˆ³æ˜¯æŒ‡æ ¼æ—å¨æ²»æ—¶é—´1970å¹´01æœˆ01æ—¥00æ—¶00åˆ†00ç§’(åŒ—äº¬duæ—¶é—´1970å¹´01æœˆ01æ—¥08æ—¶00åˆ†00ç§’)èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ã€‚é€šä¿—çš„è®²ï¼Œ æ—¶é—´æˆ³æ˜¯ä¸€ä»½èƒ½å¤Ÿè¡¨ç¤ºä¸€ä»½æ•°æ®åœ¨ä¸€ä¸ªç‰¹å®šæ—¶é—´ç‚¹å·²ç»å­˜åœ¨çš„å®Œæ•´çš„å¯éªŒè¯çš„æ•°æ®ã€‚</span></p></blockquote><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192324.png" referrerpolicy="no-referrer"></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192320.png" referrerpolicy="no-referrer"></p><h2><a name="54-æµç¨‹å‡½æ•°" class="md-header-anchor"></a><span>5.4 æµç¨‹å‡½æ•°</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192320.png" referrerpolicy="no-referrer"></p><p><span>ä¸‹é¢ä»¥æ¨¡æ‹Ÿå¯¹èŒå‘˜è–ªæ°´è¿›è¡Œåˆ†ç±»ä¸ºä¾‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> salary(userid <span class="cm-builtin">int</span>,salary <span class="cm-builtin">decimal</span>(<span class="cm-number">9</span>,<span class="cm-number">2</span>));</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> salary <span class="cm-keyword">values</span>(<span class="cm-number">1</span>,<span class="cm-number">100</span>),(<span class="cm-number">2</span>,<span class="cm-number">2000</span>),(<span class="cm-number">3</span>,<span class="cm-number">3000</span>),(<span class="cm-number">4</span>,<span class="cm-number">4000</span>),(<span class="cm-number">5</span>,<span class="cm-number">5000</span>),(<span class="cm-number">1</span>,<span class="cm-atom">NULL</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> salary;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| userid | salary  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | <span class="cm-number">1000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> | <span class="cm-number">2000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> | <span class="cm-number">3000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> | <span class="cm-number">4000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> | <span class="cm-number">5000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | &nbsp; &nbsp;<span class="cm-atom">NULL</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æœˆè–ªåœ¨2000å…ƒä»¥ä¸Šçš„èŒå‘˜ç”¨â€œhighâ€è¡¨ç¤º</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">if</span>(salary&gt;<span class="cm-number">2000</span>,<span class="cm-string">'high'</span>,<span class="cm-string">'low'</span>) <span class="cm-keyword">from</span> salary;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">if</span>(salary&gt;<span class="cm-number">2000</span>,<span class="cm-string">'high'</span>,<span class="cm-string">'low'</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| low &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| low &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| low &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># NULLå€¼ä¸èƒ½å‚ä¸æ•°å€¼è¿ç®—ï¼Œä¸‹é¢å°†NULLå€¼æ›¿æ¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> ifnull(salary,<span class="cm-number">0</span>) <span class="cm-keyword">from</span> salary;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ifnull(salary,<span class="cm-number">0</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">5000.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.00</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">case</span> <span class="cm-keyword">when</span> salary&lt;=<span class="cm-number">2000</span> <span class="cm-keyword">then</span> <span class="cm-string">'low'</span> <span class="cm-keyword">else</span> <span class="cm-string">'high'</span> <span class="cm-keyword">end</span> <span class="cm-keyword">from</span> salary;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">case</span> <span class="cm-keyword">when</span> salary&lt;=<span class="cm-number">2000</span> <span class="cm-keyword">then</span> <span class="cm-string">'low'</span> <span class="cm-keyword">else</span> <span class="cm-string">'high'</span> <span class="cm-keyword">end</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| low &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| low &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¤šä¸ªwhen...thenè”åˆä½¿ç”¨</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">case</span> salary <span class="cm-keyword">when</span> <span class="cm-number">1000</span> <span class="cm-keyword">then</span> <span class="cm-string">'low'</span> <span class="cm-keyword">when</span> <span class="cm-number">2000</span> <span class="cm-keyword">then</span> <span class="cm-string">'mid'</span> <span class="cm-keyword">else</span> <span class="cm-string">'high'</span> <span class="cm-keyword">end</span> <span class="cm-keyword">from</span> salary;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">case</span> salary <span class="cm-keyword">when</span> <span class="cm-number">1000</span> <span class="cm-keyword">then</span> <span class="cm-string">'low'</span> <span class="cm-keyword">when</span> <span class="cm-number">2000</span> <span class="cm-keyword">then</span> <span class="cm-string">'mid'</span> <span class="cm-keyword">else</span> <span class="cm-string">'high'</span> <span class="cm-keyword">end</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------------------------------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| low &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| mid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| high &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------------------------------------------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1495px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1495px;"></div></div></div></pre><h2><a name="55-å…¶ä»–å¸¸ç”¨å‡½æ•°" class="md-header-anchor"></a><span>5.5 å…¶ä»–å¸¸ç”¨å‡½æ•°</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192316.png" referrerpolicy="no-referrer"></p><p><span>ç¤ºä¾‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹å½“å‰æ“ä½œæ•°æ®åº“</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">database</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">database</span>() |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| test &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹mysqlç‰ˆæœ¬</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> version();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| version() |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">5.7.26</span> &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹å½“å‰ç”¨æˆ·</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> <span class="cm-keyword">user</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">user</span>() &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| root<span class="cm-variable-2">@localhost</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#INET_ATON(IP):è¿”å›IPåœ°å€çš„ç½‘ç»œå­—èŠ‚åºè¡¨ç¤º</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> inet_aton(<span class="cm-string">'192.168.8.1'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| inet_aton(<span class="cm-string">'192.168.8.1'</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3232237569</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#INET_NTOA(num):è¿”å›ç½‘ç»œå­—èŠ‚åºä»£è¡¨çš„IPåœ°å€</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> inet_ntoa(<span class="cm-number">3232237569</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| inet_ntoa(<span class="cm-number">3232237569</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.8.1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 805px;"></div><div class="CodeMirror-gutters" style="display: none; height: 805px;"></div></div></div></pre><p><span>INET_ATON(IP)å’ŒINET_NTOA(num)å‡½æ•°çš„ä¸»è¦ç”¨é€”æ˜¯å°†å­—ç¬¦ä¸²çš„IPåœ°å€è½¬æ¢ä¸ºæ•°å­—è¡¨ç¤ºçš„ç½‘ç»œå­—èŠ‚åºï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œ</span><strong><span>IPæˆ–è€…ç½‘æ®µçš„æ¯”è¾ƒ</span></strong><span>ã€‚æ¯”å¦‚åœ¨ä¸‹é¢çš„è¡¨tä¸­ï¼Œè¦æƒ³çŸ¥é“åœ¨192.168.1.3-192.168.1.20 ä¸€å…±æœ‰å¤šå°‘ä¸ªIPåœ°å€ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ip &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.1</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.3</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.6</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.10</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.20</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.30</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ­£å¸¸æ€ç»´æ¥æƒ³çš„è¯ï¼Œè‚¯å®šæ˜¯å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œä½†æ˜¯ä¸å‡ºä¹æ„æ–™ï¼Œç»“æœä¸ºç©ºã€‚å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦æ¯”è¾ƒçš„ï¼Œå½“å¯¹åº”å­—ç¬¦ç›¸åŒæ—¶å€™ï¼Œæ¯”è¾ƒä¸‹ä¸€ä¸ªï¼ŒçŸ¥é“é‡åˆ°èƒ½åŒºåˆ†å¤§å°çš„å­—ç¬¦ï¼Œå°±åœæ­¢æ¯”è¾ƒï¼Œåé¢çš„å­—ç¬¦ä¹Ÿå°†å¿½ç•¥ã€‚å› ä¸ºå­—ç¬¦"3"æ¯”â€œ2â€å¤§ï¼Œè€Œä¸èƒ½ç”¨æˆ‘ä»¬æ—¥å¸¸çš„æ€ç»´3&lt;20ï¼Œæ‰€ä»¥æ¯”â€œ3â€å¤§æ¯”â€œ2â€å°çš„ç»“æœä¸ºç©ºã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t <span class="cm-keyword">where</span> ip&gt;=<span class="cm-string">'192.168.1.3'</span> <span class="cm-keyword">and</span> ip&lt;=<span class="cm-string">'192.168.1.20'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è¦æƒ³å®ç°ä¸Šé¢çš„åŠŸèƒ½ï¼Œå°±å¯ç”¨INET_ATONå‡½æ•°å°†IPè½¬åŒ–ä¸ºå­—èŠ‚åºååœ¨æ¯”è¾ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t <span class="cm-keyword">where</span> inet_aton(ip)&gt;=inet_aton(<span class="cm-string">'192.168.1.3'</span>)&amp;&amp;inet_aton(ip)&lt;=inet_aton(<span class="cm-string">'192.168.1.20'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| ip &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.3</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.6</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.10</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">192.168.1.20</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 644px;"></div><div class="CodeMirror-gutters" style="display: none; height: 644px;"></div></div></div></pre><h1><a name="6-å›¾å½¢åŒ–å·¥å…·çš„ä½¿ç”¨" class="md-header-anchor"></a><span>6. å›¾å½¢åŒ–å·¥å…·çš„ä½¿ç”¨</span></h1><p><span>åŸä¹¦ä¸­ä»‹ç»çš„å·¥å…·éƒ½æ¯”è¾ƒè€äº†ï¼Œè¿™ä¸€éƒ¨åˆ†è‡ªè¡Œé˜…è¯»å§ï¼</span></p><h1><a name="ç¬¬äºŒéƒ¨åˆ†-å¼€å‘ç¯‡" class="md-header-anchor"></a><span>ç¬¬äºŒéƒ¨åˆ† å¼€å‘ç¯‡</span></h1><h1><a name="7-è¡¨ç±»å‹å­˜å‚¨å¼•æ“çš„é€‰æ‹©" class="md-header-anchor"></a><span>7. è¡¨ç±»å‹(å­˜å‚¨å¼•æ“)çš„é€‰æ‹©</span></h1><p><span>MySQLä¸­å­˜å‚¨å¼•æ“é’ˆçš„æ¦‚å¿µï¼Œ</span><strong><span>é’ˆå¯¹ä¸åŒçš„å­˜å‚¨éœ€æ±‚é€‰æ‹©æœ€ä¼˜çš„å­˜å‚¨å¼•æ“</span></strong><span>ã€‚æé«˜æ•°æ®çš„å­˜å–è¯»å–æ•ˆç‡ã€‚</span></p><h2><a name="71-mysqlå­˜å‚¨å¼•æ“æ¦‚è¿°" class="md-header-anchor"></a><span>7.1 MySQLå­˜å‚¨å¼•æ“æ¦‚è¿°</span></h2><p><span>MySQLæ”¯æŒçš„å­˜å‚¨å¼•æ“åŒ…æ‹¬MyISAMã€InnoDBã€MEMORYã€MERGEã€BDBç­‰(å‰ä¸¤ç§å¸¸ç”¨ï¼Œåä¸¤ç§äº†è§£å³å¯)ã€‚</span><strong><span>å…¶ä¸­InnoDBå’ŒBDBæäº‹åŠ¡å®‰å…¨è¡¨ï¼Œå…¶ä»–å­˜å‚¨å¼•æ“éƒ½æ˜¯éäº‹åŠ¡å®‰å…¨è¡¨</span></strong><span>ã€‚</span></p><p><span>MySQLv5.1ä¹‹åé»˜è®¤çš„å­˜å‚¨å¼•æ“ä¸ºInnoDBï¼Œä¹‹å‰æ˜¯MyISAMã€‚</span></p><p><span>1Â· æŸ¥çœ‹mysqlæ”¯æŒå“ªäº›å¼•æ“ï¼š</span><code>show engines \G;</code></p><p><span>engine:å¼•æ“åç§°;support:æ˜¾ç¤ºæ˜¯å¦æ”¯æŒï¼Œdefaultæ˜¾ç¤ºå½“å‰é»˜è®¤å­˜å‚¨å¼•æ“;comment:ç®€å•æè¿°;transactions:æ˜¯å¦æ”¯æŒäº‹åŠ¡</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192312.png" referrerpolicy="no-referrer"></p><p><span>2Â· ä¿®æ”¹é»˜è®¤å­˜å‚¨å¼•æ“ï¼š </span><code>set default_storage_engine=innodb;</code></p><p><span>ä¿®æ”¹ååªæ˜¯æœ¬æ¬¡ä¼šè¯æœ‰æ•ˆï¼Œå…¶ä»–ä¼šè¯æ— æ•ˆï¼Œå¯é€šè¿‡</span><code>global</code><span>é€‰é¡¹è®¾ç½®å…¨å±€ä¼šè¯æœ‰æ•ˆï¼Œæ— è®ºæœ¬æ¬¡ä¼šè¯è¿˜æ˜¯å…¨å±€ä¼šè¯éƒ½æœ‰æ•ˆï¼Œä½†æ˜¯é‡å¯åéƒ½ä¼šå¤±æ•ˆã€‚</span></p><p><span>3Â· åˆ›å»ºæ–°è¡¨çš„æ—¶å€™ï¼Œé€šè¿‡å¢åŠ </span><code>engine</code><span>å…³é”®å­—åˆ™è®¾ç½®æ–°è¡¨çš„å­˜å‚¨å¼•æ“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨</span><code>alter table tb_name engine=innodb</code><span>ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; id <span class="cm-builtin">int</span>(<span class="cm-number">10</span>) <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span>(id)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; )<span class="cm-keyword">ENGINE</span>=MyISAM <span class="cm-keyword">DEFAULT</span> <span class="cm-string-2">CHARSET</span>=UTF8;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Table</span> | <span class="cm-keyword">Create</span> <span class="cm-keyword">Table</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| t &nbsp; &nbsp; | <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> <span class="cm-variable-2">`t`</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">`id`</span> <span class="cm-builtin">int</span>(<span class="cm-number">10</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">AUTO_INCREMENT</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span> (<span class="cm-variable-2">`id`</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">) <span class="cm-keyword">ENGINE</span>=MyISAM <span class="cm-keyword">DEFAULT</span> <span class="cm-string-2">CHARSET</span>=utf8 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t <span class="cm-keyword">engine</span>=<span class="cm-keyword">InnoDB</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Table</span> | <span class="cm-keyword">Create</span> <span class="cm-keyword">Table</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| t &nbsp; &nbsp; | <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> <span class="cm-variable-2">`t`</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">`id`</span> <span class="cm-builtin">int</span>(<span class="cm-number">10</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">AUTO_INCREMENT</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span> (<span class="cm-variable-2">`id`</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">) <span class="cm-keyword">ENGINE</span>=<span class="cm-keyword">InnoDB</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-string-2">CHARSET</span>=utf8 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------------------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 667px;"></div><div class="CodeMirror-gutters" style="display: none; height: 667px;"></div></div></div></pre><h2><a name="72-å„ç§å­˜å‚¨å¼•æ“çš„ç‰¹æ€§" class="md-header-anchor"></a><span>7.2 å„ç§å­˜å‚¨å¼•æ“çš„ç‰¹æ€§</span></h2><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192308.png" referrerpolicy="no-referrer"></p><h3><a name="721-myisam" class="md-header-anchor"></a><span>7.2.1 MyISAM</span></h3><p><span>	</span><span>MySQL5.1ä¹‹å‰çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚</span><strong><span>ä¸æ”¯æŒäº‹åŠ¡ã€è¡¨çº§é”ã€ä¸æ”¯æŒå¤–é”®ï¼Œä¼˜ç‚¹æ˜¯è®¿é—®é€Ÿåº¦å¿«</span></strong><span>ã€‚</span><strong><span>å¯¹äº‹åŠ¡å®Œæ•´æ€§æ²¡æœ‰è¦æ±‚æˆ–è€…ä»¥SELECTã€INSERTä¸ºä¸»çš„åº”ç”¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¼•æ“æ¥åˆ›å»ºè¡¨</span></strong><span>ã€‚</span></p><p><span>1Â· æ¯ä¸ªMyISAMåœ¨ç£ç›˜ä¸Šå­˜å‚¨æˆ3ä¸ªæ–‡ä»¶ï¼Œå…¶æ–‡ä»¶åå’Œè¡¨åç›¸åŒï¼Œä½†æ‰©å±•ååˆ†åˆ«æ˜¯ï¼š</span></p><ul><li><span>.frmï¼ˆå­˜å‚¨è¡¨å®šä¹‰ï¼‰</span></li><li><span>.MYDï¼ˆMYDataï¼Œå­˜å‚¨æ•°æ®ï¼‰</span></li><li><span>.MYI (MYIndexï¼Œå­˜å‚¨ç´¢å¼•)</span></li></ul><p><span>æ•°æ®æ–‡ä»¶å’Œç´¢å¼•æ–‡ä»¶å¯ä»¥æ”¾ç½®åœ¨ä¸åŒçš„ç›®å½•ï¼Œ</span><strong><span>å¹³å‡åˆ†å¸ƒIOï¼Œè·å¾—æ›´å¿«çš„é€Ÿåº¦</span></strong><span>ã€‚</span></p><p><mark><span>2æœ‰è¯¯</span></mark></p><p><del><span>2Â· MyISAMçš„è¡¨æ”¯æŒ3ç§ä¸åŒçš„å­˜å‚¨æ ¼å¼ï¼Œåˆ†åˆ«æ˜¯</span></del></p><ul><li><p><del><span>é™æ€ï¼ˆå›ºå®šé•¿åº¦ï¼‰è¡¨</span></del></p><p><span>é»˜è®¤çš„å­˜å‚¨æ ¼å¼ï¼Œè¡¨ä¸­å­—æ®µéƒ½æ˜¯å›ºå®šé•¿åº¦ï¼Œå¦‚æœåˆ—ä¸æ»¡è¶³å®šä¹‰çš„åˆ—å®½åˆ™ç©ºæ ¼å¡«å……ã€‚</span></p><p><span>ä¼˜ç‚¹ï¼šè®¿é—®é€Ÿåº¦å¿«</span></p><p><span>ç¼ºç‚¹ï¼šå ç”¨ç©ºé—´</span></p></li><li><p><del><span>åŠ¨æ€è¡¨</span></del></p><p><span>å­˜å‚¨çš„å­—æ®µå˜é•¿</span></p><p><span>ä¼˜ç‚¹ï¼šå ç”¨ç©ºé—´å°‘ã€‚</span></p><p><span>ç¼ºç‚¹ï¼šå®¹æ˜“äº§ç”Ÿç¢ç‰‡ã€‚</span></p></li><li><p><del><span>å‹ç¼©è¡¨</span></del></p></li></ul><p><span>mysqlå¹¶æ²¡æœ‰ä»€ä¹ˆé™æ€ã€åŠ¨æ€ã€å‹ç¼©è¡¨ï¼Œä½†æ˜¯æœ‰é™æ€åŠ¨æ€å‹ç¼©è¡Œï¼Œé™æ€å’ŒåŠ¨æ€æ˜¯é’ˆå¯¹å…·ä½“è¡Œä¸­å®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œå½“ä¿å­˜å…·ä½“çš„æ•°æ®æ—¶æ‰€å‘ˆç°çš„ç»“æœæ˜¯ä»€ä¹ˆæ ·çš„ã€‚è¯¦æƒ…å‚è€ƒ</span></p><p><a href='https://dev.mysql.com/doc/refman/5.7/en/innodb-row-format.html' target='_blank' class='url'>https://dev.mysql.com/doc/refman/5.7/en/innodb-row-format.html</a></p><p><strong><span>varcharç±»å‹çš„å¯¹æœ«å°¾ç©ºæ ¼ä¸åšå¤„ç†ï¼Œcharç±»å‹çš„å­—æ®µä¼šå»æ‰æœ«å°¾ç©ºæ ¼</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># varcharç±»å‹çš„å¯¹æœ«å°¾ç©ºæ ¼ä¸åšå¤„ç†ï¼Œcharç±»å‹çš„å­—æ®µä¼šå»æ‰æœ«å°¾ç©ºæ ¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(<span class="cm-number">1</span>,<span class="cm-string">'abc'</span>),(<span class="cm-number">3</span>,<span class="cm-string">'abc  '</span>),(<span class="cm-number">4</span>,<span class="cm-string">' &nbsp; abc'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> name,length(name) <span class="cm-keyword">from</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| name &nbsp; | length(name) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| abc &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| abc &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;  abc | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Table</span> | <span class="cm-keyword">Create</span> <span class="cm-keyword">Table</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+---+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| t &nbsp; &nbsp; | <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> <span class="cm-variable-2">`t`</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">`id`</span> <span class="cm-builtin">int</span>(<span class="cm-number">10</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">AUTO_INCREMENT</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">`name`</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>) <span class="cm-keyword">DEFAULT</span> <span class="cm-atom">NULL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span> (<span class="cm-variable-2">`id`</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">) <span class="cm-keyword">ENGINE</span>=MyISAM <span class="cm-keyword">AUTO_INCREMENT</span>=<span class="cm-number">5</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-string-2">CHARSET</span>=utf8 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t <span class="cm-keyword">modify</span> name <span class="cm-builtin">char</span>(<span class="cm-number">10</span>); &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> name,length(name) <span class="cm-keyword">from</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| name &nbsp; | length(name) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| abc &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| abc &nbsp;  | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp;  abc | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------+--------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ’å…¥è®°å½•åé¢çš„ç©ºæ ¼éƒ½è¢«å»æ‰äº†ï¼Œå‰é¢çš„ç©ºæ ¼ä¿ç•™ã€‚</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 805px;"></div><div class="CodeMirror-gutters" style="display: none; height: 805px;"></div></div></div></pre><h3><a name="722-innodb" class="md-header-anchor"></a><span>7.2.2 InnoDB</span></h3><p><span>	</span><span>MySQL5.1ä¹‹åé»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼ŒInnoDB å­˜å‚¨å¼•æ“æä¾›äº†å…·æœ‰</span><strong><span>æäº¤ã€å›æ»šå’Œå´©æºƒæ¢å¤èƒ½åŠ›çš„äº‹åŠ¡å®‰å…¨ï¼Œæ”¯æŒå¤–é”®</span></strong><span>ã€‚ä½†æ˜¯å¯¹æ¯” MyISAMçš„å­˜å‚¨å¼•æ“ï¼ŒInnoDB </span><strong><span>å†™çš„å¤„ç†æ•ˆç‡å·®ä¸€äº›</span></strong><span>å¹¶ä¸”ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´ä»¥ä¿ç•™æ•°æ®å’Œç´¢å¼•ã€‚</span></p><p><span>åº”ç”¨åœºæ™¯ï¼šå¦‚æœåº”ç”¨å¯¹äº‹åŠ¡çš„</span><strong><span>å®Œæ•´æ€§</span></strong><span>æœ‰æ¯”è¾ƒé«˜å¤§è¦æ±‚ï¼Œè¦æ±‚åœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„</span><strong><span>ä¸€è‡´æ€§</span></strong><span>ï¼Œï¼Œæ•°æ®æ“ä½œé™¤äº†æ’å…¥å’ŒæŸ¥è¯¢ä»¥å¤–ï¼Œè¿˜åŒ…æ‹¬å¾ˆå¤šçš„æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œé‚£ä¹ˆ InnoDB å­˜å‚¨å¼•æ“åº”è¯¥æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ã€‚</span></p><p><strong><span>1. è‡ªåŠ¨å¢é•¿åˆ—</span></strong></p><ul><li><span>InnoDB è¡¨çš„è‡ªåŠ¨å¢é•¿åˆ—å¯ä»¥æ‰‹å·¥æ’å…¥ï¼Œä½†æ˜¯æ’å…¥çš„å€¼å¦‚æœæ˜¯ç©ºæˆ–è€… 0ï¼Œåˆ™å®é™…æ’å…¥çš„å°†æ˜¯è‡ªåŠ¨å¢é•¿åçš„å€¼ã€‚</span></li><li><span>å¯¹äº InnoDB è¡¨ï¼Œ</span><strong><span>è‡ªåŠ¨å¢é•¿åˆ—å¿…é¡»æ˜¯ç´¢å¼•</span></strong><span>ã€‚å¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œä¹Ÿå¿…é¡»æ˜¯ç»„åˆç´¢å¼•çš„ç¬¬ä¸€åˆ—ï¼Œä½†æ˜¯å¯¹äº MyISAM è¡¨ï¼Œè‡ªåŠ¨å¢é•¿åˆ—å¯ä»¥æ˜¯ç»„åˆç´¢å¼•çš„å…¶ä»–åˆ—ï¼Œè¿™æ ·æ’å…¥è®°å½•åï¼Œè‡ªåŠ¨å¢é•¿åˆ—æ˜¯æŒ‰ç…§ç»„åˆç´¢å¼•çš„å‰é¢å‡ åˆ—è¿›è¡Œæ’åºåé€’å¢çš„ã€‚</span></li><li><span>å¯ä»¥é€šè¿‡</span><strong><span>alter table tb_name auto_increment = n;</span></strong><span>è®¾ç½®è‡ªåŠ¨å¢é•¿åˆ—çš„åˆå§‹å€¼ã€‚åªé€‚ç”¨äºæœ¬æ¬¡å›è¯ï¼ˆé‡å¯å¤±æ•ˆï¼‰ã€‚å¯ä»¥ä½¿ç”¨</span><strong><span>LAST_INSERT_ID()</span></strong><span>æŸ¥è¯¢å½“å‰çº¿ç¨‹æœ€åæ’å…¥è®°å½•ä½¿ç”¨çš„å€¼ã€‚</span></li></ul><p><span>ç¤ºä¾‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> autoincre_demo (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; i <span class="cm-keyword">smallint</span> <span class="cm-keyword">not</span> <span class="cm-atom">null</span> <span class="cm-keyword">auto_increment</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; name <span class="cm-builtin">varchar</span>(<span class="cm-number">10</span>),<span class="cm-keyword">primary</span> <span class="cm-keyword">key</span>(i));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> autoincre_demo <span class="cm-keyword">values</span>(<span class="cm-number">1</span>,<span class="cm-string">'1'</span>),(<span class="cm-number">0</span>,<span class="cm-string">'2'</span>),(<span class="cm-atom">null</span>,<span class="cm-string">'3'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> autoincre_demo;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| i | name |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1</span> | <span class="cm-number">1</span> &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2</span> | <span class="cm-number">2</span> &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">3</span> | <span class="cm-number">3</span> &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---+------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 322px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><p><strong><span>2. å¤–é”®çº¦æŸ</span></strong></p><p><strong><span>MySQL æ”¯æŒå¤–é”®çš„å­˜å‚¨å¼•æ“åªæœ‰ InnoDBï¼Œåœ¨åˆ›å»ºå¤–é”®çš„æ—¶å€™ï¼Œè¦æ±‚çˆ¶è¡¨å¿…é¡»æœ‰å¯¹åº”çš„ç´¢å¼•ï¼Œå­è¡¨åœ¨åˆ›å»ºå¤–é”®çš„æ—¶å€™ä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„ç´¢å¼•ã€‚</span></strong></p><p><span> å¤–é”®çš„ä½¿ç”¨éœ€è¦æ»¡è¶³ä¸‹åˆ—çš„æ¡ä»¶ï¼š</span></p><ol start='' ><li><span>ä¸¤å¼ è¡¨å¿…é¡»éƒ½æ˜¯InnoDBè¡¨ï¼Œå¹¶ä¸”å®ƒä»¬æ²¡æœ‰ä¸´æ—¶è¡¨ã€‚</span></li><li><span>å»ºç«‹å¤–é”®å…³ç³»çš„å¯¹åº”åˆ—å¿…é¡»å…·æœ‰ç›¸ä¼¼çš„InnoDBå†…éƒ¨æ•°æ®ç±»å‹ã€‚</span></li><li><span>å»ºç«‹å¤–é”®å…³ç³»çš„å¯¹åº”åˆ—å¿…é¡»å»ºç«‹äº†ç´¢å¼•ã€‚</span></li></ol><p><span>(1)åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šåœ¨åˆ é™¤ã€æ›´æ–°çˆ¶è¡¨æ—¶ï¼Œå¯¹å­è¡¨è¿›è¡Œçš„ç›¸åº”æ“ä½œï¼ŒåŒ… RESTRICTã€CASCADEã€SET NULL å’Œ NO ACTIONã€‚</span><strong><span>å…¶ä¸­ RESTRICT å’Œ NO ACTION ç›¸åŒï¼Œæ˜¯æŒ‡é™åˆ¶åœ¨å­è¡¨æœ‰å…³è”è®°å½•çš„æƒ…å†µä¸‹çˆ¶è¡¨ä¸èƒ½æ›´æ–°</span></strong><span>ï¼›</span><strong><span>CASCADE è¡¨ç¤ºçˆ¶è¡¨åœ¨æ›´æ–°æˆ–è€…åˆ é™¤æ—¶ï¼Œæ›´æ–°æˆ–è€…åˆ é™¤å­è¡¨å¯¹åº”è®°å½•</span></strong><span>ï¼›SET NULL åˆ™è¡¨ç¤ºçˆ¶è¡¨åœ¨æ›´æ–°æˆ–è€…åˆ é™¤çš„æ—¶å€™ï¼Œå­è¡¨çš„å¯¹åº”å­—æ®µè¢« SET NULLã€‚é€‰æ‹©åä¸¤ç§æ–¹å¼çš„æ—¶å€™è¦è°¨æ…ï¼Œå¯èƒ½ä¼šå› ä¸ºé”™è¯¯çš„æ“ä½œå¯¼è‡´æ•°æ®çš„ä¸¢å¤±ã€‚ </span></p><ol start='' ><li><span>CASCADE: çˆ¶è¡¨ä¸­åˆ é™¤æˆ–æ›´æ–°å¯¹åº”çš„è¡Œï¼ŒåŒæ—¶è‡ªåŠ¨çš„åˆ é™¤æˆ–æ›´æ–°è‡ªè¡¨ä¸­åŒ¹é…çš„è¡Œã€‚ON DELETE CANSCADEå’ŒON UPDATE CANSCADEéƒ½è¢«InnoDBæ‰€æ”¯æŒã€‚</span></li><li><span>SET NULL: çˆ¶è¡¨ä¸­åˆ é™¤æˆ–æ›´æ–°å¯¹åº”çš„è¡Œï¼ŒåŒæ—¶å°†å­è¡¨ä¸­çš„å¤–é”®åˆ—è®¾ä¸ºç©ºã€‚æ³¨æ„ï¼Œè¿™äº›åœ¨å¤–é”®åˆ—æ²¡æœ‰è¢«è®¾ä¸ºNOT NULLæ—¶æ‰æœ‰æ•ˆã€‚ON DELETE SET NULLå’ŒON UPDATE SET SET NULLéƒ½è¢«InnoDBæ‰€æ”¯æŒã€‚</span></li><li><span>NO ACTION: InnoDBæ‹’ç»åˆ é™¤æˆ–è€…æ›´æ–°çˆ¶è¡¨ã€‚</span></li><li><span>RESTRICT: æ‹’ç»åˆ é™¤æˆ–è€…æ›´æ–°çˆ¶è¡¨ã€‚æŒ‡å®šRESTRICTï¼ˆæˆ–è€…NO ACTIONï¼‰å’Œå¿½ç•¥ON DELETEæˆ–è€…ON UPDATEé€‰é¡¹çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</span></li></ol><p><span> å¤–é”®çº¦æŸä½¿ç”¨æœ€å¤šçš„ä¸¤ç§æƒ…å†µæ— å¤–ä¹ï¼š</span></p><p><span> 1ï¼‰</span><strong><span>çˆ¶è¡¨æ›´æ–°æ—¶å­è¡¨ä¹Ÿæ›´æ–°ï¼Œçˆ¶è¡¨åˆ é™¤æ—¶å¦‚æœå­è¡¨æœ‰åŒ¹é…çš„é¡¹ï¼Œåˆ é™¤å¤±è´¥</span></strong><span>ï¼›</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">ON</span> <span class="cm-keyword">UPDATE</span> <span class="cm-keyword">CASCADE</span> <span class="cm-keyword">ON</span> <span class="cm-keyword">DELETE</span> <span class="cm-keyword">RESTRICT</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span> 2ï¼‰</span><strong><span>çˆ¶è¡¨æ›´æ–°æ—¶å­è¡¨ä¹Ÿæ›´æ–°ï¼Œçˆ¶è¡¨åˆ é™¤æ—¶å­è¡¨åŒ¹é…çš„é¡¹ä¹Ÿåˆ é™¤</span></strong><span>ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">ON</span> <span class="cm-keyword">UPDATE</span> <span class="cm-keyword">CASCADE</span> <span class="cm-keyword">ON</span> <span class="cm-keyword">DELETE</span> <span class="cm-keyword">CASCADE</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>(2)å½“æŸä¸ªè¡¨è¢«å…¶ä»–è¡¨åˆ›å»ºäº†å¤–é”®å‚ç…§ï¼Œé‚£ä¹ˆè¯¥è¡¨çš„å¯¹åº”ç´¢å¼•æˆ–è€…ä¸»é”®ç¦æ­¢è¢«åˆ é™¤ã€‚ </span>
<span>åœ¨å¯¼å…¥å¤šä¸ªè¡¨çš„æ•°æ®æ—¶ï¼Œå¦‚æœéœ€è¦å¿½ç•¥è¡¨ä¹‹å‰çš„å¯¼å…¥é¡ºåºï¼Œå¯ä»¥æš‚æ—¶å…³é—­å¤–é”®çš„æ£€æŸ¥ï¼›</span>
<span>åŒæ ·ï¼Œåœ¨æ‰§è¡Œ LOAD DATA å’Œ ALTER TABLE æ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡æš‚æ—¶å…³é—­å¤–é”®çº¦æŸæ¥åŠ å¿«å¤„ç†çš„é€Ÿåº¦ï¼Œå…³é—­çš„å‘½ä»¤æ˜¯</span><code>SET FOREIGN_KEY_CHECKS = 0;</code><span>ï¼Œæ‰§è¡Œå®Œæˆä¹‹åï¼Œé€šè¿‡æ‰§è¡Œ</span><code>SET FOREIGN_KEY_CHECKS = 1;</code><span>è¯­å¥æ”¹å›åŸçŠ¶æ€ã€‚ </span></p><p><span>ä¾‹å¦‚å¯¹ä¸‹é¢åˆ›å»ºçš„ä¸¤ä¸ªè¡¨ï¼Œå­è¡¨çš„å¤–é”®æŒ‡å®šæ˜¯ ON DELETE RESTRICT ON UPDATE CACADE</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> country ( </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; country_id <span class="cm-keyword">SMALLINT</span> <span class="cm-builtin">UNSIGNED</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">AUTO_INCREMENT</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; country <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">50</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; last_update <span class="cm-builtin">TIMESTAMP</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-keyword">CURRENT_TIMESTAMP</span> <span class="cm-keyword">ON</span> <span class="cm-keyword">UPDATE</span> <span class="cm-keyword">CURRENT_TIMESTAMP</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; <span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span>  (country_id) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; )<span class="cm-keyword">ENGINE</span>=<span class="cm-keyword">InnoDB</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-string-2">CHARSET</span>=utf8;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.02</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> city ( </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; city_id <span class="cm-keyword">SMALLINT</span> <span class="cm-builtin">UNSIGNED</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">AUTO_INCREMENT</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; city <span class="cm-builtin">VARCHAR</span>(<span class="cm-number">50</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; country_id <span class="cm-keyword">SMALLINT</span> <span class="cm-builtin">UNSIGNED</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; last_update <span class="cm-builtin">TIMESTAMP</span> <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-keyword">CURRENT_TIMESTAMP</span> <span class="cm-keyword">ON</span> <span class="cm-keyword">UPDATE</span> <span class="cm-keyword">CURRENT_TIMESTAMP</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; <span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span>  (city_id), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; <span class="cm-keyword">KEY</span> idx_fk_country_id (country_id), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; &nbsp; <span class="cm-keyword">CONSTRAINT</span> <span class="cm-variable-2">`fk_city_country`</span> <span class="cm-keyword">FOREIGN</span> <span class="cm-keyword">KEY</span> (country_id) <span class="cm-keyword">REFERENCES</span> country (country_id) <span class="cm-keyword">ON</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">DELETE</span> <span class="cm-keyword">RESTRICT</span> <span class="cm-keyword">ON</span> <span class="cm-keyword">UPDATE</span> <span class="cm-keyword">CASCADE</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; )<span class="cm-keyword">ENGINE</span>=<span class="cm-keyword">InnoDB</span> <span class="cm-keyword">DEFAULT</span> <span class="cm-string-2">CHARSET</span>=utf8;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.03</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> country(country_id,country) <span class="cm-keyword">values</span>(<span class="cm-number">1</span>,<span class="cm-string">'ShanDong'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> country;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| country_id | country  | last_update &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | ShanDong | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">21</span> <span class="cm-number">10</span>:21:48 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> city(city_id,city,country_id) <span class="cm-keyword">values</span>(<span class="cm-number">111</span>,<span class="cm-string">'QingDao'</span>,<span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> city;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| city_id | city &nbsp;  | country_id | last_update &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">111</span> | QingDao | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">21</span> <span class="cm-number">10</span>:22:53 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ é™¤ä¸»è¡¨ä¸­ä¸€æ¡è¢«å­è¡¨å…³è”çš„ä¸€æ¡è®°å½•ï¼ŒæŠ¥é”™</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> country <span class="cm-keyword">where</span> country_id=<span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ERROR <span class="cm-number">1451</span> (<span class="cm-number">23000</span>): Cannot <span class="cm-keyword">delete</span> <span class="cm-keyword">or</span> <span class="cm-keyword">update</span> a parent <span class="cm-keyword">row</span>: a <span class="cm-keyword">foreign</span> <span class="cm-keyword">key</span> <span class="cm-keyword">constraint</span> fails (<span class="cm-variable-2">`test`</span>.<span class="cm-variable-2">`city`</span>, <span class="cm-keyword">CONSTRAINT</span> <span class="cm-variable-2">`fk_city_country`</span> <span class="cm-keyword">FOREIGN</span> <span class="cm-keyword">KEY</span> (<span class="cm-variable-2">`country_id`</span>) <span class="cm-keyword">REFERENCES</span> <span class="cm-variable-2">`country`</span> (<span class="cm-variable-2">`country_id`</span>) <span class="cm-keyword">ON</span> <span class="cm-keyword">UPDATE</span> <span class="cm-keyword">CASCADE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ›´æ–°ä¸»è¡¨ä¸­çš„è®°å½•ï¼Œå­è¡¨æœ‰å¯¹åº”è®°å½•ä¹Ÿä¼šè·Ÿæ–°</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">update</span> country <span class="cm-keyword">set</span> country_id=<span class="cm-number">1000</span> <span class="cm-keyword">where</span> country_id=<span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> city;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| city_id | city &nbsp;  | country_id | last_update &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; <span class="cm-number">111</span> | QingDao | &nbsp; &nbsp; &nbsp; <span class="cm-number">1000</span> | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">21</span> <span class="cm-number">10</span>:22:53 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------+---------+------------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> country;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| country_id | country  | last_update &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; <span class="cm-number">1000</span> | ShanDong | <span class="cm-number">2020</span>-<span class="cm-number">07</span>-<span class="cm-number">21</span> <span class="cm-number">10</span>:23:48 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------+----------+---------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#ä¸Šé¢å·²ç»æ¼”ç¤ºäº†ï¼Œå½“åˆ é™¤ä¸€æ¡è¢«å…¶ä»–è¡¨çš„å¤–é”®å…³è”å­—æ®µæ—¶ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å¤–é”®çº¦æŸç¦æ­¢æ‰ï¼Œå°±å¯ä»¥åˆ é™¤äº†</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#é»˜è®¤å¤–é”®çº¦æŸå¼€å¯</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%FOREIGN_KEY_CHECKS%'</span>; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name &nbsp; &nbsp;  | <span class="cm-keyword">Value</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| foreign_key_checks | <span class="cm-keyword">ON</span> &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">set</span> foreign_key_checks=off;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%FOREIGN_KEY_CHECKS%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name &nbsp; &nbsp;  | <span class="cm-keyword">Value</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| foreign_key_checks | OFF &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æˆåŠŸåˆ é™¤</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">delete</span> <span class="cm-keyword">from</span> country <span class="cm-keyword">where</span> country_id=<span class="cm-number">1000</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> country;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Empty <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1932px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1932px;"></div></div></div></pre><p><strong><span>3. å­˜å‚¨æ–¹å¼</span></strong></p><p><span>innoDBå­˜å‚¨æ•°æ®å’Œç´¢å¼•æœ‰</span><strong><span>å…±äº«è¡¨ç©ºé—´å­˜å‚¨å’Œç‹¬å è¡¨ç©ºé—´å­˜å‚¨</span></strong><span>ä¸¤ç§æ–¹å¼ï¼Œé€šè¿‡å‚æ•°innodb_file_per_tableæ§åˆ¶ï¼Œ0è¡¨ç¤ºå…±äº«ç©ºé—´ï¼Œä¹Ÿæ˜¯é»˜è®¤çš„ï¼Œ1è¡¨ç¤ºç‹¬å ç©ºé—´ã€‚ä¸¤ç§æ–¹å¼çš„è¡¨ç»“æ„ï¼ˆæè¿°ï¼‰éƒ½ä¿å­˜åœ¨.frmæ–‡ä»¶ä¸­ã€‚</span></p><p><span>å…±äº«è¡¨ç©ºé—´ï¼š</span></p><p><span>æ¯ä¸€ä¸ªæ•°æ®åº“çš„æ‰€æœ‰è¡¨çš„æ•°æ®ã€ç´¢å¼•éƒ½ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé»˜è®¤åœ¨dataç›®å½•ä¸‹ï¼Œåä¸ºibdata1ï¼Œå¤§å°ä¸º10Mçš„æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡å‚æ•°innodn_data_file_path=/data/ibdata1:2000Mæ¥æŒ‡å®šå­˜å‚¨è·¯å¾„ã€‚</span></p><p><span>ä¼˜ç‚¹ï¼š</span></p><p><span>ï¼ˆ1ï¼‰å¯ä»¥å°†è¡¨ç©ºé—´åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶æ”¾åœ¨ä¸åŒçš„ç£ç›˜ä¸Šï¼Œ</span><strong><span>åˆ†å¸ƒIO</span></strong><span>ï¼Œæé«˜æ€§èƒ½ã€‚é‡‡ç”¨å…±äº«ç©ºé—´å­˜å‚¨ï¼Œå­˜å‚¨ç©ºé—´çš„å¤§å°ä¸å—æ–‡ä»¶ç³»ç»Ÿä¸‹æ–‡ä»¶å¤§å°çš„é™åˆ¶äº†ï¼Œè€Œå–å†³äºè‡ªèº«çš„é™åˆ¶ï¼Œå®˜æ–¹æ–‡æ¡£æ˜¾ç¤ºï¼Œè¡¨ç©ºé—´çš„æœ€å¤§é™åˆ¶æ˜¯64TBã€‚</span></p><p><span>ï¼ˆ2ï¼‰è¡¨æ•°æ®å’Œè¡¨ç»“æ„æ”¾åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿ç®¡ç†</span></p><p><span>ç¼ºç‚¹ï¼šç”±äºæ‰€æœ‰çš„æ•°æ®å’Œç´¢å¼•éƒ½æ˜¯åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ··åˆå­˜å‚¨ï¼Œè¿™æ ·çš„è¯å¯¹ä¸€ä¸ªè¡¨åšäº†å¤§é‡çš„åˆ é™¤æ“ä½œåï¼Œè¡¨ç©ºé—´ä¸­ä¼šäº§ç”Ÿå¤§é‡çš„ç©ºéš™</span></p><p><span>ç‹¬å è¡¨ç©ºé—´å­˜å‚¨ï¼š</span></p><p><span>æ¯ä¸€å¼ è¡¨éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è¡¨ç©ºé—´ï¼Œè¡¨çš„ç»“æ„ä¾ç„¶åœ¨.frmæ–‡ä»¶ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªåç¼€ä¸º.ibdçš„æ–‡ä»¶ï¼Œä¿å­˜äº†è¿™å¼ è¡¨çš„æ•°æ®å’Œç´¢å¼•ã€‚</span></p><p><span>ä¼˜ç‚¹ï¼š</span></p><p><span>æ¯å¼ è¡¨éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è¡¨ç©ºé—´ï¼Œå¯å®ç°å•è¡¨åœ¨ä¸åŒæ•°æ®åº“ä¸­ç§»åŠ¨ç©ºé—´å¯å›æ”¶ã€‚drop tableä¼šè‡ªåŠ¨å›æ”¶ï¼›åˆ é™¤æ•°æ®åï¼Œé€šè¿‡alter table emp engine=innodbä¹Ÿå¯å›æ”¶ä¸ç”¨çš„è¡¨ç©ºé—´ï¼Œæ•ˆç‡å’Œæ€§èƒ½ä¼šå¥½ä¸€äº›ã€‚</span>
<span>ç¼ºç‚¹ï¼šç”±äºæ¯ä¸ªè¡¨çš„æ•°æ®éƒ½æ˜¯ä»¥ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶æ¥å­˜æ”¾ï¼Œæ‰€ä»¥ä¼šå—åˆ°æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°é™åˆ¶</span></p><h3><a name="723-memory" class="md-header-anchor"></a><span>7.2.3 MEMORY</span></h3><p><span>	</span><span>MEMORY å­˜å‚¨å¼•æ“ä½¿ç”¨</span><strong><span>å­˜åœ¨å†…å­˜ä¸­</span></strong><span>çš„å†…å®¹æ¥åˆ›å»ºè¡¨ã€‚æ¯ä¸ª MEMORY è¡¨åªå®é™…å¯¹åº”ä¸€ä¸ªç£ç›˜æ–‡ä»¶ï¼Œæ ¼å¼æ˜¯.frmã€‚MEMORY ç±»å‹çš„è¡¨</span><strong><span>è®¿é—®éå¸¸å¾—å¿«</span></strong><span>ï¼Œå› ä¸ºå®ƒçš„æ•°æ®æ˜¯æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œå¹¶ä¸”é»˜è®¤ä½¿ç”¨ HASH ç´¢å¼•ï¼Œä½†æ˜¯ä¸€æ—¦æœåŠ¡å…³é—­ï¼Œè¡¨ä¸­çš„æ•°æ®å°±ä¼šä¸¢å¤±æ‰ã€‚</span></p><p><span>MEMORYï¼šå°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨ RAM ä¸­ï¼Œåœ¨éœ€è¦å¿«é€Ÿå®šä½è®°å½•å’Œå…¶ä»–ç±»ä¼¼æ•°æ®çš„ç¯å¢ƒä¸‹ï¼Œå¯æä¾›æå¿«çš„è®¿é—®ã€‚MEMORY çš„ç¼ºé™·æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³• CACHE åœ¨å†…å­˜ä¸­ï¼Œå…¶æ¬¡æ˜¯è¦ç¡®ä¿è¡¨çš„æ•°æ®å¯ä»¥æ¢å¤ï¼Œæ•°æ®åº“å¼‚å¸¸ç»ˆæ­¢åè¡¨ä¸­çš„æ•°æ®æ˜¯å¯ä»¥æ¢å¤çš„ã€‚MEMORY è¡¨é€šå¸¸ç”¨äºæ›´æ–°ä¸å¤ªé¢‘ç¹çš„å°è¡¨ï¼Œç”¨ä»¥å¿«é€Ÿå¾—åˆ°è®¿é—®ç»“æœã€‚</span></p><h3><a name="724-merge" class="md-header-anchor"></a><span>7.2.4 MERGE</span></h3><p><span>MERGE å­˜å‚¨å¼•æ“æ˜¯ä¸€ç»„ MyISAM è¡¨çš„ç»„åˆï¼Œè¿™äº› MyISAM è¡¨å¿…é¡»ç»“æ„å®Œå…¨ç›¸åŒï¼ŒMERGEè¡¨æœ¬èº«å¹¶æ²¡æœ‰æ•°æ®ï¼Œå¯¹ MERGE ç±»å‹çš„è¡¨å¯ä»¥è¿›è¡ŒæŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤çš„æ“ä½œï¼Œè¿™äº›æ“ä½œå®é™…ä¸Šæ˜¯å¯¹å†…éƒ¨çš„å®é™…çš„ MyISAM è¡¨è¿›è¡Œçš„ã€‚</span></p><p><span>MERGEï¼šç”¨äºå°†ä¸€ç³»åˆ—ç­‰åŒçš„ MyISAM è¡¨ä»¥é€»è¾‘æ–¹å¼ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªå¯¹è±¡å¼•ç”¨å®ƒä»¬ã€‚MERGE è¡¨çš„ä¼˜ç‚¹åœ¨äºå¯ä»¥çªç ´å¯¹å•ä¸ª MyISAM è¡¨å¤§å°çš„é™åˆ¶ï¼Œå¹¶ä¸”é€šè¿‡å°†ä¸åŒçš„è¡¨åˆ†å¸ƒåœ¨å¤šä¸ªç£ç›˜ä¸Šï¼Œå¯ä»¥æœ‰æ•ˆåœ°æ”¹å–„MERGEè¡¨çš„è®¿é—®æ•ˆç‡ã€‚è¿™å¯¹äºè¯¸å¦‚æ•°æ®ä»“å‚¨ç­‰VLDBç¯å¢ƒååˆ†é€‚åˆã€‚</span></p><h2><a name="73-statuså’Œvariables" class="md-header-anchor"></a><span>7.3 statuså’Œvariables</span></h2><p><strong><span>show status</span></strong><span>:  æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œçš„å®æ—¶çŠ¶æ€ï¼Œä¾¿äºdbaæŸ¥çœ‹mysqlå½“å‰è¿è¡Œçš„çŠ¶æ€ï¼Œåšå‡ºç›¸åº”ä¼˜åŒ–ï¼ŒåŠ¨æ€çš„ï¼Œä¸å¯äººä¸ºè¿›è¡Œä¿®æ”¹ï¼Œåªèƒ½ç³»ç»Ÿè‡ªåŠ¨updateã€‚</span></p><p><strong><span>show variables</span></strong><span> : æŸ¥çœ‹ç³»ç»Ÿå‚æ•°ï¼Œç³»ç»Ÿé»˜è®¤è®¾ç½®æˆ–è€…dbaè°ƒæ•´ä¼˜åŒ–åçš„å‚æ•°ï¼Œé™æ€çš„ã€‚å¯ä»¥é€šè¿‡setæˆ–è€…ä¿®æ”¹my.cnfé…ç½®æ–‡ä»¶ä¿®æ”¹ã€‚</span></p><p><span>é¦–å…ˆå¯ä»¥é€šè¿‡ä¸‹å±ä¸¤ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹mysqlçš„ç›¸åº”çš„ç³»ç»Ÿå‚æ•°</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'%abc%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%abc%'</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>å‚è€ƒ:</span><a href='https://blog.csdn.net/andyzhaojianhui/article/details/50052117'><span>mysqlä¹‹statuså’ŒvariablesåŒºåˆ«åŠç”¨æ³•è¯¦è§£</span></a></p><p><span>ç³»ç»Ÿå˜é‡åˆåˆ†globalå’Œsessionï¼Œç‰¹åˆ«æ˜¯å½“ç”¨show variables like &#39;character_set%&#39;;ä¸é€‰ä¸­æ•°æ®åº“å’Œé€‰ä¸­æ•°æ®åº“æ—¶æ˜¯ä¸ä¸€æ ·çš„</span></p><h1><a name="8-é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹" class="md-header-anchor"></a><span>8. é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹</span></h1><h2><a name="81-charä¸varchar" class="md-header-anchor"></a><span>8.1 CHARä¸VARCHAR</span></h2><p><span>	</span><span>CHAR å’Œ VARCHAR ç±»å‹ç±»ä¼¼ï¼Œéƒ½ç”¨æ¥å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä½†å®ƒä»¬ä¿å­˜å’Œæ£€ç´¢çš„æ–¹å¼ä¸åŒã€‚CHAR å±äºå›ºå®šé•¿åº¦çš„å­—ç¬¦ç±»å‹ï¼Œè€Œ VARCHAR å±äºå¯å˜é•¿åº¦çš„å­—ç¬¦ç±»å‹ã€‚å½“charå®šä¹‰ä¸€å®šå®½åº¦çš„æ ¼å¼æ—¶ï¼Œæ•°æ®æœ«å°¾çš„ç©ºæ ¼ä¼šè¢«å¤„ç†æ‰ã€‚charæ˜¯å›ºå®šé•¿åº¦çš„ï¼Œå¤„ç†é€Ÿåº¦æ¯”varcharå—ï¼Œä½†ç¼ºç‚¹æ˜¯æµªè´¹ç©ºé—´ã€‚</span></p><p><strong><span>charå’Œvarcharå¦‚ä½•é€‰æ‹©ï¼Ÿ</span></strong></p><p><span>åœ¨ MySQL ä¸­ï¼Œä¸åŒçš„å­˜å‚¨å¼•æ“å¯¹ CHAR å’Œ VARCHAR çš„ä½¿ç”¨åŸåˆ™æœ‰æ‰€ä¸åŒï¼Œè¿™é‡Œç®€å•æ¦‚æ‹¬å¦‚ä¸‹ã€‚ </span></p><ul><li><span>MyISAM å­˜å‚¨å¼•æ“ï¼š</span><strong><span>å»ºè®®ä½¿ç”¨å›ºå®šé•¿åº¦çš„æ•°æ®åˆ—ä»£æ›¿å¯å˜é•¿åº¦çš„æ•°æ®åˆ—ã€‚</span></strong><span> </span></li><li><span>MEMORY å­˜å‚¨å¼•æ“ï¼šç›®å‰éƒ½ä½¿ç”¨å›ºå®šé•¿åº¦çš„æ•°æ®è¡Œå­˜å‚¨ï¼Œå› æ­¤æ— è®ºä½¿ç”¨ CHAR æˆ–VARCHAR åˆ—éƒ½æ²¡æœ‰å…³ç³»ã€‚ä¸¤è€…éƒ½æ˜¯ä½œä¸º CHAR  ç±»å‹å¤„ç†ã€‚ </span></li><li><span>InnoDB å­˜å‚¨å¼•æ“ï¼š</span><strong><span>å»ºè®®ä½¿ç”¨ VARCHAR ç±»å‹</span></strong><span>ã€‚å¯¹äº InnoDB æ•°æ®è¡¨ï¼Œ</span><strong><span>å†…éƒ¨çš„è¡Œå­˜å‚¨æ ¼å¼æ²¡æœ‰åŒºåˆ†å›ºå®šé•¿åº¦å’Œå¯å˜é•¿åº¦åˆ—ï¼ˆæ‰€æœ‰æ•°æ®è¡Œéƒ½ä½¿ç”¨æŒ‡å‘æ•°æ®åˆ—å€¼çš„å¤´æŒ‡é’ˆï¼‰</span></strong><span>ï¼Œå› æ­¤åœ¨æœ¬è´¨ä¸Šï¼Œä½¿ç”¨å›ºå®šé•¿åº¦çš„ CHAR åˆ—ä¸ä¸€å®šæ¯”ä½¿ç”¨å¯å˜é•¿åº¦ VARCHAR åˆ—æ€§èƒ½è¦å¥½ã€‚å› è€Œï¼Œä¸»è¦çš„æ€§èƒ½å› ç´ æ˜¯æ•°æ®è¡Œä½¿ç”¨çš„å­˜å‚¨æ€»é‡ã€‚</span><strong><span>ç”±äº CHAR å¹³å‡å ç”¨çš„ç©ºé—´å¤šäº VARCHARï¼Œå› æ­¤ä½¿ç”¨ VARCHAR æ¥æœ€å°åŒ–éœ€è¦å¤„ç†çš„æ•°æ®è¡Œçš„å­˜å‚¨æ€»é‡å’Œç£ç›˜ I/O æ˜¯æ¯”è¾ƒå¥½çš„ã€‚</span></strong></li></ul><h2><a name="82-textä¸blob" class="md-header-anchor"></a><span>8.2 TEXTä¸BLOB</span></h2><p><span>	</span><span>charæˆ–è€…varcharé€‚ç”¨äºä¿å­˜å°‘é‡å­—ç¬¦ä¸²ï¼Œå¦‚æœä¿å­˜è¾ƒå¤§æ–‡æœ¬æ˜¯ï¼Œé€šå¸¸ä¼šé€‰æ‹©ä½¿ç”¨TEXTå’ŒBLOBã€‚</span></p><p><strong><span>BLOBï¼š</span></strong><span>ç”¨æ¥ä¿å­˜äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”å¦‚ç…§ç‰‡ã€‚</span></p><p><strong><span>TEXTï¼š</span></strong><span>åªèƒ½ä¿å­˜å­—ç¬¦æ•°æ®ï¼Œæ¯”å¦‚ä¸€ç¯‡æ–‡ç« å’Œæ—¥è®°ã€‚</span></p><p><span>TEXT å’Œ BLOB ä¸­åˆåˆ†åˆ«åŒ…æ‹¬TEXTã€MEDIUMTEXTã€LONGTEXT å’Œ BLOBã€MEDIUMBLOBã€LONGBLOB3 ç§ä¸åŒçš„ç±»å‹ã€‚</span></p><p><span>(1)BLOB å’Œ TEXT å€¼ä¼šå¼•èµ·ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‰§è¡Œäº†å¤§é‡çš„åˆ é™¤æ“ä½œæ—¶ã€‚ åˆ é™¤æ“ä½œä¼šåœ¨æ•°æ®è¡¨ä¸­ç•™ä¸‹å¾ˆå¤§çš„</span><strong><span>â€œç©ºæ´â€</span></strong><span>ï¼Œä»¥åå¡«å…¥è¿™äº›â€œç©ºæ´â€çš„è®°å½•åœ¨æ’å…¥çš„æ€§èƒ½ä¸Šä¼šæœ‰å½±å“ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå»ºè®®å®šæœŸä½¿ç”¨ </span><strong><span>OPTIMIZE TABLE</span></strong><span> åŠŸèƒ½å¯¹è¿™ç±»è¡¨è¿›è¡Œç¢ç‰‡æ•´ç†ï¼Œé¿å…å› ä¸ºâ€œç©ºæ´â€å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</span></p><p><span>(2)å¯ä»¥ä½¿ç”¨</span><strong><span>åˆæˆçš„ï¼ˆSyntheticï¼‰ç´¢å¼•</span></strong><span>æ¥</span><strong><span>æé«˜å¤§æ–‡æœ¬å­—æ®µï¼ˆBLOB æˆ– TEXTï¼‰çš„æŸ¥è¯¢æ€§èƒ½ã€‚</span></strong></p><p><span>ç®€å•æ¥è¯´ï¼Œåˆæˆç´¢å¼•å°±æ˜¯æ ¹æ®å¤§æ–‡æœ¬å­—æ®µçš„å†…å®¹å»ºç«‹ä¸€ä¸ªæ•£åˆ—å€¼ï¼Œå¹¶æŠŠè¿™ä¸ªå€¼å­˜å‚¨åœ¨å•ç‹¬çš„æ•°æ®åˆ—ä¸­ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡æ£€ç´¢æ•£åˆ—å€¼æ‰¾åˆ°æ•°æ®è¡Œäº†ã€‚ä½†æ˜¯ï¼Œè¦æ³¨æ„è¿™ç§æŠ€æœ¯åªèƒ½ç”¨äºç²¾ç¡®åŒ¹é…çš„æŸ¥è¯¢ï¼ˆæ•£åˆ—å€¼å¯¹äºç±»ä¼¼&lt;æˆ–&gt;=ç­‰èŒƒå›´æœç´¢æ“ä½œç¬¦æ˜¯æ²¡æœ‰ç”¨å¤„çš„ï¼‰ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; &nbsp;<span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t (id <span class="cm-builtin">varchar</span>(<span class="cm-number">100</span>),context &nbsp;<span class="cm-builtin">blob</span>,hash_value <span class="cm-builtin">varchar</span>(<span class="cm-number">40</span>)); </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.02</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(<span class="cm-number">1</span>,<span class="cm-keyword">repeat</span>(<span class="cm-string">'beijing'</span>,<span class="cm-number">2</span>),md5(context));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.01</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; &nbsp;<span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(<span class="cm-number">2</span>,<span class="cm-keyword">repeat</span>(<span class="cm-string">'beijing'</span>,<span class="cm-number">2</span>),md5(context));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.01</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(<span class="cm-number">3</span>,<span class="cm-keyword">repeat</span>(<span class="cm-string">'beijing 2008'</span>,<span class="cm-number">2</span>),md5(context));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">1</span> <span class="cm-keyword">row</span> affected (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; &nbsp;<span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------------------------+----------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id &nbsp; | context &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | hash_value &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------------------------+----------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1</span> &nbsp;  | beijingbeijing &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">09746</span>eef633dbbccb7997dfd795cff17 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2</span> &nbsp;  | beijingbeijing &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">09746</span>eef633dbbccb7997dfd795cff17 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">3</span> &nbsp;  | beijing <span class="cm-number">2008</span>beijing <span class="cm-number">2008</span> | <span class="cm-number">1</span>c0ddb82cca9ed63e1cacbddd3f74082 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------------------------+----------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> t <span class="cm-keyword">where</span> hash_value=md5(<span class="cm-keyword">repeat</span>(<span class="cm-string">'beijing 2008'</span>,<span class="cm-number">2</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------------------------+----------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id &nbsp; | context &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | hash_value &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------------------------+----------------------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">3</span> &nbsp;  | beijing <span class="cm-number">2008</span>beijing <span class="cm-number">2008</span> | <span class="cm-number">1</span>c0ddb82cca9ed63e1cacbddd3f74082 |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+--------------------------+----------------------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 644px;"></div><div class="CodeMirror-gutters" style="display: none; height: 644px;"></div></div></div></pre><p><span>(3)å¯¹ BLOB æˆ–è€… CLOB å­—æ®µè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼ŒMySQL æä¾›äº†</span><strong><span>å‰ç¼€ç´¢å¼•</span></strong><span>ï¼Œä¹Ÿå°±æ˜¯åªä¸ºå­—æ®µçš„å‰ n åˆ—åˆ›å»ºç´¢å¼•ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; create index idx_blob on t(context(100));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Query OK, 0 rows affected (0.02 sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Records: 0  Duplicates: 0  Warnings: 0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; desc select * from t where context like 'beijing%' \G;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">*************************** 1. row ***************************</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id: 1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  select_type: SIMPLE</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  table: t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; partitions: NULL</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; type: ALL</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">possible_keys: idx_blob</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  key: NULL</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  key_len: NULL</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ref: NULL</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; rows: 3</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; filtered: 100.00</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Extra: Using where</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1 row in set, 1 warning (0.00 sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"># è¯·æ³¨æ„ï¼Œè¿™é‡Œçš„æŸ¥è¯¢æ¡ä»¶ä¸­ï¼Œâ€œ%â€ä¸èƒ½æ”¾åœ¨æœ€å‰é¢ï¼Œå¦åˆ™ç´¢å¼•å°†ä¸ä¼šè¢«ä½¿ç”¨ã€‚</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 483px;"></div><div class="CodeMirror-gutters" style="display: none; height: 483px;"></div></div></div></pre><p><span>(4)åœ¨ä¸å¿…è¦çš„æ—¶å€™é¿å…æ£€ç´¢å¤§å‹çš„ BLOB æˆ– TEXT å€¼ã€‚</span></p><p><span>(5)æŠŠ BLOB æˆ– TEXT åˆ—åˆ†ç¦»åˆ°å•ç‹¬çš„è¡¨ä¸­ã€‚</span></p><h2><a name="83-æµ®ç‚¹æ•°ä¸å®šç‚¹æ•°" class="md-header-anchor"></a><span>8.3 æµ®ç‚¹æ•°ä¸å®šç‚¹æ•°</span></h2><p><span>æµ®ç‚¹æ•°ä¸€èˆ¬ç”¨äºè¡¨ç¤ºå«æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å€¼ã€‚æ’å…¥æ•°æ®è¶…å‡ºå®é™…ç²¾åº¦ï¼Œåˆ™æ’å…¥å€¼ä¼šè¢«å››èˆäº”å…¥åˆ°å®é™…å®šä¹‰çš„ç²¾åº¦å€¼ï¼Œç„¶åæ’å…¥ï¼Œå››èˆäº”å…¥çš„è¿‡ç¨‹ä¸ä¼šæŠ¥é”™ã€‚åœ¨ MySQL ä¸­ floatã€doubleï¼ˆæˆ– realï¼‰ç”¨æ¥è¡¨ç¤ºæµ®ç‚¹æ•°ã€‚</span></p><p><span>å®šç‚¹æ•°å®é™…ä¸Šæ˜¯ä»¥å­—ç¬¦ä¸²å½¢å¼å­˜æ”¾çš„ï¼Œå®šç‚¹æ•°å¯ä»¥æ›´åŠ ç²¾ç¡®çš„ä¿å­˜æ•°æ®ã€‚å¦‚æœå®é™…æ’å…¥çš„æ•°å€¼ç²¾åº¦å¤§äºå®é™…å®šä¹‰çš„ç²¾åº¦ï¼Œåˆ™ MySQL ä¼šè¿›è¡Œè­¦å‘Šï¼ˆé»˜è®¤çš„ SQLMode ä¸‹ï¼‰ï¼Œä½†æ˜¯æ•°æ®æŒ‰ç…§å®é™…ç²¾åº¦å››èˆäº”å…¥åæ’å…¥ï¼›å¦‚æœ SQLMode æ˜¯åœ¨ TRADITIONALä¼ ç»Ÿæ¨¡å¼ä¸‹ï¼Œåˆ™ç³»ç»Ÿä¼šç›´æ¥æŠ¥é”™ï¼Œå¯¼è‡´æ•°æ®æ— æ³•æ’å…¥ã€‚åœ¨ MySQL ä¸­,decimalï¼ˆæˆ– hnumbericï¼‰ç”¨æ¥è¡¨ç¤ºå®šç‚¹æ•°ã€‚</span></p><p><span>æ³¨æ„ï¼šåœ¨ä»Šåå…³äºæµ®ç‚¹æ•°å’Œå®šç‚¹æ•°çš„åº”ç”¨ä¸­ï¼Œç”¨æˆ·è¦è€ƒè™‘åˆ°ä»¥ä¸‹å‡ ä¸ªåŸåˆ™ï¼š </span></p><ul><li><span>æµ®ç‚¹æ•°å­˜åœ¨è¯¯å·®é—®é¢˜ï¼› </span></li><li><span>å¯¹è´§å¸ç­‰å¯¹ç²¾åº¦æ•æ„Ÿçš„æ•°æ®ï¼Œåº”è¯¥ç”¨å®šç‚¹æ•°è¡¨ç¤ºæˆ–å­˜å‚¨ï¼› </span></li><li><span>åœ¨ç¼–ç¨‹ä¸­ï¼Œå¦‚æœç”¨åˆ°æµ®ç‚¹æ•°ï¼Œè¦ç‰¹åˆ«æ³¨æ„è¯¯å·®é—®é¢˜ï¼Œ</span><strong><span>å¹¶å°½é‡é¿å…åšæµ®ç‚¹æ•°æ¯”è¾ƒ</span></strong><span>ï¼› </span></li><li><span>è¦æ³¨æ„æµ®ç‚¹æ•°ä¸­ä¸€äº›ç‰¹æ®Šå€¼çš„å¤„ç†ã€‚</span></li></ul><h2><a name="84-æ—¥æœŸç±»å‹é€‰æ‹©" class="md-header-anchor"></a><span>8.4 æ—¥æœŸç±»å‹é€‰æ‹©</span></h2><p><span>é€‰æ‹©æ—¥æœŸç±»å‹çš„åŸåˆ™ï¼š</span></p><ul><li><span>å¦‚æœåªéœ€è¦è®°å½•å¹´ä»½ï¼Œåªéœ€è¦ç”¨ä¸€ä¸ªå­—èŠ‚çš„</span><code>YEAR</code><span>ç±»å‹å®Œå…¨å¯ä»¥æ»¡è¶³ï¼Œè€Œä¸éœ€è¦å››ä¸ªå­—èŠ‚çš„</span><code>DATE</code><span>ç±»å‹ã€‚</span></li><li><span>å¦‚æœè¦è®°å½•å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œå¹¶ä¸”è®°å½•å¹´ä»½æ¯”è¾ƒä¹…è¿œï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨</span><code>DATETIME</code><span>ã€‚</span></li><li><span>å¦‚æœè¦è®°å½•çš„æ—¥æœŸè¦è®©ä¸åŒæ—¶åŒºçš„ç”¨æˆ·ä½¿ç”¨ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨</span><code>TIMESTAMP</code><span>ã€‚</span></li></ul><blockquote><p><span>å»¶å±•é˜…è¯»</span></p></blockquote><p><strong><span>mysqlçš„ä¸¥æ ¼æ¨¡å¼å’Œå®½æ¾æ¨¡å¼</span></strong></p><p><span>mysqlæ”¯æŒçš„sql_modeæ¨¡å¼ï¼šANSIã€TRADITIONALã€STRICT_ALL_TABLESå’ŒSTRICT_TRANS_TABLESã€‚ </span></p><p><strong><span>ANSIæ¨¡å¼</span></strong><span>ï¼šå®½æ¾æ¨¡å¼ï¼Œå¯¹æ’å…¥æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœä¸ç¬¦åˆå®šä¹‰ç±»å‹æˆ–é•¿åº¦ï¼Œå¯¹æ•°æ®ç±»å‹è°ƒæ•´æˆ–æˆªæ–­ä¿å­˜ï¼ŒæŠ¥warningè­¦å‘Šã€‚</span></p><p><strong><span>TRADITIONALæ¨¡å¼</span></strong><span>ï¼šä¸¥æ ¼æ¨¡å¼ï¼Œå½“å‘mysqlæ•°æ®åº“æ’å…¥æ•°æ®æ—¶ï¼Œè¿›è¡Œæ•°æ®çš„ä¸¥æ ¼æ ¡éªŒï¼Œä¿è¯é”™è¯¯æ•°æ®ä¸èƒ½æ’å…¥ï¼ŒæŠ¥erroré”™è¯¯ã€‚ç”¨äºäº‹åŠ¡æ—¶ï¼Œä¼šè¿›è¡Œäº‹åŠ¡çš„å›æ»šã€‚</span></p><p><strong><span>STRICT_TRANS_TABLESæ¨¡å¼</span></strong><span>ï¼šä¸¥æ ¼æ¨¡å¼ï¼Œè¿›è¡Œæ•°æ®çš„ä¸¥æ ¼æ ¡éªŒï¼Œé”™è¯¯æ•°æ®ä¸èƒ½æ’å…¥ï¼ŒæŠ¥erroré”™è¯¯ã€‚åªå¯¹æ”¯æŒäº‹åŠ¡çš„è¡¨æœ‰æ•ˆã€‚</span></p><p><strong><span>STRICT_ALL_TABLESæ¨¡å¼</span></strong><span>ï¼šä¸¥æ ¼æ¨¡å¼ï¼Œè¿›è¡Œæ•°æ®çš„ä¸¥æ ¼æ ¡éªŒï¼Œé”™è¯¯æ•°æ®ä¸èƒ½æ’å…¥ï¼ŒæŠ¥erroré”™è¯¯ã€‚å¯¹æ‰€æœ‰è¡¨éƒ½æœ‰æ•ˆã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹å½“å‰æ¨¡å¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-variable-2">@@sql_mode</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'%mode%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ›´æ”¹æ¨¡å¼å€¼:(1)å‘½ä»¤è¡Œ (2)é…ç½®æ–‡ä»¶ æ›´å¤šè¯¦æƒ…è§å®˜ç½‘</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æœ‰æ—¶å€™å½“åƒæ•°æ®åº“æ’å…¥ä¸€ä¸ªdateç±»å‹ä¸ºç©ºæˆ–è€…ä¸å…è®¸æ’å…¥çš„å­—ç¬¦çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®sql_modeæ¥å…è®¸æ“ä½œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ¸…ç©ºæ¨¡å¼å€¼[å±€éƒ¨]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> [<span class="cm-keyword">global</span> | <span class="cm-keyword">session</span>] sql_mode = <span class="cm-string">""</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h1><a name="9-å­—ç¬¦é›†" class="md-header-anchor"></a><span>9. å­—ç¬¦é›†</span></h1><h2><a name="91-mysqlæ”¯æŒçš„å­—ç¬¦é›†" class="md-header-anchor"></a><span>9.1. MySQLæ”¯æŒçš„å­—ç¬¦é›†</span></h2><p><span>MySQL æœåŠ¡å™¨å¯ä»¥æ”¯æŒå¤šç§å­—ç¬¦é›†ï¼Œåœ¨åŒä¸€å°æœåŠ¡å™¨ã€åŒä¸€ä¸ªæ•°æ®åº“ã€ç”šè‡³åŒä¸€ä¸ªè¡¨çš„ä¸åŒå­—æ®µéƒ½å¯ä»¥æŒ‡å®šä½¿ç”¨ä¸åŒçš„å­—ç¬¦é›†ï¼Œç›¸æ¯” Oracle ç­‰å…¶ä»–æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåœ¨åŒä¸€ä¸ªæ•°æ®åº“åªèƒ½ä½¿ç”¨ç›¸åŒçš„å­—ç¬¦é›†ï¼ŒMySQL æ˜æ˜¾å­˜åœ¨æ›´å¤§çš„çµæ´»æ€§ã€‚</span></p><p><span>(1)æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„å­—ç¬¦é›†å‘½ä»¤ï¼š</span><code>show character set;</code></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">character</span> <span class="cm-keyword">set</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+---------------------------------+---------------------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-string-2">Charset</span>  | Description &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-keyword">Default</span> <span class="cm-keyword">collation</span> &nbsp; | Maxlen |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------+---------------------------------+---------------------+--------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| big5 &nbsp; &nbsp; | Big5 Traditional Chinese &nbsp; &nbsp; &nbsp;  | big5_chinese_ci &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">....</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Charset:å­—ç¬¦é›†åç§° Description:æè¿° Default collation:é»˜è®¤æ ¡å¯¹è§„åˆ™ Maxlen:æœ€å¤§é•¿åº¦</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><p><span>(2)MySQL çš„å­—ç¬¦é›†åŒ…æ‹¬</span><strong><span>å­—ç¬¦é›†ï¼ˆCHARACTERï¼‰å’Œæ ¡å¯¹è§„åˆ™ï¼ˆCOLLATIONï¼‰ä¸¤ä¸ªæ¦‚å¿µ</span></strong><span>ã€‚</span><strong><span>å­—ç¬¦é›†æ˜¯ç”¨æ¥å®šä¹‰ MySQL å­˜å‚¨å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œæ ¡å¯¹è§„åˆ™åˆ™æ˜¯å®šä¹‰äº†å­—ç¬¦ä¸²çš„æ¯”è¾ƒæ–¹å¼ï¼Œæ’åˆ—è§„åˆ™</span></strong><span>ã€‚å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚</span></p><p><span>æ ¡å¯¹æ ¼åˆ™å‘½åçº¦å®šï¼šä»¥ç›¸å…³çš„å­—ç¬¦é›†åå¼€å§‹ï¼Œå¹¶ä»¥</span><code>_ci</code><span>(å¤§å°å†™ä¸æ•æ„Ÿ)ã€</span><code>_cs</code><span>(å¤§å°å†™æ•æ„Ÿ)ã€</span><code>_bin</code><span>(åŸºäºå­—ç¬¦ç¼–ç çš„å€¼æ¯”è¾ƒ)ã€‚</span></p><blockquote><p><span>ciæ˜¯case insensitiveçš„ç¼©å†™ï¼Œcsæ˜¯case sensitiveçš„ç¼©å†™</span></p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># show collation like 'å­—ç¬¦å';æŸ¥çœ‹å­—ç¬¦é›†çš„æ ¡å¯¹è§„åˆ™</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">collation</span> <span class="cm-keyword">like</span> <span class="cm-string">'gbk%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+---------+----+---------+----------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-keyword">Collation</span> &nbsp; &nbsp;  | <span class="cm-string-2">Charset</span> | Id | <span class="cm-keyword">Default</span> | Compiled | Sortlen |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+---------+----+---------+----------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| gbk_chinese_ci | gbk &nbsp; &nbsp; | <span class="cm-number">28</span> | Yes &nbsp; &nbsp; | Yes &nbsp; &nbsp;  | &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| gbk_bin &nbsp; &nbsp; &nbsp;  | gbk &nbsp; &nbsp; | <span class="cm-number">87</span> | &nbsp; &nbsp; &nbsp; &nbsp; | Yes &nbsp; &nbsp;  | &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+---------+----+---------+----------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><h2><a name="92-mysqlå­—ç¬¦é›†çš„è®¾ç½®" class="md-header-anchor"></a><span>9.2 MySQLå­—ç¬¦é›†çš„è®¾ç½®</span></h2><p><span>MySQLå­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™æœ‰4ä¸ªçº§åˆ«çš„é»˜è®¤è®¾ç½®ï¼š</span><strong><span>æœåŠ¡å™¨çº§ã€æ•°æ®åº“çº§ã€è¡¨çº§å’Œå­—æ®µçº§ã€‚</span></strong></p><h3><a name="921-æœåŠ¡å™¨å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™" class="md-header-anchor"></a><span>9.2.1 æœåŠ¡å™¨å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™</span></h3><p><span>æœåŠ¡å™¨å­—ç¬¦é›†å’Œæ ¡å¯¹ï¼Œåœ¨MySQLæœåŠ¡å¯åŠ¨çš„æ—¶å€™ç¡®å®šã€‚å¯ä»¥åœ¨my.cnfä¸­è®¾ç½®ï¼Œæˆ–è€…å¯åŠ¨MySQLæœåŠ¡çš„æ—¶å€™æŒ‡å®šã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># my.cnfæ·»åŠ </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[mysqld]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">character</span>-<span class="cm-keyword">set</span>-<span class="cm-keyword">server</span>=utf8</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¯åŠ¨é¡¹ä¸­æŒ‡å®š</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysqld -<span class="cm-keyword">character</span>-<span class="cm-keyword">set</span>-<span class="cm-keyword">server</span>=utf8</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p><span>å¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„æŒ‡å®šæœåŠ¡å™¨å­—ç¬¦é›†ï¼Œé»˜è®¤ä½¿ç”¨ latin1 ä½œä¸ºæœåŠ¡å™¨å­—ç¬¦é›†ã€‚</span></p><p><span>æŸ¥è¯¢å½“å‰æœåŠ¡å™¨çš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'character_set_server'</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3><a name="922-æ•°æ®åº“å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™" class="md-header-anchor"></a><span>9.2.2 æ•°æ®åº“å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™</span></h3><p><span>æ•°æ®åº“çš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™åœ¨åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå®Œæ•°æ®åº“åé€šè¿‡â€œalter databaseâ€å‘½ä»¤è¿›è¡Œä¿®æ”¹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ•°æ®åº“é‡Œå·²ç»å­˜åœ¨æ•°æ®ï¼Œå› ä¸ºä¿®æ”¹å­—ç¬¦é›†å¹¶ä¸èƒ½å°†å·²æœ‰çš„æ•°æ®æŒ‰ç…§æ–°çš„å­—ç¬¦é›†è¿›è¡Œå­˜æ”¾ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ä¿®æ”¹æ•°æ®åº“çš„å­—ç¬¦é›†ç›´æ¥ä¿®æ”¹æ•°æ®çš„å†…å®¹ã€‚</span></p><h3><a name="923-è¡¨çº§åˆ«çš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™" class="md-header-anchor"></a><span>9.2.3 è¡¨çº§åˆ«çš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ›å»ºæ•°æ®è¡¨çš„æ—¶å€™æŒ‡å®šå­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> tb_name (...) <span class="cm-keyword">default</span> <span class="cm-keyword">character</span> <span class="cm-keyword">set</span>=utf8 <span class="cm-keyword">collate</span>=utf8_bin;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3><a name="924-åˆ—å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™" class="md-header-anchor"></a><span>9.2.4 åˆ—å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™</span></h3><p><span>åˆ—å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™çš„å®šä¹‰å¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶æŒ‡å®šï¼Œæˆ–è€…åœ¨ä¿®æ”¹è¡¨æ—¶è°ƒæ•´ï¼Œå¦‚æœåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™æ²¡æœ‰ç‰¹åˆ«æŒ‡å®šå­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ï¼Œåˆ™é»˜è®¤ä½¿ç”¨è¡¨çš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹è¡¨å­—æ®µçš„å­—ç¬¦é›†</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">full</span> <span class="cm-keyword">columns</span> <span class="cm-keyword">from</span> col_name;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><strong><span>å°ç»“ï¼š</span></strong><span>å¯¹äºå­—ç¬¦é›†çš„è®¾ç½®æœ‰å¦‚ä¸‹è§„å¾‹</span></p><ul><li><span>å¦‚æœåœ¨æŒ‡å®šäº†å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ï¼Œä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ï¼› </span></li><li><span>å¦‚æœæŒ‡å®šäº†å­—ç¬¦é›†æ²¡æœ‰æŒ‡å®šæ ¡å¯¹è§„åˆ™ï¼Œä½¿ç”¨æŒ‡å®šå­—ç¬¦é›†çš„é»˜è®¤æ ¡å¯¹è§„åˆ™ï¼› </span></li><li><span>å¦‚æœæ²¡æœ‰æŒ‡å®šå­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ï¼Œå¯¹äºserveræ¥è¯´ï¼Œé»˜è®¤ä¸ºlatin1ï¼Œå¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œç»§æ‰¿serverå­—ç¬¦é›†ï¼Œå¯¹è¡¨å­—æ®µä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œé»˜è®¤ç»§æ‰¿ä¸Šå±‚çš„å­—ç¬¦é›†è®¾ç½®ã€‚</span></li></ul><h3><a name="924-è¿æ¥å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™" class="md-header-anchor"></a><span>9.2.4 è¿æ¥å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™</span></h3><p><span>ä¸Šé¢ 4 ç§è®¾ç½®æ–¹å¼ï¼Œç¡®å®šçš„æ˜¯æ•°æ®ä¿å­˜çš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ï¼Œå¯¹äºå®é™…çš„åº”ç”¨è®¿é—®æ¥è¯´ï¼Œè¿˜å­˜åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´äº¤äº’çš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™çš„è®¾ç½®ã€‚ å¯¹äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„äº¤äº’æ“ä½œï¼ŒMylSQL æä¾›äº† 3 ä¸ªä¸åŒçš„å‚æ•°ï¼šcharacter_set_clientã€character_set_connection å’Œ character_set_resultsï¼Œåˆ†åˆ«ä»£è¡¨å®¢æˆ·ç«¯ã€è¿æ¥å’Œè¿”å›ç»“æœçš„å­—ç¬¦é›†ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ 3 ä¸ªå­—ç¬¦é›†åº”è¯¥æ˜¯ç›¸åŒçš„ï¼Œæ‰å¯ä»¥ç¡®ä¿ç”¨æˆ·å†™å…¥çš„æ•°æ®å¯ä»¥æ­£ç¡®åœ°è¯»å‡ºï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸­æ–‡å­—ç¬¦ï¼Œä¸åŒçš„å†™å…¥å­—ç¬¦é›†å’Œè¿”å›ç»“æœå­—ç¬¦é›†å°†å¯¼è‡´å†™å…¥çš„è®°å½•ä¸èƒ½æ­£ç¡®è¯»å‡ºã€‚</span></p><h2><a name="3-å­—ç¬¦é›†çš„ä¿®æ”¹æ­¥éª¤" class="md-header-anchor"></a><span>3. å­—ç¬¦é›†çš„ä¿®æ”¹æ­¥éª¤</span></h2><p><span>å¦‚æœåœ¨åº”ç”¨å¼€å§‹é˜¶æ®µæ²¡æœ‰æ­£ç¡®çš„è®¾ç½®å­—ç¬¦é›†ï¼Œåœ¨è¿è¡Œä¸€æ®µæ—¶é—´ä»¥åæ‰å‘ç°å­˜åœ¨ä¸èƒ½æ»¡è¶³è¦æ±‚éœ€è¦è°ƒæ•´ï¼Œåˆä¸æƒ³ä¸¢å¼ƒè¿™æ®µæ—¶é—´çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œå­—ç¬¦é›†çš„ä¿®æ”¹ã€‚å­—ç¬¦é›†çš„ä¿®æ”¹ä¸èƒ½ç›´æ¥é€šè¿‡</span><code>alter database character set</code><span>æˆ–è€…</span><code>alter table tablename character set</code><span>å‘½ä»¤è¿›è¡Œï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ²¡æœ‰æ›´æ–°å·²æœ‰è®°å½•çš„å­—ç¬¦é›†ï¼Œè€Œåªæ˜¯å¯¹æ–°åˆ›å»ºçš„è¡¨æˆ–è€…è®°å½•ç”Ÿæ•ˆã€‚å·²æœ‰è®°å½•çš„å­—ç¬¦é›†è°ƒæ•´ï¼Œéœ€è¦å…ˆå°†æ•°æ®å¯¼å‡ºï¼Œç»è¿‡é€‚å½“çš„è°ƒæ•´é‡æ–°å¯¼å…¥åæ‰å¯å®Œæˆã€‚</span></p><blockquote><p><span>TODO Linuxä¸‹mysqldå‘½ä»¤æ‰¾ä¸åˆ°</span></p></blockquote><h1><a name="10-ç´¢å¼•çš„è®¾è®¡å’Œä½¿ç”¨" class="md-header-anchor"></a><span>10. ç´¢å¼•çš„è®¾è®¡å’Œä½¿ç”¨</span></h1><h2><a name="101-ç´¢å¼•æ¦‚è¿°" class="md-header-anchor"></a><span>10.1 ç´¢å¼•æ¦‚è¿°</span></h2><p><strong><span>æ•°æ®åº“ç´¢å¼•ï¼š</span></strong><span>æ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ä¸€ä¸ªæ’åºçš„æ•°æ®ç»“æ„ï¼Œä»¥ååŠ©å¿«é€ŸæŸ¥è¯¢ã€æ›´æ–°æ•°æ®è¡¨ä¸­æ•°æ®ã€‚ç´¢å¼•çš„å®ç°é€šå¸¸ä½¿ç”¨Bæ ‘åŠå…¶å˜ç§B+æ ‘ã€‚</span></p><p><span>MySQLç´¢å¼•ï¼šç´¢å¼•ç”¨äº</span><strong><span>å¿«é€ŸæŸ¥æ‰¾å…·æœ‰ç‰¹å®šåˆ—å€¼çš„è¡Œ</span></strong><span>ã€‚æ²¡æœ‰ç´¢å¼•ï¼ŒMySQLå¿…é¡»ä»ç¬¬ä¸€è¡Œå¼€å§‹ï¼Œç„¶åé€šè¯»æ•´ä¸ªè¡¨ä»¥æ‰¾åˆ°ç›¸å…³çš„è¡Œã€‚</span></p><p><strong><span>ç´¢å¼•çš„ä¼˜ç‚¹</span></strong></p><ul><li><span>é€šè¿‡åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•ï¼Œå¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§ã€‚</span></li><li><strong><span>åŠ å¿«æ•°æ®çš„æ£€ç´¢é€Ÿåº¦ã€‚</span></strong></li><li><strong><span>å‡å°‘ç£ç›˜I/Oæ¬¡æ•°</span></strong></li><li><strong><span>åŠ é€Ÿè¡¨å’Œè¡¨ä¹‹é—´çš„è¿æ¥ã€‚</span></strong></li><li><strong><span>åœ¨ä½¿ç”¨åˆ†ç»„å’Œæ’åºå­å¥è¿›è¡Œæ•°æ®æ£€ç´¢æ—¶ï¼ŒåŒæ ·å¯ä»¥æ˜¾è‘—å‡å°‘æŸ¥è¯¢ä¸­åˆ†ç»„å’Œæ’åºçš„æ—¶é—´ã€‚</span></strong></li><li><span>é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ä¼˜åŒ–éšè—å™¨ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚</span></li></ul><p><span>ç´¢å¼•å¹¶ä¸æ˜¯ä¸‡é‡‘æ²¹ï¼Œå¢åŠ ç´¢å¼•ä¹Ÿæœ‰è®¸å¤šä¸åˆ©çš„æ–¹é¢ã€‚</span></p><ul><li><span>åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´ï¼Œè¿™ç§æ—¶é—´éšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ ã€‚</span></li><li><strong><span>ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´</span></strong><span>ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œå¦‚æœè¦å»ºç«‹èšç°‡ç´¢å¼•ï¼Œé‚£ä¹ˆéœ€è¦çš„ç©ºé—´å°±ä¼šæ›´å¤§ã€‚</span></li><li><strong><span>å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿéœ€è¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œé™ä½å†™æ“ä½œæ€§èƒ½ï¼Œå‡ç¼“è¡¨çš„ä¿®æ”¹é€Ÿåº¦</span></strong><span>ã€‚</span></li></ul><h2><a name="102-æ•°æ®åº“ç´¢å¼•çš„åˆ†ç±»" class="md-header-anchor"></a><span>10.2 æ•°æ®åº“ç´¢å¼•çš„åˆ†ç±»</span></h2><p><span>å¯ä»¥åœ¨æ•°æ®åº“è®¾è®¡å™¨ä¸­åˆ›å»ºäº”ç§ç±»å‹çš„ç´¢å¼•ï¼š</span><strong><span>ä¸»é”®ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€æ™®é€šç´¢å¼•ã€å¤åˆç´¢å¼•ã€å…¨æ–‡ç´¢å¼•</span></strong><span>ã€‚å…¶ä¸­ä¸»é”®ç´¢å¼•ä¹Ÿå¯ä»¥å«åšèšé›†ç´¢å¼•ï¼Œéä¸»é”®ç´¢å¼•ç§°ä¸ºéèšé›†ç´¢å¼•ã€‚</span></p><p><strong><span>ä¸»é”®ç´¢å¼•</span></strong></p><p><span>æ•°æ®åº“è¡¨ç»å¸¸æœ‰ä¸€åˆ—æˆ–åˆ—ç»„åˆï¼Œå…¶å€¼å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œã€‚è¯¥åˆ—ç§°ä¸ºè¡¨çš„ä¸»é”®ã€‚</span></p><p><span>åœ¨æ•°æ®åº“å…³ç³»å›¾ä¸­ä¸ºè¡¨å®šä¹‰ä¸»é”®å°†è‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•çš„ç‰¹å®šç±»å‹ã€‚è¯¥ç´¢å¼•è¦æ±‚ä¸»é”®ä¸­çš„æ¯ä¸ªå€¼éƒ½å”¯ä¸€ã€‚å½“åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨ä¸»é”®ç´¢å¼•æ—¶ï¼Œå®ƒè¿˜å…è®¸å¯¹æ•°æ®çš„å¿«é€Ÿè®¿é—®ã€‚</span></p><p><strong><span>å”¯ä¸€ç´¢å¼•</span></strong><span> </span></p><p><span>å”¯ä¸€ç´¢å¼•æ˜¯ä¸å…è®¸å…¶ä¸­ä»»ä½•ä¸¤è¡Œå…·æœ‰ç›¸åŒç´¢å¼•å€¼çš„ç´¢å¼•ï¼Œ</span><mark><span>å”¯ä¸€æ€§ï¼Œå¯ä»¥ä¸ºç©º</span></mark><span>ã€‚</span></p><p><span>å½“ç°æœ‰æ•°æ®ä¸­å­˜åœ¨é‡å¤çš„é”®å€¼æ—¶ï¼Œå¤§å¤šæ•°æ•°æ®åº“ä¸å…è®¸å°†æ–°åˆ›å»ºçš„å”¯ä¸€ç´¢å¼•ä¸è¡¨ä¸€èµ·ä¿å­˜ã€‚æ•°æ®åº“è¿˜å¯èƒ½é˜²æ­¢æ·»åŠ å°†åœ¨è¡¨ä¸­åˆ›å»ºé‡å¤é”®å€¼çš„æ–°æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨employeeè¡¨ä¸­èŒå‘˜çš„å§“(name)ä¸Šåˆ›å»ºäº†å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ä»»ä½•ä¸¤ä¸ªå‘˜å·¥éƒ½ä¸èƒ½åŒå§“ã€‚</span></p><p><strong><span>æ™®é€šç´¢å¼•</span></strong></p><p><span>ç”¨è¡¨ä¸­çš„æ™®é€šåˆ—æ„å»ºçš„ç´¢å¼•ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶</span></p><p><strong><span>å¤åˆç´¢å¼•</span></strong></p><p><span>ç”¨å¤šä¸ªåˆ—ç»„åˆæ„å»ºçš„ç´¢å¼•ï¼Œè¿™å¤šä¸ªåˆ—ä¸­çš„å€¼</span><strong><span>ä¸å…è®¸æœ‰ç©ºå€¼</span></strong><span>ï¼Œéµå¾ªæœ€</span><strong><span>å·¦åŒ¹é…åŸåˆ™</span></strong><span>ã€‚å¦‚ç»„åˆç´¢å¼•index(col1,col2,col3),ä½¿ç”¨col2å’Œcol3çš„æŸ¥è¯¢æ˜¯ä¸ä¼šä½¿ç”¨ç´¢å¼•çš„ã€‚</span></p><p><strong><span>å…¨æ–‡ç´¢å¼•</span></strong></p><p><span>ä¸»è¦ç”¨äºå¤§æ–‡æœ¬ä¿¡æ¯å»ºç«‹ç´¢å¼•</span></p><h2><a name="èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•" class="md-header-anchor"></a><span>èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•</span></h2><p><strong><span>ç´¢å¼•çš„ç†è§£ï¼š</span></strong></p><p><span>æˆ‘å¯¹ç´¢å¼•çš„çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼š</span></p><p><span>å¦‚æœä¸€ä¸ªè¡¨æ²¡æœ‰åŠ ç´¢å¼•ï¼Œæ•°æ®æŒ‰é¡ºåºä¸€æ¡ä¸€æ¡çš„åœ¨ç£ç›˜ä¸ŠæŒ‰æ’å…¥é¡ºåºå­˜å‚¨ç€ã€‚</span></p><p><span>å¦‚æœä¸€å¼ è¡¨ä¸€æ—¦åŠ äº†ç´¢å¼•ï¼Œæ¯”å¦‚åŠ äº†è‡ªå¢ä¸»é”®ï¼Œé‚£ä¹ˆè¡¨ä¸­çš„æ•°æ®åœ¨ç£ç›˜ä¸­å°±ä¸æ˜¯æŒ‰é¡ºåºæ’åˆ—çš„ï¼Œè€Œæ˜¯å˜æˆäº†æ ‘çŠ¶ç»“æ„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å¹³è¡¡æ ‘ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æ•´ä¸ªè¡¨éƒ½å˜æˆäº†ä¸€ä¸ªç´¢å¼•æ ‘ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„èšç°‡ç´¢å¼•ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸€ä¸ªè¡¨ä¸­åªæœ‰ä¸€ä¸ªä¸»é”®ï¼ˆå¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œè”åˆä¸»é”®ï¼‰ï¼Œå› ä¸ºè‡ªå¢ä¸»é”®çš„æ ¹å°±æ˜¯æ ¹æ®ä¸€å®šç®—æ³•æŠŠè¡¨çš„æ•°æ®æŒ‰ç…§ä¸€å®šæ ¼å¼è½¬æ¢æˆ</span><strong><span>å¹³è¡¡æ ‘</span></strong><span>å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„ã€‚</span></p><p><span>èšé›†ç´¢å¼•ï¼š</span><strong><span>è¡¨æ•°æ®å­˜æ”¾çš„ç‰©ç†é¡ºåºä¸ç´¢å¼•é¡ºåºä¸€è‡´</span></strong><span>ã€‚</span></p><p><span>éèšé›†ç´¢å¼•ï¼š</span><strong><span>è¡¨æ•°æ®å­˜æ”¾çš„ç‰©ç†é¡ºåºä¸ç´¢å¼•é¡ºåºä¸ä¸€è‡´</span></strong></p><blockquote><p><span>ç›¸å½“äºé¡ºåºè¡¨å’Œé“¾è¡¨ä¹‹é—´çš„å·®å¼‚ã€‚</span></p><p><span>æ ¹æœ¬åŒºåˆ«æ˜¯è¡¨è®°å½•çš„æ’åˆ—é¡ºåºå’Œä¸ç´¢å¼•çš„æ’åˆ—é¡ºåºæ˜¯å¦ä¸€è‡´ã€‚</span></p></blockquote><h3><a name="èšé›†ç´¢å¼•" class="md-header-anchor"></a><span>èšé›†ç´¢å¼•</span></h3><ul><li><span>èšé›†ç´¢å¼•çš„å¶å­ç»“ç‚¹å°±æ˜¯æ•°æ®ç»“ç‚¹ã€‚</span></li><li><span>èšç°‡ç´¢å¼•çš„</span><strong><span>æ•°æ®è¡¨å’Œä¸»é”®ç´¢å¼•å­˜å‚¨åœ¨ä¸€èµ·</span></strong><span>ã€‚</span></li></ul><p><strong><span>èšé›†ç´¢å¼•ä¸­è¡¨è®°å½•çš„æ’åˆ—é¡ºåºå’Œç´¢å¼•çš„æ’åˆ—é¡ºåºä¿æŒä¸€è‡´</span></strong><span>ï¼Œæ‰€ä»¥æŸ¥è¯¢æ•ˆç‡ç›¸å½“å¿«ã€‚åªè¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªç´¢å¼•è®°å½•çš„å€¼ï¼Œå…¶ä½™çš„è¿ç»­æ€§çš„è®°å½•ä¹Ÿä¸€å®šæ˜¯è¿ç»­å­˜æ”¾çš„ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192243.jpeg" referrerpolicy="no-referrer"></p><p><span>å‡è®¾æ‰§è¡Œä¸€ä¸ª</span><code>SQL</code><span>ä¸º</span><code>select * from where id=50</code><span>ï¼ŒæŸ¥æ‰¾æµç¨‹å°±æ˜¯å¹³è¡¡æ ‘å…³é”®å­—çš„æŸ¥æ‰¾</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192243.jpeg" referrerpolicy="no-referrer"></p><p><span>å¾ˆå¤šå­˜å‚¨å¼•æ“åœ¨B+Treeçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œ</span><mark><span>æ·»åŠ äº†æŒ‡å‘ç›¸é‚»å¶èŠ‚ç‚¹çš„æŒ‡é’ˆ</span></mark><span>ï¼Œå½¢æˆäº†å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Treeï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†</span><mark><span>æé«˜åŒºé—´æŸ¥æ‰¾çš„æ•ˆç‡</span></mark><span>ï¼Œåªè¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªå€¼é‚£ä¹ˆå°±å¯ä»¥é¡ºåºçš„æŸ¥æ‰¾åé¢çš„å€¼ã€‚</span></p><p><span>ä¸‹é¢æ›´å¥½çš„è§£é‡Šäº†è¿™ä¸ªæ¦‚å¿µ</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192243.jpeg" referrerpolicy="no-referrer"></p><h3><a name="éèšé›†ç´¢å¼•" class="md-header-anchor"></a><span>éèšé›†ç´¢å¼•</span></h3><ul><li><span>éèšç°‡ç´¢å¼•çš„å¶èŠ‚ç‚¹ä»ç„¶æ˜¯ç´¢å¼•èŠ‚ç‚¹ï¼Œåªä¸è¿‡æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¯¹åº”çš„æ•°æ®å—ã€‚</span></li><li><span>éèšç°‡ç´¢å¼•çš„</span><strong><span>æ•°æ®è¡¨å’Œç´¢å¼•è¡¨æ˜¯åˆ†å¼€å­˜å‚¨</span></strong><span>çš„ã€‚</span></li></ul><p><span>éèšé›†ç´¢å¼•è¿™æ£µæ ‘ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ¥è‡ªäºè¡¨ä¸­äºŒçº§ç´¢å¼•ï¼ˆéèšé›†ç´¢å¼•ï¼‰å­—æ®µã€‚å‡å¦‚ç»™userè¡¨çš„nameå­—æ®µåŠ ä¸Šç´¢å¼• ï¼Œ é‚£ä¹ˆç´¢å¼•å°±æ˜¯ç”±nameå­—æ®µä¸­çš„å€¼æ„æˆï¼Œåœ¨æ•°æ®æ”¹å˜æ—¶ï¼Œ DBMSéœ€è¦ä¸€ç›´ç»´æŠ¤ç´¢å¼•ç»“æ„çš„æ­£ç¡®æ€§ã€‚å¦‚æœç»™è¡¨ä¸­å¤šä¸ªå­—æ®µåŠ ä¸Šç´¢å¼• ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°</span><strong><span>å¤šä¸ªç‹¬ç«‹çš„ç´¢å¼•ç»“æ„</span></strong><span>ï¼Œæ¯ä¸ªç´¢å¼•ï¼ˆéèšé›†ç´¢å¼•ï¼‰äº’ç›¸ä¹‹é—´ä¸å­˜åœ¨å…³è”ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192243.jpeg" referrerpolicy="no-referrer"></p><p><strong><span>æ¯æ¬¡ç»™å­—æ®µå»ºä¸€ä¸ªæ–°ç´¢å¼•ï¼Œå­—æ®µä¸­çš„æ•°æ®å°±ä¼šè¢«å¤åˆ¶ä¸€ä»½å‡ºæ¥ï¼Œç”¨äºç”Ÿæˆç´¢å¼•</span></strong><span>ã€‚å› æ­¤ï¼Œç»™è¡¨æ·»åŠ ç´¢å¼•ï¼Œä¼šå¢åŠ è¡¨çš„ä½“ç§¯ï¼Œå ç”¨ç£ç›˜å­˜å‚¨ç©ºé—´ã€‚</span></p><p><span>éèšé›†ç´¢å¼•å’Œèšé›†ç´¢å¼•çš„åŒºåˆ«åœ¨äºï¼Œ</span><strong><span>é€šè¿‡èšé›†ç´¢å¼•å¯ä»¥æŸ¥åˆ°éœ€è¦æŸ¥æ‰¾çš„æ•°æ®ï¼Œè€Œé€šè¿‡éèšé›†ç´¢å¼•å¯ä»¥æŸ¥åˆ°è®°å½•å¯¹åº”çš„ä¸»é”®å€¼ ï¼Œå†ä½¿ç”¨ä¸»é”®çš„å€¼é€šè¿‡èšé›†ç´¢å¼•æŸ¥æ‰¾åˆ°éœ€è¦çš„æ•°æ®</span></strong><span>ï¼ˆ</span><mark><span>å›è¡¨æŸ¥è¯¢</span></mark><span>ï¼‰ï¼Œå¦‚ä¸‹å›¾</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192243.jpeg" referrerpolicy="no-referrer"></p><blockquote><p><span>èšé›†å’Œéèšé›†ç´¢å¼•ä¸ç®¡ä»¥ä»»ä½•æ–¹å¼æŸ¥è¯¢è¡¨ï¼Œæœ€ç»ˆéƒ½ä¼šåˆ©ç”¨ä¸»é”®é€šè¿‡èšé›†ç´¢å¼•æ¥å®šä½åˆ°æ•°æ®ï¼Œèšé›†ç´¢å¼•ï¼ˆä¸»é”®ï¼‰æ˜¯é€šå¾€çœŸå®æ•°æ®æ‰€åœ¨çš„å”¯ä¸€è·¯å¾„ã€‚</span></p></blockquote><p><span>ä¸è¿‡ï¼Œæœ‰ä¸€ç§ä¾‹å¤–å¯ä»¥ä¸ä½¿ç”¨èšé›†ç´¢å¼•å°±èƒ½æŸ¥è¯¢å‡ºæ‰€éœ€è¦çš„æ•°æ®è¿™ç§éä¸»æµçš„æ–¹æ³•ç§°ä¹‹ä¸º</span><mark><span>è¦†ç›–ç´¢å¼•</span></mark><span>æŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯å¹³æ—¶æ‰€è¯´çš„</span><strong><span>å¤åˆç´¢å¼•æˆ–è€…å¤šå­—æ®µç´¢å¼•æŸ¥è¯¢</span></strong><span>ã€‚</span></p><p>&nbsp;</p><blockquote><p><span>ç´¢å¼•å‚è€ƒï¼š</span></p><ul><li><a href='https://baijiahao.baidu.com/s?id=1645514817836645220&amp;wfr=spider&amp;for=pc' target='_blank' class='url'>https://baijiahao.baidu.com/s?id=1645514817836645220&wfr=spider&for=pc</a></li><li><a href='https://blog.csdn.net/mysteryhaohao/article/details/51719871' target='_blank' class='url'>https://blog.csdn.net/mysteryhaohao/article/details/51719871</a></li><li><a href='https://blog.csdn.net/tongdanping/article/details/79878302' target='_blank' class='url'>https://blog.csdn.net/tongdanping/article/details/79878302</a></li></ul></blockquote><h2><a name="103-ç´¢å¼•çš„è®¾è®¡åŸåˆ™" class="md-header-anchor"></a><span>10.3 ç´¢å¼•çš„è®¾è®¡åŸåˆ™</span></h2><p><span>(1) åœ¨ç»å¸¸æœç´¢çš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œå¯ä»¥åŠ å¿«æœç´¢çš„é€Ÿåº¦ã€‚  æœç´¢çš„ç´¢å¼•åˆ—ï¼Œä¸ä¸€å®šæ˜¯æ‰€è¦é€‰æ‹©çš„åˆ—ã€‚æ¢å¥è¯è¯´ï¼Œ</span><strong><span>æœ€é€‚åˆç´¢å¼•çš„åˆ—æ˜¯å‡ºç°åœ¨ WHERE å­å¥ä¸­çš„åˆ—ï¼Œæˆ–è¿æ¥å­å¥ä¸­æŒ‡å®šçš„åˆ—ï¼Œè€Œä¸æ˜¯å‡ºç°åœ¨ SELECT å…³é”®å­—åçš„é€‰æ‹©åˆ—è¡¨ä¸­çš„åˆ—ã€‚</span></strong></p><p><span>(2) ä½¿ç”¨å”¯ä¸€ç´¢å¼•</span></p><p><span>(3) ä½¿ç”¨æ®µç´¢å¼•ã€‚å¦‚æœå¯¹å­—ç¬¦ä¸²åˆ—è¿›è¡Œç´¢å¼•ï¼Œåº”è¯¥æŒ‡å®šä¸€ä¸ªå‰ç¼€é•¿åº¦ï¼Œåªè¦æœ‰å¯èƒ½å°±åº”è¯¥è¿™æ ·åšã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ª CHAR(200)åˆ—ï¼Œå¦‚æœåœ¨å‰ 10 ä¸ªæˆ– 20 ä¸ªå­—ç¬¦å†…ï¼Œå¤šæ•°å€¼æ˜¯æƒŸä¸€çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦å¯¹æ•´ä¸ªåˆ—è¿›è¡Œç´¢å¼•ã€‚å¯¹å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦è¿›è¡Œç´¢å¼•èƒ½å¤ŸèŠ‚çœå¤§é‡ç´¢å¼•ç©ºé—´ï¼Œä¹Ÿå¯èƒ½ä¼šä½¿æŸ¥è¯¢æ›´å¿«ã€‚è¾ƒå°çš„ç´¢å¼•æ¶‰åŠçš„ç£ç›˜ IO è¾ƒå°‘ï¼Œè¾ƒçŸ­çš„å€¼æ¯”è¾ƒèµ·æ¥æ›´å¿«ã€‚</span></p><p><span>(3) åˆ©ç”¨æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™</span></p><p><span>(4) ä¸è¦è¿‡åº¦ç´¢å¼•ã€‚ä¸è¦ä»¥ä¸ºç´¢å¼•â€œè¶Šå¤šè¶Šå¥½â€ï¼Œä»€ä¹ˆä¸œè¥¿éƒ½ç”¨ç´¢å¼•æ˜¯é”™è¯¯çš„ã€‚æ¯ä¸ªé¢å¤–çš„ç´¢å¼•éƒ½è¦å ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ï¼Œå¹¶é™ä½å†™æ“ä½œçš„æ€§èƒ½ã€‚åœ¨ä¿®æ”¹è¡¨çš„å†…å®¹æ—¶ï¼Œç´¢å¼•å¿…é¡»è¿›è¡Œæ›´æ–°ï¼Œæœ‰æ—¶å¯èƒ½éœ€è¦é‡æ„ï¼Œå› æ­¤ï¼Œç´¢å¼•è¶Šå¤šï¼Œæ‰€èŠ±çš„æ—¶é—´è¶Šé•¿ã€‚</span></p><h2><a name="104-ç´¢å¼•çš„ä½¿ç”¨" class="md-header-anchor"></a><span>10.4 ç´¢å¼•çš„ä½¿ç”¨</span></h2><p><strong><span>1ã€å»ºè¡¨æ—¶åˆ›å»ºç´¢å¼•</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> tb_name (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>col_name æ•°æ®ç±»å‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>...,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">unique</span> | <span class="cm-keyword">fulltext</span> | <span class="cm-keyword">spatial</span>] <span class="cm-keyword">index</span>|<span class="cm-keyword">key</span> [ç´¢å¼•å](å­—æ®µå1[(é•¿åº¦)] [<span class="cm-keyword">ASC</span>]|[<span class="cm-keyword">DESC</span>]) [<span class="cm-keyword">using</span> ç´¢<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span>å¼•æ–¹æ³•]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><p><span>å‚æ•°ï¼š</span></p><ul><li><span>uniqueï¼šå”¯ä¸€æ€§ç´¢å¼•</span></li><li><span>fulltextï¼šå…¨æ–‡ç´¢å¼•</span></li><li><span>spatialï¼šç©ºé—´ç´¢å¼•</span></li><li><span>indexå’Œkeyï¼šç”¨äºæŒ‡å®šå­—æ®µä¸ºç´¢å¼•ï¼Œä¸¤è€…ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼ŒäºŒé€‰ä¸€ã€‚</span></li><li><span>ç´¢å¼•åï¼šå¯é€‰ï¼Œåˆ›å»ºç´¢å¼•æ—¶æŒ‡å®šåç§°ã€‚</span></li><li><span>å­—æ®µå1:æŒ‡å®šç´¢å¼•å¯¹åº”çš„å­—æ®µçš„åç§°ï¼Œè¯¥å­—æ®µå¿…é¡»æ˜¯å‰é¢å®šä¹‰å¥½çš„å­—æ®µã€‚</span></li></ul><ul><li><span>é•¿åº¦:å¯é€‰ã€‚æŒ‡ç´¢å¼•çš„é•¿åº¦ï¼Œå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹æ‰å¯ä»¥ä½¿ç”¨ã€‚</span></li><li><span>ASC:å¯é€‰ã€‚è¡¨ç¤ºå‡åºæ’åˆ—ã€‚</span></li><li><span>DESC:å¯é€‰ã€‚è¡¨ç¤ºé™åºæ’åˆ—ã€‚</span></li></ul><p><span>ç´¢å¼•ç¤ºä¾‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> t (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; id <span class="cm-builtin">int</span> <span class="cm-keyword">comment</span> <span class="cm-string">'IDæ ‡è¯†'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; name <span class="cm-builtin">varchar</span>(<span class="cm-number">20</span>) <span class="cm-keyword">comment</span> <span class="cm-string">'å§“å'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; age <span class="cm-builtin">int</span> <span class="cm-keyword">comment</span> <span class="cm-string">'å¹´é¾„'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; addr <span class="cm-builtin">varchar</span>(<span class="cm-number">100</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">primary</span> <span class="cm-keyword">key</span> PK_ID (id),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">index</span> index_name (name)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; );</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><strong><span>2ã€å»ºè¡¨ååˆ›å»ºçº¦æŸ</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> tb_name <span class="cm-keyword">add</span>  [<span class="cm-keyword">UNIQUE</span> | <span class="cm-keyword">FULLTEXT</span> | <span class="cm-keyword">SPATIAL</span>] &nbsp;<span class="cm-keyword">INDEX</span> | <span class="cm-keyword">KEY</span>  [ç´¢å¼•å] (å­—æ®µå1 [(é•¿åº¦)] [<span class="cm-keyword">ASC</span> | <span class="cm-keyword">DESC</span>]) [<span class="cm-keyword">USING</span> ç´¢å¼•æ–¹æ³•];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">æˆ–è€…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span>  [<span class="cm-keyword">UNIQUE</span> | <span class="cm-keyword">FULLTEXT</span> | <span class="cm-keyword">SPATIAL</span>] &nbsp;<span class="cm-keyword">INDEX</span>  ç´¢å¼•å <span class="cm-keyword">ON</span>  è¡¨å(å­—æ®µå) [<span class="cm-keyword">USING</span> ç´¢å¼•æ–¹æ³•]ï¼›</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>ç¤ºä¾‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; &nbsp;<span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> t <span class="cm-keyword">add</span> <span class="cm-keyword">unique</span> <span class="cm-keyword">index</span> (addr);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><strong><span>3ã€æŸ¥çœ‹å·²åˆ›å»ºçš„ç´¢å¼•</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">index</span> <span class="cm-keyword">from</span> tb_name;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192237.png" referrerpolicy="no-referrer"></p><p><span>ã€æ³¨ã€‘ç´¢å¼•é»˜è®¤æ˜¯BTREEç´¢å¼•</span></p><p><strong><span>4ã€ç´¢å¼•çš„åˆ é™¤</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">index</span> ç´¢å¼•å <span class="cm-keyword">on</span> tb_name;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> <span class="cm-keyword">table</span> tb_name <span class="cm-keyword">drop</span> <span class="cm-keyword">index</span> ç´¢å¼•å;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><strong><span>5ã€æŸ¥çœ‹SQLè¯­å¥å¯¹ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µ</span></strong></p><p><strong><span>selectè¯­å¥ä¹‹å‰æ·»åŠ explainå³å¯</span></strong></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192234.png" referrerpolicy="no-referrer"></p><p><span>è¯·æ³¨æ„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªæŸ¥è¯¢ï¼Œä¸€ä¸ªç”¨åˆ°äº†ç´¢å¼•ï¼Œä¸€ä¸ªæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ã€‚</span></p><blockquote><p><span>BTREEç´¢å¼•è§¦å‘åŸåˆ™ï¼š</span></p><p><span>å½“ä½¿ç”¨ &gt;ã€&lt;ã€&gt;= ã€BETWEENã€!=ã€&lt;&gt;æˆ–è€…LIKE â€™pattern&#39;(</span><strong><span>å…¶ä¸­patterä¸ä»¥é€šé…ç¬¦å¼€å§‹</span></strong><span>)æ“ä½œç¬¦æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ç›¸å…³åˆ—ä¸Šçš„ç´¢å¼•ã€‚ </span></p></blockquote><p><span>explainæŸ¥è¯¢å‚æ•°ï¼š</span></p><p><strong><span>idï¼š</span></strong><span>SELECTè¯†åˆ«ç¬¦ã€‚è¿™æ˜¯SELECTçš„æŸ¥è¯¢åºåˆ—å·ã€‚</span></p><p><strong><span>select_typeï¼š</span></strong><span>SELECTç±»å‹ã€‚</span></p><ol start='' ><li><span>SIMPLEï¼š ç®€å•SELECT(ä¸ä½¿ç”¨UNIONæˆ–å­æŸ¥è¯¢)</span></li><li><span>PRIMARYï¼š æœ€å¤–é¢çš„SELECT</span></li><li><span>UNIONï¼šUNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–åé¢çš„SELECTè¯­å¥</span></li><li><span>DEPENDENT UNIONï¼šUNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–åé¢çš„SELECTè¯­å¥ï¼Œå–å†³äºå¤–é¢çš„æŸ¥è¯¢</span></li><li><span>UNION RESULTï¼šUNIONçš„ç»“æœ</span></li><li><span>SUBQUERYï¼šå­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ªSELECT</span></li><li><span>DEPENDENT SUBQUERYï¼šå­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ªSELECTï¼Œå–å†³äºå¤–é¢çš„æŸ¥è¯¢</span></li><li><span>DERIVEDï¼šå¯¼å‡ºè¡¨çš„SELECT(FROMå­å¥çš„å­æŸ¥è¯¢)</span></li></ol><p><strong><span>tableï¼š</span></strong><span>è¡¨å</span></p><p><strong><span>typeï¼š</span></strong><span>è”æ¥ç±»å‹ã€‚æ˜¯SQLæ€§èƒ½çš„éå¸¸é‡è¦çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œç»“æœå€¼ä»å¥½åˆ°åä¾æ¬¡æ˜¯ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALLã€‚</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>ä¸€èˆ¬æ¥è¯´ï¼Œå¾—ä¿è¯æŸ¥è¯¢è‡³å°‘è¾¾åˆ°rangeçº§åˆ«ã€‚</span></p><ol start='' ><li><span>systemï¼šè¡¨ä»…æœ‰ä¸€è¡Œ(=ç³»ç»Ÿè¡¨)ã€‚è¿™æ˜¯constè”æ¥ç±»å‹çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚</span></li><li><span>constï¼šè¡¨æœ€å¤šæœ‰ä¸€ä¸ªåŒ¹é…è¡Œï¼Œå®ƒå°†åœ¨æŸ¥è¯¢å¼€å§‹æ—¶è¢«è¯»å–ã€‚å› ä¸ºä»…æœ‰ä¸€è¡Œï¼Œåœ¨è¿™è¡Œçš„åˆ—å€¼å¯è¢«ä¼˜åŒ–å™¨å‰©ä½™éƒ¨åˆ†è®¤ä¸ºæ˜¯å¸¸æ•°ã€‚constç”¨äºç”¨å¸¸æ•°å€¼æ¯”è¾ƒPRIMARY KEYæˆ–UNIQUEç´¢å¼•çš„æ‰€æœ‰éƒ¨åˆ†æ—¶ã€‚</span></li><li><span>eq_refï¼šå¯¹äºæ¯ä¸ªæ¥è‡ªäºå‰é¢çš„è¡¨çš„è¡Œç»„åˆï¼Œä»è¯¥è¡¨ä¸­è¯»å–ä¸€è¡Œã€‚è¿™å¯èƒ½æ˜¯æœ€å¥½çš„è”æ¥ç±»å‹ï¼Œé™¤äº†constç±»å‹ã€‚å®ƒç”¨åœ¨ä¸€ä¸ªç´¢å¼•çš„æ‰€æœ‰éƒ¨åˆ†è¢«è”æ¥ä½¿ç”¨å¹¶ä¸”ç´¢å¼•æ˜¯UNIQUEæˆ–PRIMARY KEYã€‚eq_refå¯ä»¥ç”¨äºä½¿ç”¨= æ“ä½œç¬¦æ¯”è¾ƒçš„å¸¦ç´¢å¼•çš„åˆ—ã€‚æ¯”è¾ƒå€¼å¯ä»¥ä¸ºå¸¸é‡æˆ–ä¸€ä¸ªä½¿ç”¨åœ¨è¯¥è¡¨å‰é¢æ‰€è¯»å–çš„è¡¨çš„åˆ—çš„è¡¨è¾¾å¼ã€‚</span></li><li><span>refï¼šå¯¹äºæ¯ä¸ªæ¥è‡ªäºå‰é¢çš„è¡¨çš„è¡Œç»„åˆï¼Œæ‰€æœ‰æœ‰åŒ¹é…ç´¢å¼•å€¼çš„è¡Œå°†ä»è¿™å¼ è¡¨ä¸­è¯»å–ã€‚å¦‚æœè”æ¥åªä½¿ç”¨é”®çš„æœ€å·¦è¾¹çš„å‰ç¼€ï¼Œæˆ–å¦‚æœé”®ä¸æ˜¯UNIQUEæˆ–PRIMARY KEY(æ¢å¥è¯è¯´ï¼Œå¦‚æœè”æ¥ä¸èƒ½åŸºäºå…³é”®å­—é€‰æ‹©å•ä¸ªè¡Œçš„è¯)ï¼Œåˆ™ä½¿ç”¨refã€‚å¦‚æœä½¿ç”¨çš„é”®ä»…ä»…åŒ¹é…å°‘é‡è¡Œï¼Œè¯¥è”æ¥ç±»å‹æ˜¯ä¸é”™çš„ã€‚refå¯ä»¥ç”¨äºä½¿ç”¨=æˆ–&lt;=&gt;æ“ä½œç¬¦çš„å¸¦ç´¢å¼•çš„åˆ—ã€‚</span></li><li><span>ref_or_nullï¼šè¯¥è”æ¥ç±»å‹å¦‚åŒrefï¼Œä½†æ˜¯æ·»åŠ äº†MySQLå¯ä»¥ä¸“é—¨æœç´¢åŒ…å«NULLå€¼çš„è¡Œã€‚åœ¨è§£å†³å­æŸ¥è¯¢ä¸­ç»å¸¸ä½¿ç”¨è¯¥è”æ¥ç±»å‹çš„ä¼˜åŒ–ã€‚</span></li><li><span>index_mergeï¼šè¯¥è”æ¥ç±»å‹è¡¨ç¤ºä½¿ç”¨äº†ç´¢å¼•åˆå¹¶ä¼˜åŒ–æ–¹æ³•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œkeyåˆ—åŒ…å«äº†ä½¿ç”¨çš„ç´¢å¼•çš„æ¸…å•ï¼Œkey_lenåŒ…å«äº†ä½¿ç”¨çš„ç´¢å¼•çš„æœ€é•¿çš„å…³é”®å…ƒç´ ã€‚</span></li><li><span>unique_subqueryï¼šè¯¥ç±»å‹æ›¿æ¢äº†ä¸‹é¢å½¢å¼çš„INå­æŸ¥è¯¢çš„refï¼švalue IN (SELECT primary_key FROMsingle_table WHERE some_expr);unique_subqueryæ˜¯ä¸€ä¸ªç´¢å¼•æŸ¥æ‰¾å‡½æ•°ï¼Œå¯ä»¥å®Œå…¨æ›¿æ¢å­æŸ¥è¯¢ï¼Œæ•ˆç‡æ›´é«˜ã€‚</span></li><li><span>index_subqueryï¼šè¯¥è”æ¥ç±»å‹ç±»ä¼¼äºunique_subqueryã€‚å¯ä»¥æ›¿æ¢INå­æŸ¥è¯¢ï¼Œä½†åªé€‚åˆä¸‹åˆ—å½¢å¼çš„å­æŸ¥è¯¢ä¸­çš„éå”¯ä¸€ç´¢å¼•ï¼švalue IN (SELECT key_column FROM single_table WHERE some_expr)</span></li><li><span>rangeï¼šåªæ£€ç´¢ç»™å®šèŒƒå›´çš„è¡Œï¼Œä½¿ç”¨ä¸€ä¸ªç´¢å¼•æ¥é€‰æ‹©è¡Œã€‚keyåˆ—æ˜¾ç¤ºä½¿ç”¨äº†å“ªä¸ªç´¢å¼•ã€‚key_lenåŒ…å«æ‰€ä½¿ç”¨ç´¢å¼•çš„æœ€é•¿å…³é”®å…ƒç´ ã€‚åœ¨è¯¥ç±»å‹ä¸­refåˆ—ä¸ºNULLã€‚å½“ä½¿ç”¨=ã€&lt;&gt;ã€&gt;ã€&gt;=ã€&lt;ã€&lt;=ã€IS NULLã€&lt;=&gt;ã€BETWEENæˆ–è€…INæ“ä½œç¬¦ï¼Œç”¨å¸¸é‡æ¯”è¾ƒå…³é”®å­—åˆ—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨range</span></li><li><span>indexï¼šè¯¥è”æ¥ç±»å‹ä¸ALLç›¸åŒï¼Œé™¤äº†åªæœ‰ç´¢å¼•æ ‘è¢«æ‰«æã€‚è¿™é€šå¸¸æ¯”ALLå¿«ï¼Œå› ä¸ºç´¢å¼•æ–‡ä»¶é€šå¸¸æ¯”æ•°æ®æ–‡ä»¶å°ã€‚</span></li><li><span>allï¼šå¯¹äºæ¯ä¸ªæ¥è‡ªäºå…ˆå‰çš„è¡¨çš„è¡Œç»„åˆï¼Œè¿›è¡Œå®Œæ•´çš„è¡¨æ‰«æã€‚å¦‚æœè¡¨æ˜¯ç¬¬ä¸€ä¸ªæ²¡æ ‡è®°constçš„è¡¨ï¼Œè¿™é€šå¸¸ä¸å¥½ï¼Œå¹¶ä¸”é€šå¸¸åœ¨å®ƒæƒ…å†µä¸‹å¾ˆå·®ã€‚é€šå¸¸å¯ä»¥å¢åŠ æ›´å¤šçš„ç´¢å¼•è€Œä¸è¦ä½¿ç”¨ALLï¼Œä½¿å¾—è¡Œèƒ½åŸºäºå‰é¢çš„è¡¨ä¸­çš„å¸¸æ•°å€¼æˆ–åˆ—å€¼è¢«æ£€ç´¢å‡ºã€‚</span></li></ol><p><strong><span>possible_keysï¼š</span></strong><span>possible_keysåˆ—æŒ‡å‡ºMySQLèƒ½ä½¿ç”¨å“ªä¸ªç´¢å¼•åœ¨è¯¥è¡¨ä¸­æ‰¾åˆ°è¡Œã€‚æ³¨æ„ï¼Œè¯¥åˆ—å®Œå…¨ç‹¬ç«‹äºEXPLAINè¾“å‡ºæ‰€ç¤ºçš„è¡¨çš„æ¬¡åºã€‚è¿™æ„å‘³ç€åœ¨possible_keysä¸­çš„æŸäº›é”®å®é™…ä¸Šä¸èƒ½æŒ‰ç”Ÿæˆçš„è¡¨æ¬¡åºä½¿ç”¨ã€‚</span></p><p><strong><span>keyï¼š</span></strong><span>keyåˆ—æ˜¾ç¤ºMySQLå®é™…å†³å®šä½¿ç”¨çš„é”®(ç´¢å¼•)ã€‚å¦‚æœæ²¡æœ‰é€‰æ‹©ç´¢å¼•ï¼Œé”®æ˜¯NULLã€‚è¦æƒ³å¼ºåˆ¶MySQLä½¿ç”¨æˆ–å¿½è§†possible_keysåˆ—ä¸­çš„ç´¢å¼•ï¼Œåœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨FORCE INDEXã€USE INDEXæˆ–è€…IGNORE INDEXã€‚</span></p><p><strong><span>key_lenï¼š</span></strong><span>key_lenåˆ—æ˜¾ç¤ºMySQLå†³å®šä½¿ç”¨çš„é”®é•¿åº¦ã€‚å¦‚æœé”®æ˜¯NULLï¼Œåˆ™é•¿åº¦ä¸ºNULLã€‚æ³¨æ„é€šè¿‡key_lenå€¼æˆ‘ä»¬å¯ä»¥ç¡®å®šMySQLå°†å®é™…ä½¿ç”¨ä¸€ä¸ªå¤šéƒ¨å…³é”®å­—çš„å‡ ä¸ªéƒ¨åˆ†ã€‚</span></p><p><strong><span>refï¼š</span></strong><span>refåˆ—æ˜¾ç¤ºä½¿ç”¨å“ªä¸ªåˆ—æˆ–å¸¸æ•°ä¸keyä¸€èµ·ä»è¡¨ä¸­é€‰æ‹©è¡Œã€‚</span></p><p><strong><span>rowsï¼š</span></strong><span>rowsåˆ—æ˜¾ç¤ºMySQLè®¤ä¸ºå®ƒæ‰§è¡ŒæŸ¥è¯¢æ—¶å¿…é¡»æ£€æŸ¥çš„è¡Œæ•°ã€‚</span></p><p><strong><span>Extraï¼š</span></strong><span>è¯¥åˆ—åŒ…å«MySQLè§£å†³æŸ¥è¯¢çš„è¯¦ç»†ä¿¡æ¯ã€‚</span></p><p><a href='https://www.cnblogs.com/gomysql/p/3720123.html'><span>explainå‘½ä»¤è§£é‡Š</span></a></p><h2><a name="105-ç´¢å¼•å‘½ä¸­" class="md-header-anchor"></a><span>10.5 ç´¢å¼•å‘½ä¸­</span></h2><p><strong><span>1ã€é€šé…ç¬¦åœ¨å‰ï¼Œæ¨¡ç³ŠæŸ¥è¯¢ä¸ä½¿ç”¨ç´¢å¼•</span></strong></p><p><strong><span>2ã€unionã€inã€or éƒ½èƒ½å¤Ÿå‘½ä¸­ç´¢å¼•ï¼Œå»ºè®®ä½¿ç”¨ in</span></strong></p><p><strong><span>3ã€è”åˆç´¢å¼•æœ€å·¦å‰ç¼€åŸåˆ™ï¼ˆåˆå«æœ€å·¦ä¾§æŸ¥è¯¢ï¼‰</span></strong></p><p><span>å¦‚æœåœ¨(a,b,c)ä¸‰ä¸ªå­—æ®µä¸Šå»ºç«‹è”åˆç´¢å¼•ï¼Œé‚£ä¹ˆå®ƒèƒ½å¤ŸåŠ å¿« a | (a,b) | (a,b,c) ä¸‰ç»„æŸ¥è¯¢é€Ÿåº¦ã€‚</span></p><p><strong><span>4ã€èŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•</span></strong></p><ul><li><span>èŒƒå›´æ¡ä»¶æœ‰ï¼š&lt;ã€&lt;=ã€&gt;ã€&gt;=ã€betweenç­‰ã€‚</span></li><li><span>èŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼ˆè”åˆç´¢å¼•å¿…é¡»æ˜¯æœ€å·¦å‰ç¼€ï¼‰ï¼Œä½†æ˜¯</span><strong><span>èŒƒå›´åˆ—åé¢çš„åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•</span></strong><span>ï¼Œ</span><strong><span>ç´¢å¼•æœ€å¤šç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­æœ‰ä¸¤ä¸ªèŒƒå›´åˆ—åˆ™æ— æ³•å…¨ç”¨åˆ°ç´¢å¼•</span></strong><span>ã€‚</span></li></ul><p><span>å¦‚æœ‰ç´¢å¼• </span><code>(a,b,c,d)</code><span>ï¼ŒæŸ¥è¯¢æ¡ä»¶ </span><code>a=1 and b=2 and c&gt;3 and d=4</code><span>ï¼Œåˆ™ä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¾æ¬¡å‘½ä¸­aã€bã€cï¼Œæ— æ³•å‘½ä¸­dã€‚(cå·²ç»æ˜¯èŒƒå›´æŸ¥è¯¢äº†ï¼Œdè‚¯å®šæ˜¯æ’ä¸äº†åºäº†)</span></p><p><mark><span>èŒƒå›´æŸ¥è¯¢ä¸ä¸€å®šç”¨åˆ°ç´¢å¼•</span></mark></p><p><span>å¦‚æœç´¢å¼•åˆ—æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆå³ä½¿ç´¢å¼•åˆ—æŸ¥è¯¢ï¼Œä¹Ÿæœ‰å¯èƒ½ç”¨ä¸åˆ°ç´¢å¼•ã€‚</span></p><h2><a name="106-æœ€å·¦åŒ¹é…åŸåˆ™çš„è§£é‡Š" class="md-header-anchor"></a><span>10.6 æœ€å·¦åŒ¹é…åŸåˆ™çš„è§£é‡Š</span></h2><p><span>åˆ›å»ºè¡¨</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span><span class="cm-variable-2">` `</span><span class="cm-keyword">table</span><span class="cm-variable-2">` `</span>test(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">a <span class="cm-variable-2">``</span><span class="cm-builtin">int</span><span class="cm-variable-2">` `</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">b <span class="cm-variable-2">``</span><span class="cm-builtin">int</span><span class="cm-variable-2">``</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">c <span class="cm-variable-2">``</span><span class="cm-builtin">int</span><span class="cm-variable-2">``</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">d <span class="cm-variable-2">``</span><span class="cm-builtin">int</span><span class="cm-variable-2">``</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">key</span><span class="cm-variable-2">` `</span>index_abc(a,b,c)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)<span class="cm-keyword">engine</span>=<span class="cm-keyword">InnoDB</span> <span class="cm-variable-2">``</span><span class="cm-keyword">default</span><span class="cm-variable-2">` `</span><span class="cm-string-2">charset</span>=utf8;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><p><span>æ’å…¥10000æ¡æ•°æ®ï¼Œå½“æˆ‘åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä»¥ä¸ºä¼šå¾ˆå¿«æ‰§è¡Œï¼Œä½†æ²¡æƒ³åˆ°è¿™10000æ¡æ•°æ®å¾€ç£ç›˜å†™èŠ±è´¹äº†æ¥è¿‘2minï¼Œ</span></p><p><span>ä¸æ˜ç™½ä¸ºä»€ä¹ˆï¼Ÿ</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DROP</span><span class="cm-variable-2">` `</span><span class="cm-keyword">PROCEDURE</span><span class="cm-variable-2">` `</span><span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> proc_initData;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DELIMITER</span> $</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span><span class="cm-variable-2">` `</span><span class="cm-keyword">PROCEDURE</span><span class="cm-variable-2">` `</span>proc_initData()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">BEGIN</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span><span class="cm-variable-2">` `</span>i <span class="cm-variable-2">``</span><span class="cm-builtin">INT</span><span class="cm-variable-2">` `</span><span class="cm-keyword">DEFAULT</span><span class="cm-variable-2">` `</span><span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">WHILE</span> i&lt;=<span class="cm-number">10000</span> <span class="cm-keyword">DO</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">``</span><span class="cm-keyword">INSERT</span><span class="cm-variable-2">` `</span><span class="cm-keyword">INTO</span><span class="cm-variable-2">` `</span>test(a,b,c,d) <span class="cm-variable-2">``</span><span class="cm-keyword">VALUES</span><span class="cm-variable-2">``</span>(i,i,i,i);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">``</span><span class="cm-keyword">SET</span><span class="cm-variable-2">` `</span>i = i+<span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">END</span><span class="cm-variable-2">` `</span><span class="cm-keyword">WHILE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">END</span><span class="cm-variable-2">` `</span>$</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CALL</span> proc_initData();</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><p><span>explain select * from test where a&lt;10 ;</span></p><p><span>explain select * from test where a&lt;10 and b &lt;10;</span></p><p><span>explain select * from test where a&lt;10 and b &lt;10 and c&lt;10;</span></p><p><span>ä¸Šè¿°æŸ¥è¯¢éƒ½æ˜¾ç¤ºç”¨åˆ°äº†ç»„åˆç´¢å¼•ï¼Œä½†æ˜¯è€ƒè™‘ä¸‹é¢è¿™ç§æƒ…å†µï¼š</span></p><p><span>explain select * from test where b&lt;10 and a &lt;10;</span></p><p><span>explain select * from test where b&lt;10 and a &lt;10 and c&lt;10;</span></p><p><span>explainæ˜¾ç¤ºæŸ¥è¯¢ä¹Ÿç”¨åˆ°äº†ç´¢å¼•ï¼Œä¸æ˜¯æœ€å·¦åŒ¹é…å—ï¼Ÿ</span></p><p><strong><span>mysqlä¼šè‡ªåŠ¨ä¼˜åŒ–è¿™äº›æ¡ä»¶çš„é¡ºåºï¼Œä»¥åŒ¹é…å°½å¯èƒ½å¤šçš„ç´¢å¼•åˆ—ã€‚</span></strong></p><p><span>å…¶å®ï¼ŒmysqlæŸ¥è¯¢ä¼˜åŒ–å™¨å¸®æˆ‘ä»¬è§£æçº æ­£è¿™æ¡è¯­å¥ä»¥ä»€ä¹ˆæ ·çš„é¡ºåºæ‰§è¡Œæ•ˆç‡æœ€é«˜ï¼Œæœ‰ç‚¹è‡ªåŠ¨æ ¡æ­£çš„æ„æ€ã€‚</span></p><p><span>ä½†æ˜¯å¦‚æœæ‰§è¡Œ</span></p><p><span>explain select * from test where b&lt;10 and c &lt;10;</span></p><p><span>explain select * from test where a&lt;10 and c &lt;10;</span></p><p><span>ä¼šå‘ç°</span><strong><span>b&lt;10 and c &lt;10,æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼Ÿè€Œ a&lt;10 and c &lt;10ç”¨åˆ°äº†ï¼Ÿ</span></strong></p><p><span>å› ä¸ºB+æ ‘çš„æ•°æ®é¡¹æ˜¯å¤åˆçš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚å»ºç«‹ç»„åˆç´¢å¼•(name,age,sex),B+æ ‘æ˜¯ä»å·¦åˆ°å³æ¥å»ºç«‹æœç´¢æ ‘çš„ï¼Œæ¯”å¦‚æŸ¥è¯¢(å¼ ä¸‰,20,F)ï¼Œb+æ ‘ä¼š</span><strong><span>ä¼˜å…ˆæ¯”è¾ƒnameæ¥ç¡®å®šä¸‹ä¸€æ­¥çš„æ‰€æœæ–¹å‘</span></strong><span>ï¼Œå¦‚æœnameç›¸åŒå†ä¾æ¬¡æ¯”è¾ƒageå’Œsexï¼Œæœ€åå¾—åˆ°æ£€ç´¢çš„æ•°æ®ï¼›ä½†å½“(20,F)è¿™æ ·çš„æ²¡æœ‰nameçš„æ•°æ®çš„æ—¶å€™ï¼Œb+æ ‘å°±ä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥æŸ¥å“ªä¸ªèŠ‚ç‚¹ï¼Œå› ä¸ºå»ºç«‹æœç´¢æ ‘çš„æ—¶å€™nameå°±æ˜¯ç¬¬ä¸€ä¸ªæ¯”è¾ƒå› å­ï¼Œå¿…é¡»è¦å…ˆæ ¹æ®nameæ¥æœç´¢æ‰èƒ½çŸ¥é“ä¸‹ä¸€æ­¥å»å“ªé‡ŒæŸ¥è¯¢ã€‚æ¯”å¦‚å½“(å¼ ä¸‰,F)è¿™æ ·çš„æ•°æ®æ¥æ£€ç´¢æ—¶ï¼Œb+æ ‘å¯ä»¥ç”¨nameæ¥æŒ‡å®šæœç´¢æ–¹å‘ï¼Œä½†ä¸‹ä¸€ä¸ªå­—æ®µageçš„ç¼ºå¤±ï¼Œæ‰€ä»¥åªèƒ½æŠŠåå­—ç­‰äºå¼ ä¸‰çš„æ•°æ®éƒ½æ‰¾åˆ°ï¼Œç„¶åå†åŒ¹é…æ€§åˆ«æ˜¯Fçš„æ•°æ®äº†ï¼Œ è¿™ä¸ªæ˜¯éå¸¸é‡è¦çš„æ€§è´¨ï¼Œå³ç´¢å¼•çš„æœ€å·¦åŒ¹é…ç‰¹æ€§ã€‚</span></p><h1><a name="11-è§†å›¾" class="md-header-anchor"></a><span>11. è§†å›¾</span></h1><h2><a name="111-ä»€ä¹ˆæ˜¯è§†å›¾" class="md-header-anchor"></a><span>11.1 ä»€ä¹ˆæ˜¯è§†å›¾</span></h2><p><span>	</span><span>è§†å›¾æ˜¯ä¸€ç§</span><strong><span>è™šæ‹Ÿå­˜åœ¨</span></strong><span>çš„è¡¨ï¼Œå¹¶</span><strong><span>ä¸åœ¨æ•°æ®åº“ä¸­å®é™…å­˜åœ¨</span></strong><span>ï¼Œå¯¹ç”¨æˆ·é€æ˜ï¼Œè¡Œåˆ—æ•°æ®æ¥è‡ªå®šä¹‰è§†å›¾çš„æŸ¥è¯¢ä¸­ä½¿ç”¨çš„è¡¨ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­åŠ¨æ€ç”Ÿæˆçš„ã€‚</span></p><p><span>è§†å›¾ç›¸å¯¹äºæ™®é€šè¡¨çš„ä¼˜åŠ¿ä¸»è¦åŒ…æ‹¬ï¼š</span></p><ul><li><span>ç®€å•ï¼šä½¿ç”¨è§†å›¾çš„ç”¨æˆ·æ— éœ€å…³å¿ƒæŸ¥è¯¢çš„æ•°æ®åé¢å¯¹åº”çš„è¡¨ç»“æ„ã€å…³è”æ¡ä»¶ç­‰ã€‚ç”¨æˆ·é€æ˜ã€‚å¯¹ç”¨æˆ·æ¥è¯´æ˜¯å·²ç»è¿‡æ»¤å¥½çš„ç¬¦åˆæ¡ä»¶çš„ç»“æœé›†ã€‚</span></li><li><span>å®‰å…¨ï¼šä½¿ç”¨è§†å›¾çš„ç”¨æˆ·åªèƒ½è®¿é—®ä»–ä»¬è¢«å…è®¸æŸ¥è¯¢çš„ç»“æœé›†ã€‚</span></li><li><span>æ•°æ®ç‹¬ç«‹ï¼šå¯¹åŸè¡¨å¢åŠ åˆ—å¹¶ä¸ä¼šå½±å“è§†å›¾ï¼ŒåŸè¡¨ä¿®æ”¹åˆ—åï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹è§†å›¾æ¥ä¿®æ”¹ç»“æ„ï¼Œä¸ä¼šé€ æˆå¯¹è®¿é—®è€…çš„å½±å“ã€‚</span></li></ul><h2><a name="112-è§†å›¾æ“ä½œ" class="md-header-anchor"></a><span>11.2 è§†å›¾æ“ä½œ</span></h2><h3><a name="1121-åˆ›å»ºæˆ–è€…ä¿®æ”¹è§†å›¾" class="md-header-anchor"></a><span>11.2.1 åˆ›å»ºæˆ–è€…ä¿®æ”¹è§†å›¾</span></h3><p><span>åˆ›å»ºè§†å›¾çš„è¯­æ³•ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> [<span class="cm-keyword">or</span> <span class="cm-keyword">replace</span>][<span class="cm-keyword">algorithm</span>={undefined|merge|temptable}]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">view</span> view_name [(column_list)]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">as</span> select_statement</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">with</span> [<span class="cm-keyword">cascaded</span>|<span class="cm-keyword">local</span>] <span class="cm-keyword">check</span> <span class="cm-keyword">option</span>];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>ä¿®æ”¹è§†å›¾çš„è¯­æ³•ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">alter</span> [<span class="cm-keyword">or</span> <span class="cm-keyword">replace</span>][<span class="cm-keyword">algorithm</span>={undefined|merge|temptable}]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">view</span> view_name [(column_list)]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">as</span> select_statement</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">with</span> [<span class="cm-keyword">cascaded</span>|<span class="cm-keyword">local</span>] <span class="cm-keyword">check</span> <span class="cm-keyword">option</span>];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>æ–°å¢å‘˜å·¥è¡¨å’Œåœ°å€è¡¨ï¼Œåœ°å€è¡¨çš„address_idæ˜¯å‘˜å·¥è¡¨çš„å¤–é”®ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> <span class="cm-string">"address"</span> (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"address_id"</span> <span class="cm-builtin">int</span>(<span class="cm-number">11</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"address"</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">100</span>) <span class="cm-keyword">DEFAULT</span> <span class="cm-atom">NULL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span> (<span class="cm-string">"address_id"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> <span class="cm-string">"staff"</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"staff_id"</span> <span class="cm-builtin">int</span>(<span class="cm-number">11</span>) <span class="cm-keyword">NOT</span> <span class="cm-atom">NULL</span> <span class="cm-keyword">AUTO_INCREMENT</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"address_id"</span> <span class="cm-builtin">int</span>(<span class="cm-number">11</span>) <span class="cm-keyword">DEFAULT</span> <span class="cm-atom">NULL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"first_name"</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">20</span>) <span class="cm-keyword">DEFAULT</span> <span class="cm-atom">NULL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"last_name"</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">20</span>) <span class="cm-keyword">DEFAULT</span> <span class="cm-atom">NULL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">PRIMARY</span> <span class="cm-keyword">KEY</span> (<span class="cm-string">"staff_id"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">KEY</span> <span class="cm-string">"address_id"</span> (<span class="cm-string">"address_id"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">CONSTRAINT</span> <span class="cm-string">"staff_ibfk_1"</span> <span class="cm-keyword">FOREIGN</span> <span class="cm-keyword">KEY</span> (<span class="cm-string">"address_id"</span>) <span class="cm-keyword">REFERENCES</span> <span class="cm-string">"address"</span> (<span class="cm-string">"address_id"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ›å»ºè§†å›¾</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">view</span> staff_list_view</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">as</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> s<span class="cm-variable-2">.staff_id</span>,s<span class="cm-variable-2">.first_name</span>,s<span class="cm-variable-2">.last_name</span>,a<span class="cm-variable-2">.address</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">from</span> staff <span class="cm-keyword">as</span> s, address a</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">where</span> s<span class="cm-variable-2">.address_id</span> = a<span class="cm-variable-2">.address_id</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 529px;"></div><div class="CodeMirror-gutters" style="display: none; height: 529px;"></div></div></div></pre><p><span>è§†å›¾çš„å¯æ›´æ–°æ€§å’Œè§†å›¾ä¸­æŸ¥è¯¢çš„å®šä¹‰æœ‰å…³ç³»ï¼Œä»¥ä¸‹ç±»å‹çš„è§†å›¾æ˜¯ä¸å¯æ›´æ–°çš„ã€‚</span></p><ul><li><span>åŒ…å«ä»¥ä¸‹å…³é”®å­—çš„ SQL è¯­å¥ï¼šèšåˆå‡½æ•°ï¼ˆSUMã€MINã€MAXã€COUNT ç­‰ï¼‰ã€DISTINCTã€GROUP BYã€HAVINGã€UNION æˆ–è€… UNION ALLã€‚ </span></li><li><span>å¸¸é‡è§†å›¾ã€‚ </span></li><li><span>SELECT ä¸­åŒ…å«å­æŸ¥è¯¢ã€‚ </span></li><li><span>JOINã€‚ </span></li><li><span>FROM ä¸€ä¸ªä¸èƒ½æ›´æ–°çš„è§†å›¾ã€‚ </span></li><li><span>WHERE å­—å¥çš„å­æŸ¥è¯¢å¼•ç”¨äº† FROM å­—å¥ä¸­çš„è¡¨</span></li></ul><p><code>WITH [CASCADED | LOCAL] CHECK OPTION</code><span>å†³å®šäº†æ˜¯å¦å…è®¸æ›´æ–°æ•°æ®ä½¿è®°å½•ä¸å†æ»¡è¶³è§†å›¾çš„æ¡</span>
<span>ä»¶ã€‚è¿™ä¸ªé€‰é¡¹ä¸ Oracle æ•°æ®åº“ä¸­çš„é€‰é¡¹æ˜¯ç±»ä¼¼çš„ï¼Œå…¶ä¸­ï¼š </span></p><ul><li><span>LOCAL æ˜¯åªè¦æ»¡è¶³æœ¬è§†å›¾çš„æ¡ä»¶å°±å¯ä»¥æ›´æ–°ï¼› </span></li><li><span>CASCADED åˆ™æ˜¯å¿…é¡»æ»¡è¶³æ‰€æœ‰é’ˆå¯¹è¯¥è§†å›¾çš„æ‰€æœ‰è§†å›¾çš„æ¡ä»¶æ‰å¯ä»¥æ›´æ–°ã€‚</span></li></ul><p><span>å¦‚æœæ²¡æœ‰æ˜ç¡®æ˜¯ LOCAL è¿˜æ˜¯ CASCADEDï¼Œåˆ™é»˜è®¤æ˜¯ CASCADEDã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">view</span> payment_view <span class="cm-keyword">as</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> payment_id,amount <span class="cm-keyword">from</span> payment &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">where</span> amount &lt; <span class="cm-number">10</span> <span class="cm-keyword">WITH</span> <span class="cm-keyword">CHECK</span> <span class="cm-keyword">OPTION</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">view</span> payment_view1 <span class="cm-keyword">as</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> payment_id,amount <span class="cm-keyword">from</span> payment_view &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">where</span> amount &gt; <span class="cm-number">5</span> <span class="cm-keyword">WITH</span> <span class="cm-keyword">LOCAL</span> <span class="cm-keyword">CHECK</span> <span class="cm-keyword">OPTION</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">or</span> <span class="cm-keyword">replace</span> <span class="cm-keyword">view</span> payment_view2 <span class="cm-keyword">as</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> payment_id,amount <span class="cm-keyword">from</span> payment_view &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">where</span> amount &gt; <span class="cm-number">5</span> <span class="cm-keyword">WITH</span> <span class="cm-keyword">CASCADED</span> <span class="cm-keyword">CHECK</span> <span class="cm-keyword">OPTION</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment"># æŒ‰ä¹¦ä¸­æ¥è¯´ï¼Œä¸‹é¢åº”è¯¥æ›´æ–°æˆåŠŸ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">update</span> payment_view1 <span class="cm-keyword">set</span> amount=<span class="cm-number">11</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">where</span> payment_id = <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment"># è¿™å¥åº”è¯¥æ›´æ–°å¤±è´¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">update</span> payment_view2 <span class="cm-keyword">set</span> amount=<span class="cm-number">11</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">where</span> payment_id = <span class="cm-number">1</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><blockquote><p><span>å®é™…åœ¨MySQL5.6æµ‹è¯•æ—¶ï¼Œå»ºç«‹åœ¨payment_viewä¸Šé¢çš„ä¸¤å±‚è§†å›¾ï¼Œæ— è®ºå“ªä¸ªéƒ½æ˜¯éƒ½æ˜¯å¤±è´¥çš„ï¼</span></p></blockquote><h3><a name="1122-åˆ é™¤è§†å›¾" class="md-header-anchor"></a><span>11.2.2 åˆ é™¤è§†å›¾</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">view</span> [<span class="cm-keyword">if</span> <span class="cm-keyword">exists</span>] view_name [, view_name] ... [<span class="cm-keyword">restrict</span> | <span class="cm-keyword">cascade</span>];</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3><a name="1123-æŸ¥çœ‹è§†å›¾" class="md-header-anchor"></a><span>11.2.3 æŸ¥çœ‹è§†å›¾</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> <span class="cm-keyword">view</span> view_name</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h1><a name="12-å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°" class="md-header-anchor"></a><span>12. å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°</span></h1><p><span>MySQLå®˜æ–¹æ–‡æ¡£æœ‰</span><strong><span>å­˜å‚¨ä¾‹ç¨‹</span></strong><span>(Store routines)ä¸€è¯´ï¼Œå®ƒçš„ä¸¤ç§ç±»å‹å°±æ˜¯å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ã€‚</span></p><h2><a name="121-ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°" class="md-header-anchor"></a><span>12.1 ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°</span></h2><p><span>å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°æ˜¯äº‹å…ˆç»è¿‡ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„</span><strong><span>ä¸€æ®µSQLè¯­å¥çš„é›†åˆ</span></strong><span>ã€‚å¯ä»¥æŠŠä¸€äº›å¤æ‚çš„æ•°æ®å¤„ç†é€»è¾‘å°è£…åœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ï¼Œè¿™æ ·å°±å‡è½»äº†åç«¯äººå‘˜ç¼–å†™SQLè¯­å¥çš„è´Ÿæ‹…ï¼Œæé«˜äº†æ•°æ®å¤„ç†çš„æ•ˆç‡ã€‚</span></p><p><strong><span>å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„åŒºåˆ«ï¼š</span></strong></p><ul><li><span>å‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æ²¡æœ‰ã€‚</span></li><li><span>å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°å¯ä»¥ä½¿ç”¨INã€OUTã€INOUTç±»å‹ï¼Œå‡½æ•°çš„å‚æ•°åªèƒ½æ˜¯INç±»å‹ã€‚çœç•¥åˆ™é»˜è®¤å‚æ•°ç±»å‹ä¸ºINã€‚</span></li></ul><h2><a name="122-å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„ç›¸å…³æ“ä½œ" class="md-header-anchor"></a><span>12.2 å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„ç›¸å…³æ“ä½œ</span></h2><p><span>å¯¹å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°æ“ä½œæ—¶ï¼Œéœ€è¦ç”¨æˆ·æœ‰ç›¸åº”çš„æƒé™ã€‚åˆ›å»ºå­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°éœ€è¦ CREATE ROUTINE æƒé™ï¼Œä¿®æ”¹æˆ–è€…åˆ é™¤å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°éœ€è¦ ALTER ROUTINE æƒé™ï¼Œæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°éœ€è¦ EXECUTE æƒé™ã€‚</span></p><blockquote><p><strong><span>é€šå¸¸begin-endç”¨äºå®šä¹‰ä¸€ç»„è¯­å¥å—ï¼Œåœ¨å„å¤§æ•°æ®åº“ä¸­çš„å®¢æˆ·ç«¯å·¥å…·ä¸­å¯ç›´æ¥è°ƒç”¨ï¼Œä½†åœ¨mysqlä¸­ä¸å¯ç”¨ã€‚</span></strong></p><p><strong><span>begin-endã€æµç¨‹æ§åˆ¶è¯­å¥ã€å±€éƒ¨å˜é‡åªèƒ½ç”¨äºå‡½æ•°ã€å­˜å‚¨è¿‡ç¨‹å†…éƒ¨ã€æ¸¸æ ‡ã€è§¦å‘å™¨çš„å®šä¹‰å†…éƒ¨ã€‚</span></strong></p></blockquote><h3><a name="1221-å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°åˆ›å»º" class="md-header-anchor"></a><span>12.2.1 å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°åˆ›å»º</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [DEFINER = <span class="cm-keyword">user</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">PROCEDURE</span> sp_name ([proc_parameter[,...]])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [characteristic ...] routine_body</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [DEFINER = <span class="cm-keyword">user</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">FUNCTION</span> sp_name ([func_parameter[,...]])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">RETURNS</span> type</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [characteristic ...] routine_body</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">proc_parameter:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [ <span class="cm-keyword">IN</span> | <span class="cm-keyword">OUT</span> | <span class="cm-keyword">INOUT</span> ] param_name type</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">func_parameter:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  param_name type</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">type:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Any valid MySQL <span class="cm-keyword">data</span> type</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">characteristic: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">COMMENT</span> <span class="cm-string">'string'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">LANGUAGE</span> <span class="cm-keyword">SQL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | [<span class="cm-keyword">NOT</span>] <span class="cm-keyword">DETERMINISTIC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | { <span class="cm-keyword">CONTAINS</span> <span class="cm-keyword">SQL</span> | <span class="cm-keyword">NO</span> <span class="cm-keyword">SQL</span> | <span class="cm-keyword">READS</span> <span class="cm-keyword">SQL</span> <span class="cm-keyword">DATA</span> | <span class="cm-keyword">MODIFIES</span> <span class="cm-keyword">SQL</span> <span class="cm-keyword">DATA</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">SQL</span> <span class="cm-keyword">SECURITY</span> { DEFINER | <span class="cm-keyword">INVOKER</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">routine_body:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Valid <span class="cm-keyword">SQL</span> routine statement</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 690px;"></div><div class="CodeMirror-gutters" style="display: none; height: 690px;"></div></div></div></pre><p><span>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­˜å‚¨è¿‡ç¨‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">call</span> proc_name(...);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å‡½æ•°ï¼šç›´æ¥åœ¨è¡¨è¾¾å¼ä¸­å¼•ç”¨å³å¯ï¼Œå’Œè°ƒç”¨SQLå†…éƒ¨å‡½æ•°ä¸€æ ·</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">func_name();</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼Œè¯¥å­˜å‚¨è¿‡ç¨‹ç»™å®šäº†å›½å®¶ï¼ˆåœ°åŒºï¼‰ä»£ç ï¼Œè®¡ç®—äº†å‡ºç°åœ¨å›½å®¶è¡¨ä¸­ç›¸åŒå›½å®¶ä»£ç çš„åŸå¸‚æ•°ã€‚ä½¿ç”¨INå‚æ•°ä¼ é€’å›½å®¶/åœ°åŒºä»£ç ï¼Œå¹¶ä½¿ç”¨OUTå‚æ•°è¿”å›åŸå¸‚è®¡æ•°ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> <span class="cm-string">"country"</span> (</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"country_code"</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">11</span>) <span class="cm-keyword">DEFAULT</span> <span class="cm-atom">NULL</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"city"</span> <span class="cm-builtin">varchar</span>(<span class="cm-number">11</span>) <span class="cm-keyword">DEFAULT</span> <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¿®æ”¹å®šç•Œç¬¦,é˜²æ­¢mysqlåœ¨é‡åˆ°â€œ;â€è¢«è§£é‡Šä¸ºç»“æŸç¬¦, codeæ˜¯mysqlä¿ç•™çš„å…³é”®å­—</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> //;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">PROCEDURE</span> citycount(<span class="cm-keyword">in</span> ccode <span class="cm-builtin">varchar</span>(<span class="cm-number">11</span>), <span class="cm-keyword">out</span> cities <span class="cm-builtin">varchar</span>(<span class="cm-number">11</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-keyword">count</span>(*) <span class="cm-keyword">into</span> cities <span class="cm-keyword">from</span> country</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">where</span> country_code=ccode;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">//</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å°†ç»“æŸå®šç•Œç¬¦å¤åŸ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># è°ƒç”¨å­˜å‚¨è¿‡ç¨‹,è¿™é‡Œçš„@citiesç›¸å½“äºä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå¯ä»¥é€šè¿‡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># select @cities;æŸ¥çœ‹ç»“æœ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">call</span> citycount(<span class="cm-string">'CN'</span>, <span class="cm-variable-2">@cities</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 437px;"></div><div class="CodeMirror-gutters" style="display: none; height: 437px;"></div></div></div></pre><p><span>å®šç•Œç¬¦å› éœ€é€‰æ‹©ï¼Œæ¯”å¦‚ä¸‹é¢å­˜å‚¨å‡½æ•°å°±æ²¡æœ‰ä½¿ç”¨ï¼Œå› ä¸ºå°±åªæœ‰å•æ¡è¯­å¥ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">function</span> hello(s <span class="cm-builtin">char</span>(<span class="cm-number">20</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">returns</span> <span class="cm-builtin">char</span>(<span class="cm-number">50</span>) <span class="cm-keyword">deterministic</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  -&gt; <span class="cm-keyword">return</span> concat(<span class="cm-string">'hello, '</span>,s,<span class="cm-string">'!'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> hello(<span class="cm-string">'world'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hello(<span class="cm-string">'world'</span>) |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| hello, world!  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+----------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><blockquote><p><span>å…³äºcharacteristicç‰¹å¾å€¼çš„è¯´æ˜è¿™é‡Œä¸å†è®°å½•ï¼Œè¯¦æƒ…å¯ä»¥çœ‹ä¹¦æˆ–è€…å®˜æ–¹æ–‡æ¡£ã€‚</span></p></blockquote><h3><a name="1222-åˆ é™¤å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°" class="md-header-anchor"></a><span>12.2.2 åˆ é™¤å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DROP</span> {PROCEDURE | <span class="cm-keyword">FUNCTION</span>} [<span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span>] sp_name;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><h3><a name="1223-æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°" class="md-header-anchor"></a><span>12.2.3 æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‡½æ•°</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">create</span> {PROCEDURE | <span class="cm-keyword">FUNCTION</span>} sp_name;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> {PROCEDURE | <span class="cm-keyword">FUNCTION</span>} <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-variable-2">\G</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ...å…·ä½“å°±æ˜¯ç»“æœä¸åŒ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># show create æŸ¥è¯¢çš„æ˜¯ æŸç»“æ„çš„ å®šä¹‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># show status æŸ¥è¯¢çš„æ˜¯ æŸç»“æ„çš„ çŠ¶æ€</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><h3><a name="1224-å˜é‡çš„å£°æ˜åŠä½¿ç”¨" class="md-header-anchor"></a><span>12.2.4 å˜é‡çš„å£°æ˜åŠä½¿ç”¨</span></h3><p><strong><span>MySQLå˜é‡çš„åˆ†ç±»</span></strong></p><p><span> MySQLå˜é‡åˆ†ä¸ºï¼š</span><strong><span>å±€éƒ¨å˜é‡ã€ç”¨æˆ·å˜é‡ã€ä¼šè¯å˜é‡å’Œå…¨å±€å˜é‡ã€‚</span></strong><span>å…¨å±€å˜é‡å’Œä¼šè¯å˜é‡åˆç§°ä¸º</span><strong><span>ç³»ç»Ÿå˜é‡</span></strong><span>ã€‚</span></p><p><span>(1)å±€éƒ¨å˜é‡</span></p><p><span>ä¸€èˆ¬ç”¨äºsqlè¯­å¥å—ï¼Œæ¯”å¦‚store_routinesçš„begin/endã€‚ä½œç”¨åŸŸä»…é™äºè¯¥è¯­å¥å—ï¼Œç”Ÿå‘½å‘¨æœŸéšè¯­å¥å—è€Œå­˜æ´»ã€‚</span></p><p><span>ä¸€èˆ¬ç”¨æ³•ï¼š</span><strong><span>declareå£°æ˜ï¼Œsetæˆ–è€…select ...into èµ‹å€¼</span></strong><span>ã€‚</span></p><p><span>(2)ç”¨æˆ·å˜é‡</span></p><p><code>@var_name</code><span>å½¢å¼çš„å˜é‡ä¸ºç”¨æˆ·å˜é‡ï¼Œç”¨æˆ·å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸æœ¬æ¬¡è¿æ¥ï¼ˆsessionï¼‰æœ‰å…³ï¼Œå½“æœ¬æ¬¡ä¼šè¯ç»“æŸï¼Œè¿æ¥ä¸­æ‰€æœ‰å®šä¹‰çš„ç”¨æˆ·å˜é‡éƒ½ä¼šæ¶ˆå¤±ï¼Œä¸”å„ä¸ªè¿æ¥ä¸­çš„ç”¨æˆ·å˜é‡äº’ä¸å¯è§ã€‚</span></p><p><span>ä¸€èˆ¬ç”¨æ³•ï¼š</span><strong><span>set @var_name=value; set @var_name:=value;æˆ–è€… select @var_name:=value;select @num:=å­—æ®µå from è¡¨å where â€¦â€¦</span></strong></p><p><span>ç”¨æˆ·å˜é‡ä¸éœ€è¦å£°æ˜ï¼Œèµ‹åˆå€¼çš„è¿‡ç¨‹å³å£°æ˜å’Œå®šä¹‰ï¼Œä¸€èµ·åšäº†ã€‚</span><strong><span>å£°æ˜åŠå®šä¹‰ç„¶åå†èµ‹å€¼</span></strong></p><p><span>(3)ä¼šè¯å˜é‡å’Œå…¨å±€å˜é‡</span></p><p><span>sessionå’Œgloballã€‚</span></p><p><strong><span>1ã€å˜é‡çš„å®šä¹‰</span></strong></p><p><span>æ ¼å¼ï¼š</span><code>DECLARE var_name[,...] type [DEFAULT value]</code></p><p><span>é€šè¿‡ DECLARE å¯ä»¥å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œ</span><strong><span>è¯¥å˜é‡çš„ä½œç”¨èŒƒå›´åªèƒ½åœ¨ BEGINâ€¦END å—ä¸­</span></strong><span>ï¼Œå¯ä»¥ç”¨åœ¨åµŒå¥—çš„å—ä¸­ã€‚å˜é‡çš„å®šä¹‰å¿…é¡»å†™åœ¨å¤åˆè¯­å¥çš„å¼€å¤´ï¼Œå¹¶ä¸”åœ¨ä»»ä½•å…¶ä»–è¯­å¥çš„å‰é¢ã€‚å¯ä»¥ä¸€æ¬¡å£°æ˜å¤šä¸ªç›¸åŒç±»å‹çš„å˜é‡ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ DEFAULT èµ‹é»˜è®¤å€¼ã€‚</span></p><p><strong><span>2ã€å˜é‡çš„èµ‹å€¼</span></strong></p><p><strong><span>å˜é‡å¯ä»¥ç›´æ¥èµ‹å€¼ï¼Œæˆ–è€…é€šè¿‡æŸ¥è¯¢èµ‹å€¼</span></strong></p><p><span>æ ¼å¼ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># setèµ‹å€¼å¯ä»¥æ˜¯å¸¸é‡æˆ–è€…è¡¨è¾¾å¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> var_name = expr [,var name = expr]...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥è¯¢èµ‹å€¼ï¼Œè¦æ±‚æŸ¥è¯¢è¿”å›çš„ç»“æœå¿…é¡»åªæœ‰ä¸€è¡Œ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> col_name[,...] <span class="cm-keyword">into</span> var_name[,...] table_expr;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><blockquote><p><span>declare å£°æ˜å˜é‡ï¼Œsetæˆ–è€…select...intoä¸ºå˜é‡èµ‹å€¼ã€‚</span></p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># setæ–¹å¼èµ‹å€¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> //</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">function</span> addSum(a <span class="cm-builtin">int</span>,b <span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">returns</span> <span class="cm-builtin">int</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">declare</span> <span class="cm-keyword">sum</span> <span class="cm-builtin">int</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> <span class="cm-keyword">sum</span> = a + b;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">return</span> <span class="cm-keyword">sum</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">//</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥è¯¢èµ‹å€¼</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> //</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">function</span> addSum(a <span class="cm-builtin">int</span>,b <span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">returns</span> <span class="cm-builtin">int</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">declare</span> <span class="cm-keyword">sum</span> <span class="cm-builtin">int</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> a+b <span class="cm-keyword">into</span> <span class="cm-keyword">sum</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">return</span> <span class="cm-keyword">sum</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">//</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 460px;"></div><div class="CodeMirror-gutters" style="display: none; height: 460px;"></div></div></div></pre><h3><a name="1225-å®šä¹‰æ¡ä»¶å’Œå¤„ç†" class="md-header-anchor"></a><span>12.2.5 å®šä¹‰æ¡ä»¶å’Œå¤„ç†</span></h3><p><span>æ¡ä»¶çš„å®šä¹‰å’Œå¤„ç†å¯ä»¥ç”¨æ¥å®šä¹‰åœ¨å¤„ç†è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æ—¶ç›¸åº”çš„å¤„ç†æ­¥éª¤ã€‚</span></p><p><strong><span>1ã€æ¡ä»¶çš„å®šä¹‰</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> condition_name <span class="cm-keyword">CONDITION</span> <span class="cm-keyword">FOR</span> condition_value</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">condition_value: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  mysql_error_code</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">SQLSTATE</span> [<span class="cm-keyword">VALUE</span>] sqlstate_value</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># mysql_error_code: An integer literal indicating a MySQL error code.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># SQLSTATE [VALUE] sqlstate_value: A 5-character string literal indicating an SQLSTATE value.</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p><strong><span>2ã€æ¡ä»¶çš„å¤„ç†</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> handler_action <span class="cm-keyword">HANDLER</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">FOR</span> condition_value [, condition_value] ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  statement</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">handler_action: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">CONTINUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">EXIT</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">UNDO</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">condition_value: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  mysql_error_code</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">SQLSTATE</span> [<span class="cm-keyword">VALUE</span>] sqlstate_value</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | condition_name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">SQLWARNING</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">NOT</span> FOUND</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | <span class="cm-keyword">SQLEXCEPTION</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 391px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><p><span>å½“è°ƒç”¨å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œå…¶ä¸­çš„SQLæ—¶å‘ç”Ÿå†…éƒ¨é”™è¯¯æ—¶ï¼Œå¦‚æœä½¿ç”¨äº†æ¡ä»¶å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘æ¡ä»¶å¤„ç†çš„actionï¼Œå®ƒæœ‰ä¸‰ä¸ªå€¼åˆ†åˆ«ä»£è¡¨ï¼š</span></p><ul><li><span>CONTINUE è¡¨ç¤ºç»§ç»­æ‰§è¡Œä¸‹é¢çš„è¯­å¥</span></li><li><span>EXIT åˆ™è¡¨ç¤ºæ‰§è¡Œç»ˆæ­¢</span></li><li><span>UNDO ç°åœ¨è¿˜ä¸æ”¯æŒ</span></li></ul><p><span>condition_value çš„å€¼å¯ä»¥æ˜¯é€šè¿‡ DECLARE å®šä¹‰çš„ condition_nameï¼Œå¯ä»¥æ˜¯ SQLSTATE çš„å€¼æˆ–è€… mysql-error-code çš„å€¼æˆ–è€… SQLWARNINGã€NOT FOUNDã€SQLEXCEPTIONï¼Œè¿™ 3 ä¸ªå€¼æ˜¯ 3 ç§å®šä¹‰å¥½çš„é”™è¯¯ç±»åˆ«ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçš„å«ä¹‰ã€‚ </span></p><ul><li><span>SQLWARNING æ˜¯å¯¹æ‰€æœ‰ä»¥ 01 å¼€å¤´çš„ SQLSTATE ä»£ç çš„é€Ÿè®°ã€‚ </span></li><li><span>NOT FOUND æ˜¯å¯¹æ‰€æœ‰ä»¥ 02 å¼€å¤´çš„ SQLSTATE ä»£ç çš„é€Ÿè®°ã€‚ </span></li><li><span>SQLEXCEPTION æ˜¯å¯¹æ‰€æœ‰æ²¡æœ‰è¢« SQLWARNING æˆ– NOT FOUND æ•è·çš„ SQLSTATE ä»£ç çš„é€Ÿè®°ã€‚</span></li></ul><p><span>å‘staffè¡¨ä¸­æ’å…¥é‡å¤ä¸»é”®çš„è®°å½•ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸å¤„ç†ï¼Œx=3å°±ä¸ä¼šæ‰§è¡Œï¼Œæˆ‘ä»¬å¸Œæœ›å¼‚å¸¸å‘ç”Ÿåï¼Œç»§ç»­å¾€åæ‰§è¡Œï¼Œè¿™æ—¶å°±éœ€è¦å¼‚å¸¸å¤„ç†ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> DEFINER=<span class="cm-string">"stronger"</span><span class="cm-variable-2">@"%" PROCEDURE "staff_insert"</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">BEGIN</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> <span class="cm-keyword">continue</span> <span class="cm-keyword">handler</span> <span class="cm-keyword">for</span> <span class="cm-keyword">sqlstate</span> <span class="cm-string">'23000'</span> <span class="cm-keyword">set</span> <span class="cm-variable-2">@x2</span>=<span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@x</span> = <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> staff <span class="cm-keyword">values</span>(<span class="cm-number">2</span>, <span class="cm-number">1</span>, <span class="cm-string">'Qing'</span>,<span class="cm-string">'Q'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@x</span> = <span class="cm-number">2</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> staff <span class="cm-keyword">values</span>(<span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-string">'Long'</span>,<span class="cm-string">'L'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@x</span> = <span class="cm-number">3</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">END</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><h3><a name="1226-å…‰æ ‡çš„ä½¿ç”¨" class="md-header-anchor"></a><span>12.2.6 å…‰æ ‡çš„ä½¿ç”¨ </span></h3><p><span>åœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨å…‰æ ‡å¯¹ç»“æœé›†è¿›è¡Œå¾ªç¯çš„å¤„ç†ã€‚å…‰æ ‡çš„ä½¿ç”¨åŒ…æ‹¬å…‰æ ‡çš„å£°æ˜ã€OPENã€FETCH å’Œ CLOSEã€‚</span></p><ul><li><p><span>å£°æ˜å…‰æ ‡</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">declare</span> cursor_name <span class="cm-keyword">cursor</span> <span class="cm-keyword">for</span> <span class="cm-keyword">select</span> statement;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li><li><p><span>æ‰“å¼€å…‰æ ‡</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">open</span> cursor_name;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li><li><p><span>fetchå…‰æ ‡ï¼Œå¾ªç¯éå†</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">fetch</span> cursor_name <span class="cm-keyword">into</span> var_name [, var_name]...</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>ä½œç”¨ï¼šå°†éå†çš„æ¯æ¡è®°å½•èµ‹å€¼åˆ°var_name</span></p></li><li><p><span>å…³é—­å…‰æ ‡</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">close</span> cursor_name;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li></ul><p><span>ä¾‹ï¼šç»Ÿè®¡è´¦å•é‡‘é¢å¤§äº100çš„è´¦å•æ•°é‡ï¼Œåˆ¤æ–­å¾ªç¯ç»“æŸçš„æ¡ä»¶æ˜¯æ•è·NOT FOUNDçš„æ¡ä»¶ï¼Œå½“FETCHå…‰æ ‡æ‰¾ä¸åˆ°ä¸‹ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå°±ä¼šå…³é—­å…‰æ ‡ç„¶åé€€å‡ºè¿‡ç¨‹ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192216.png" referrerpolicy="no-referrer"></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">PROCEDURE</span> payment_proc;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> //</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">procedure</span> payment_proc()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># ä¸€å®šä¸è¦å®šä¹‰å’Œfetchæ•è·çš„åˆ—åŒåçš„å˜é‡æ¯”å¦‚declare amount int;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> i_amount <span class="cm-builtin">int</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> amount_cur <span class="cm-keyword">cursor</span> <span class="cm-keyword">for</span> <span class="cm-keyword">select</span> amount <span class="cm-keyword">from</span> payment;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> <span class="cm-keyword">exit</span> <span class="cm-keyword">handler</span> <span class="cm-keyword">for</span> <span class="cm-keyword">not</span> found <span class="cm-keyword">close</span> amount_cur;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@count</span> = <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># æ‰“å¼€å…‰æ ‡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">open</span> amount_cur;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">REPEAT</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># ä½¿ç”¨å…‰æ ‡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">fetch</span> amount_cur <span class="cm-keyword">into</span> i_amount;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> i_amount&gt;<span class="cm-number">100</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> <span class="cm-variable-2">@count</span> = <span class="cm-variable-2">@count</span> + <span class="cm-number">1</span>;<span class="cm-comment"># æ³¨æ„èµ‹å€¼å¿…é¡»åŠ set</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>UNTIL <span class="cm-number">0</span> <span class="cm-keyword">END</span> <span class="cm-keyword">REPEAT</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># å…³é—­å…‰æ ‡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">close</span> amount_cur;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">//</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">call</span> payment_proc();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-variable-2">@count</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 690px;"></div><div class="CodeMirror-gutters" style="display: none; height: 690px;"></div></div></div></pre><p><span>ã€æ³¨ã€‘</span></p><ul><li><span>navicateä¸­å®šä¹‰å­˜å‚¨è¿‡ç¨‹ä¸€å®šè¦é€šè¿‡</span><code>delimiter //</code><span>æ”¹å˜å®šç•Œç¬¦ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚</span></li><li><span>fetchæ¸¸æ ‡å°†å‚æ•°èµ‹å€¼ç»™ä¹‹å‰å®šä¹‰çš„å˜é‡ï¼Œéœ€è¦æ³¨æ„å®šä¹‰çš„å˜é‡ä¸è¦å’Œæ¸¸æ ‡ä¸­æ•è·çš„å‚æ•°åŒåã€‚</span></li><li><span>å˜é‡ã€æ¡ä»¶ã€å¤„ç†ç¨‹åºã€å…‰æ ‡éƒ½æ˜¯é€šè¿‡ DECLARE å®šä¹‰çš„ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯æœ‰å…ˆåé¡ºåºçš„è¦æ±‚çš„ã€‚å˜é‡å’Œæ¡ä»¶å¿…é¡»åœ¨æœ€å‰é¢å£°æ˜ï¼Œç„¶åæ‰èƒ½æ˜¯å…‰æ ‡çš„å£°æ˜ï¼Œæœ€åæ‰å¯ä»¥æ˜¯å¤„ç†ç¨‹åºçš„å£°æ˜ã€‚</span></li></ul><h3><a name="1227-æµç¨‹æ§åˆ¶" class="md-header-anchor"></a><span>12.2.7 æµç¨‹æ§åˆ¶</span></h3><p><strong><span>1ã€IFè¯­å¥</span></strong></p><p><span>è¯­æ³•ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> <span class="cm-keyword">condition</span> <span class="cm-keyword">then</span> statement_list</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">elseif</span> <span class="cm-keyword">condition</span> <span class="cm-keyword">then</span> statement_list]..<span class="cm-variable-2">.s</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">else</span> statement_list]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">endif;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><strong><span>2ã€CASEè¯­å¥</span></strong></p><p><span>CASE å®ç°æ¯” IF æ›´å¤æ‚ä¸€äº›çš„æ¡ä»¶æ„é€ ï¼Œå…·ä½“è¯­æ³•å¦‚ä¸‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">case</span> case_value</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">when</span> when_value <span class="cm-keyword">then</span> statement_list</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">when</span> when_value <span class="cm-keyword">then</span> statement_list]...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">else</span> statement_list]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span> <span class="cm-keyword">case</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">or</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">case</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">when</span> search_condition <span class="cm-keyword">then</span> statement_list</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">when</span> search_condition <span class="cm-keyword">then</span> statement_list]...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>[<span class="cm-keyword">else</span> statement_list]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span> <span class="cm-keyword">case</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><p><strong><span>3ã€LEAVEå’ŒITERATE</span></strong></p><p><span>(1)LEAVE</span></p><p><span>ç”¨äºé€€å‡ºå…·æœ‰ç»™å®šæ ‡ç­¾çš„æµæ§åˆ¶æ„é€ ã€‚å¦‚æœæ ‡ç­¾ç”¨äºæœ€å¤–é¢å­˜å‚¨çš„ç¨‹åºå—ï¼Œåˆ™LEAVEé€€å‡ºç¨‹åºã€‚</span></p><p><span>LEAVEå¯ä»¥åœ¨BEGIN ... ENDæˆ–å¾ªç¯æ„é€ ï¼ˆLOOPï¼ŒREPEATï¼ŒWHILEï¼‰ä¸­ä½¿ç”¨ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ ¼å¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">LEAVE</span> label;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>(2)ITERATE </span></p><p><span>ITERATE è¯­å¥å¿…é¡»ç”¨åœ¨å¾ªç¯ä¸­ï¼Œä½œç”¨æ˜¯è·³è¿‡å½“å‰å¾ªç¯çš„å‰©ä¸‹çš„è¯­å¥ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ ¼å¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">ITERATE</span> label;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å¾ªç¯å‘è¡¨ä¸­æ’å…¥å€¼ï¼Œå¦‚æœæ˜¯å¶æ•°è·³è¿‡å½“å‰å¾ªç¯ï¼Œå¥‡æ•°åˆ™æ’å…¥</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">procedure</span> test()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> i <span class="cm-builtin">int</span> <span class="cm-keyword">default</span> <span class="cm-number">10</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>ins: <span class="cm-keyword">loop</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> i = i + <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> i &gt; <span class="cm-number">20</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">leave</span> ins;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elseif</span> <span class="cm-keyword">mod</span>(i,<span class="cm-number">2</span>)=<span class="cm-number">0</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">iterate</span> ins;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(i);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#set i = i + 1;åˆšå¼€å§‹æŠŠè¿™å¥æ”¾åé¢äº†ï¼Œå¯¼è‡´æ­»å¾ªç¯</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">//</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 460px;"></div><div class="CodeMirror-gutters" style="display: none; height: 460px;"></div></div></div></pre><p><strong><span>4ã€å¾ªç¯</span></strong></p><p><span>MySQLä¸­å¾ªç¯çš„å®šä¹‰æœ‰</span><code>while</code><span>ã€</span><code>repeat</code><span>ã€</span><code>loop</code><span>ã€‚</span></p><p><span>(1)while</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#æ ¼å¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[begin_label:] <span class="cm-keyword">WHILE</span> search_condition <span class="cm-keyword">DO</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  statement_list</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">END</span> <span class="cm-keyword">WHILE</span> [end_label]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> //</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å­˜å‚¨è¿‡ç¨‹æ‹¬å·ä¸€å®šä¸è¦å¿˜è®°åŠ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">procedure</span> test()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> i <span class="cm-builtin">int</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> i &lt;= <span class="cm-number">10</span> <span class="cm-keyword">do</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(i);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> i = i + <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">while</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">//</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">call</span> test();</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><p><span>(2)repeat</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ ¼å¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[begin_label:] <span class="cm-keyword">REPEAT</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  statement_list</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">UNTIL search_condition <span class="cm-comment"># æ³¨æ„å®ƒçš„æ„æ€ï¼Œæ˜¯ç›´åˆ°æ»¡è¶³ä»€ä¹ˆæ¡ä»¶æ‰è·³å‡ºï¼Œæœ‰ç‚¹åƒdo...while</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">END</span> <span class="cm-keyword">REPEAT</span> [end_label]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">procedure</span> test()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> i <span class="cm-builtin">int</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">repeat</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(i);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> i = i + <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>until i &gt; <span class="cm-number">10</span> <span class="cm-keyword">end</span> <span class="cm-keyword">repeat</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 322px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><p><span>(3)loop</span></p><p><span>é€šå¸¸loopé…åˆleaveï¼Œå¾ªç¯çš„ç»ˆæ­¢éœ€è¦leaveï¼Œæˆ–è€…å¦‚æœåœ¨å­˜å‚¨å‡½æ•°ä¸­ä¹Ÿå¯ä»¥é€šè¿‡returnç»ˆæ­¢å¾ªç¯ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ ¼å¼</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[begin_label:] <span class="cm-keyword">LOOP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  statement_list</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">END</span> <span class="cm-keyword">LOOP</span> [end_label]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">procedure</span> test()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">declare</span> i <span class="cm-builtin">int</span> <span class="cm-keyword">default</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>lp: <span class="cm-keyword">loop</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> i &gt; <span class="cm-number">10</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">leave</span> lp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> t <span class="cm-keyword">values</span>(i);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> i = i + <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">loop</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">//</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 391px;"></div><div class="CodeMirror-gutters" style="display: none; height: 391px;"></div></div></div></pre><h1><a name="13-è§¦å‘å™¨" class="md-header-anchor"></a><span>13. è§¦å‘å™¨</span></h1><p><span>è§¦å‘å™¨æ˜¯ä¸è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼Œ</span><strong><span>åœ¨æ»¡è¶³å®šä¹‰æ¡ä»¶æ—¶è§¦å‘ï¼Œå¹¶æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„è¯­å¥é›†åˆ</span></strong><span>ã€‚è§¦å‘å™¨çš„è¿™ç§ç‰¹æ€§å¯ä»¥ååŠ©åº”ç”¨åœ¨æ•°æ®åº“ç«¯ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚</span></p><h2><a name="131-åˆ›å»ºè§¦å‘å™¨" class="md-header-anchor"></a><span>13.1 åˆ›å»ºè§¦å‘å™¨</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [DEFINER = <span class="cm-keyword">user</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">TRIGGER</span> trigger_name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  trigger_time trigger_event</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">ON</span> tbl_name <span class="cm-keyword">FOR</span> <span class="cm-keyword">EACH</span> <span class="cm-keyword">ROW</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [trigger_order]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  trigger_body</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">trigger_time: { <span class="cm-keyword">BEFORE</span> | <span class="cm-keyword">AFTER</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">trigger_event: { <span class="cm-keyword">INSERT</span> | <span class="cm-keyword">UPDATE</span> | <span class="cm-keyword">DELETE</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">trigger_order: { FOLLOWS | PRECEDES } other_trigger_name</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 299px;"></div><div class="CodeMirror-gutters" style="display: none; height: 299px;"></div></div></div></pre><blockquote><p><span>è§¦å‘å™¨åªèƒ½åˆ›å»ºåœ¨æ°¸ä¹…è¡¨ï¼ˆPermanent Tableï¼‰ä¸Šï¼Œä¸èƒ½å¯¹ä¸´æ—¶è¡¨ï¼ˆTemporary Tableï¼‰æˆ–è¯•å›¾åˆ›å»º</span>
<span>è§¦å‘å™¨ã€‚</span></p></blockquote><p><span> åœ¨è§¦å‘å™¨ä¸»ä½“å†…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åˆ«åOLDå’ŒNEWæ¥å¼•ç”¨ä¸»é¢˜è¡¨ï¼ˆä¸è§¦å‘å™¨å…³è”çš„è¡¨ï¼‰ä¸­çš„åˆ—ã€‚OLD.col_nameåœ¨</span><strong><span>æ›´æ–°æˆ–åˆ é™¤ä¹‹å‰</span></strong><span>å¼•ç”¨ç°æœ‰è¡Œçš„åˆ—ã€‚NEW.col_nameæŒ‡å‘</span><strong><span>è¦æ’å…¥çš„æ–°è¡Œæˆ–æ›´æ–°å</span></strong><span>çš„ç°æœ‰è¡Œçš„åˆ—ã€‚æ¢å¥è¯è¯´ï¼Œ</span><strong><span>åœ¨INSERTè§¦å‘å™¨ä¸­ï¼Œåªèƒ½ä½¿ç”¨NEW.col_name</span></strong><span>ã€‚æ²¡æœ‰æ—§çš„è¡Œã€‚</span><strong><span>åœ¨DELETEè§¦å‘å™¨ä¸­ï¼Œåªèƒ½ä½¿ç”¨OLD.col_name</span></strong><span>ã€‚æ²¡æœ‰æ–°è¡Œã€‚åœ¨UPDATEè§¦å‘å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨OLD.col_nameæ¥å¼•ç”¨æ›´æ–°å‰çš„è¡Œçš„åˆ—ï¼Œå¹¶å¯ä»¥ä½¿ç”¨NEW.col_nameæ¥å¼•ç”¨æ›´æ–°åçš„è¡Œçš„åˆ—ã€‚</span></p><p><span>ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªinsertåŠ¨ä½œç›¸å…³çš„è§¦å‘å™¨ä¸è¡¨å…³è”ï¼Œåœ¨å‘è´¦æˆ·è¡¨æ’å…¥æ•°æ®å‰ï¼Œç´¯åŠ é‡‘é¢ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">table</span> account(acct_num <span class="cm-builtin">int</span>, amount <span class="cm-builtin">decimal</span>(<span class="cm-number">10</span>,<span class="cm-number">2</span>));</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å®šä¹‰è§¦å‘å™¨ï¼Œåœ¨å‘è¡¨accountæ’å…¥æ•°æ®æ—¶ï¼Œç´¯è®¡é‡‘é¢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">trigger</span> ins_sum <span class="cm-keyword">before</span> <span class="cm-keyword">insert</span> <span class="cm-keyword">on</span> account</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-keyword">each</span> <span class="cm-keyword">row</span> <span class="cm-keyword">set</span> <span class="cm-variable-2">@sum</span> = <span class="cm-variable-2">@sum</span> + NEW<span class="cm-variable-2">.amount</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> <span class="cm-variable-2">@sum</span>=<span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">INSERT</span> <span class="cm-keyword">INTO</span> account <span class="cm-keyword">VALUES</span>(<span class="cm-number">137</span>,<span class="cm-number">14.98</span>),(<span class="cm-number">141</span>,<span class="cm-number">1937.50</span>),(<span class="cm-number">97</span>,-<span class="cm-number">100.00</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> <span class="cm-variable-2">@sum</span> <span class="cm-keyword">AS</span> <span class="cm-string">'Total amount inserted'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Total amount inserted |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1852.48</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 345px;"></div><div class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre><p><span>ä»MySQL5.7.2å¼€å§‹ï¼Œå¯ä»¥ä¸ºç»™å®šè¡¨å®šä¹‰å…·æœ‰ç›¸åŒè§¦å‘äº‹ä»¶å’ŒåŠ¨ä½œäº‹ä»¶çš„å¤šä¸ªè§¦å‘ï¼Œè¿™åœ¨ä¹‹å‰æ˜¯ä¸å…è®¸çš„ï¼Œåªèƒ½é€šè¿‡</span><code>begin...end</code><span>å¤åˆå—æ¥æ‰§è¡Œå¤šä¸ªåŠ¨ä½œã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰ä¸¤ä¸ªBEFORE UPDATEè§¦å‘å™¨ã€‚</span><strong><span>é»˜è®¤æƒ…å†µä¸‹ï¼Œå…·æœ‰ç›¸åŒè§¦å‘äº‹ä»¶å’ŒåŠ¨ä½œæ—¶é—´çš„è§¦å‘å°†æŒ‰ç…§å…¶åˆ›å»ºé¡ºåºè¿›è¡Œæ¿€æ´»</span></strong><span>ã€‚è¦å½±å“è§¦å‘é¡ºåºï¼Œè¯·åœ¨FOR EACH ROWä¹‹åæŒ‡å®šä¸€ä¸ªå­å¥ï¼Œè¯¥å­å¥æŒ‡ç¤ºFOLLOWSæˆ–PRECEDESï¼Œä»¥åŠä¸€ä¸ªç°æœ‰è§¦å‘å™¨çš„åç§°ï¼Œè¯¥è§¦å‘å™¨ä¹Ÿå…·æœ‰ç›¸åŒçš„è§¦å‘å™¨äº‹ä»¶å’ŒåŠ¨ä½œæ—¶é—´ã€‚ä½¿ç”¨FOLLOWSï¼Œæ–°è§¦å‘å™¨å°†åœ¨ç°æœ‰è§¦å‘å™¨ä¹‹åæ¿€æ´»ã€‚ä½¿ç”¨PRECEDESï¼Œæ–°è§¦å‘å™¨å°†åœ¨ç°æœ‰è§¦å‘å™¨ä¹‹å‰æ¿€æ´»ã€‚</span></p><p><span>ä¾‹å¦‚ï¼Œåœ¨è¡¨accountçš„åŸºç¡€ä¸Šåœ¨å®šä¹‰</span><em><span>before insert</span></em><span>çš„è§¦å‘å™¨</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> <span class="cm-variable-2">@depositis</span>=<span class="cm-number">0</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> <span class="cm-variable-2">@withdraw</span>=<span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">trigger</span> ins_transaction <span class="cm-keyword">before</span> <span class="cm-keyword">insert</span> <span class="cm-keyword">on</span> account</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-keyword">each</span> <span class="cm-keyword">row</span> precedes ins_sum</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@depositis</span> = <span class="cm-variable-2">@depositis</span> + <span class="cm-keyword">if</span>(NEW<span class="cm-variable-2">.amount</span>&gt;<span class="cm-number">0</span>,New<span class="cm-variable-2">.amount</span>,<span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@withdraw</span> = <span class="cm-variable-2">@withdraw</span> + <span class="cm-keyword">if</span>(NEW<span class="cm-variable-2">.amount</span>&lt;<span class="cm-number">0</span>,-NEW<span class="cm-variable-2">.amount</span>,<span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> <span class="cm-variable-2">@depositis</span> <span class="cm-string">'å­˜æ¬¾'</span>, <span class="cm-variable-2">@withdraw</span> <span class="cm-string">'å–æ¬¾'</span>, <span class="cm-variable-2">@sum</span> <span class="cm-string">'æ€»é¢'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| å­˜æ¬¾<span class="cm-tab" role="presentation" cm-text="	">    </span> | å–æ¬¾ | æ€»é¢<span class="cm-tab" role="presentation" cm-text="	">  </span>|</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1952.48</span> | <span class="cm-number">100</span><span class="cm-tab" role="presentation" cm-text="	"> </span>|<span class="cm-number">1852.48</span>|</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 345px;"></div><div class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre><p><span>æ­¤è§¦å‘å™¨ins_transactionä¸ins_sumç±»ä¼¼ï¼Œä½†åˆ†åˆ«å­˜å‚¨å­˜æ¬¾å’Œå–æ¬¾ã€‚å®ƒæœ‰ä¸€ä¸ªPRECEDESå­å¥ï¼Œä½¿å®ƒåœ¨ins_sumä¹‹å‰æ¿€æ´»ï¼›å¦‚æœæ²¡æœ‰è¯¥å­å¥ï¼Œå®ƒå°†åœ¨ins_sumä¹‹åæ¿€æ´»ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨ins_sumä¹‹ååˆ›å»ºçš„ã€‚</span></p><p><span>ä»¥OLDå‘½åçš„åˆ—æ˜¯åªè¯»çš„ã€‚æ‚¨å¯ä»¥å¼•ç”¨å®ƒï¼ˆå¦‚æœæ‚¨å…·æœ‰SELECTç‰¹æƒï¼‰ï¼Œä½†ä¸èƒ½å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœæ‚¨å…·æœ‰ä½¿ç”¨SELECTç‰¹æƒï¼Œåˆ™å¯ä»¥å¼•ç”¨ä»¥NEWå‘½åçš„åˆ—ã€‚åœ¨BEFOREè§¦å‘å™¨ä¸­ï¼Œå¦‚æœæ‚¨å…·æœ‰UPDATE(insertã€update)ç‰¹æƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨SET NEW.col_name = valueæ›´æ”¹å…¶å€¼ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨è§¦å‘å™¨æ¥ä¿®æ”¹è¦æ’å…¥åˆ°æ–°è¡Œä¸­æˆ–ç”¨äºæ›´æ–°è¡Œçš„å€¼ã€‚ï¼ˆè¿™ç§SETè¯­å¥åœ¨AFTERè§¦å‘å™¨ä¸­æ— æ•ˆï¼Œå› ä¸ºè¡Œæ›´æ”¹å·²ç»å‘ç”Ÿã€‚ï¼‰</span></p><p><span>ç¤ºä¾‹ï¼šåœ¨æ›´æ–°accountè¡¨æ—¶æ£€æŸ¥è´¦æˆ·å…¥è´¦é‡‘é¢ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">delimiter</span> //</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">create</span> <span class="cm-keyword">trigger</span> upd_check <span class="cm-keyword">before</span> <span class="cm-keyword">update</span> <span class="cm-keyword">on</span> account</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-keyword">each</span> <span class="cm-keyword">row</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">begin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> NEW<span class="cm-variable-2">.amount</span> &lt; <span class="cm-number">0</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> NEW<span class="cm-variable-2">.amount</span> = <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elseif</span> NEW<span class="cm-variable-2">.amount</span> &gt; <span class="cm-number">100</span> <span class="cm-keyword">then</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">set</span> NEW<span class="cm-variable-2">.amount</span> = <span class="cm-number">100</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span> <span class="cm-keyword">if</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">//</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><p><span>ä¼˜åŠ¿ï¼šåˆ†åˆ«å®šä¹‰å­˜å‚¨è¿‡ç¨‹ï¼Œç„¶åä½¿ç”¨ç®€å•çš„CALLè¯­å¥ä»è§¦å‘å™¨è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ä¼šæ›´å®¹æ˜“ã€‚å¦‚æœè¦åœ¨å¤šä¸ªè§¦å‘å™¨ä¸­æ‰§è¡Œç›¸åŒçš„ä»£ç ï¼Œè¿™ä¹Ÿå°†éå¸¸æœ‰åˆ©ã€‚</span></p><h2><a name="132-åˆ é™¤è§¦å‘å™¨" class="md-header-anchor"></a><span>13.2 åˆ é™¤è§¦å‘å™¨</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">drop</span> <span class="cm-keyword">trigger</span> trigger_name;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><blockquote><p><span>If you drop a table, any triggers for the table are also dropped.</span></p></blockquote><h2><a name="133-æŸ¥çœ‹è§¦å‘å™¨" class="md-header-anchor"></a><span>13.3 æŸ¥çœ‹è§¦å‘å™¨</span></h2><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SHOW</span> <span class="cm-keyword">TRIGGERS</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [{FROM | <span class="cm-keyword">IN</span>} db_name]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [<span class="cm-keyword">LIKE</span> <span class="cm-string">'pattern'</span> | <span class="cm-keyword">WHERE</span> expr];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">triggers</span> <span class="cm-keyword">from</span> db</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">like</span> <span class="cm-string">'acc%'</span>; <span class="cm-comment"># likeåæ˜¯è¡¨å</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><p>&nbsp;</p><h1><a name="14-æ•°æ®åº“äº‹åŠ¡" class="md-header-anchor"></a><span>14. æ•°æ®åº“äº‹åŠ¡</span></h1><h2><a name="141-äº‹åŠ¡åŸºç¡€" class="md-header-anchor"></a><span>14.1 äº‹åŠ¡åŸºç¡€</span></h2><h2><a name="142-åˆ†å¸ƒå¼äº‹åŠ¡" class="md-header-anchor"></a><span>14.2 åˆ†å¸ƒå¼äº‹åŠ¡</span></h2><h3><a name="1421-æœ¬åœ°äº‹åŠ¡" class="md-header-anchor"></a><span>14.2.1 æœ¬åœ°äº‹åŠ¡</span></h3><p><strong><span>æœ¬åœ°äº‹åŠ¡</span></strong><span>ï¼šæ”¯æŒäº‹åŠ¡çš„å‚ä¸è€…ã€æœåŠ¡å™¨ã€èµ„æºç®¡ç†å™¨ï¼ˆRMï¼‰å’Œäº‹åŠ¡ç®¡ç†å™¨ï¼ˆTMï¼‰ä½äºå•æœºä¹‹ä¸Šï¼Œä»…é™å¯¹å•ä¸€æ•°æ®åº“èµ„æºçš„è®¿é—®æ§åˆ¶ã€‚å°±æ˜¯è¡¨å’Œæ•°æ®åº“ä½äºä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œäº‹åŠ¡çš„æ“ä½œéƒ½åœ¨è¿™ä¸€ä¸ªæœåŠ¡å™¨ä¸Šè¿›è¡Œã€‚</span></p><p><span>èµ·åˆï¼Œäº‹åŠ¡ä»…é™äºå¯¹å•ä¸€æ•°æ®èµ„æºçš„è®¿é—®æ§åˆ¶ï¼š</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192206.png" referrerpolicy="no-referrer"></p><p><span>è€Œæˆ‘ä»¬çš„æœ¬åœ°äº‹åŠ¡ç”±èµ„æºç®¡ç†å™¨è¿›è¡Œç®¡ç†ï¼š</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192203.png" referrerpolicy="no-referrer"></p><p><span>äº‹åŠ¡çš„ACIDæ˜¯é€šè¿‡InnoDBæ—¥å¿—å’Œé”æ¥ä¿è¯ã€‚äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯é€šè¿‡äº‹åŠ¡çš„é”æœºåˆ¶å®ç°çš„ï¼ŒæŒä¹…æ€§é€šè¿‡redo log(é‡åšæ—¥å¿—)æ¥å®ç°ï¼ŒåŸå­æ€§å’Œä¸€è‡´æ€§é€šè¿‡Undo logæ¥å®ç°ã€‚UndoLogçš„åŸç†å¾ˆç®€å•ï¼Œä¸ºäº†æ»¡è¶³äº‹åŠ¡çš„åŸå­æ€§ï¼Œåœ¨æ“ä½œä»»ä½•æ•°æ®ä¹‹å‰ï¼Œé¦–å…ˆå°†æ•°æ®å¤‡ä»½åˆ°ä¸€ä¸ªåœ°æ–¹ï¼ˆè¿™ä¸ªå­˜å‚¨æ•°æ®å¤‡ä»½çš„åœ°æ–¹ç§°ä¸ºUndoLogï¼‰ã€‚ç„¶åè¿›è¡Œæ•°æ®çš„ä¿®æ”¹ã€‚å¦‚æœå‡ºç°äº†é”™è¯¯æˆ–è€…ç”¨æˆ·æ‰§è¡Œäº†ROLLBACKè¯­å¥ï¼Œç³»ç»Ÿå¯ä»¥åˆ©ç”¨Undo Logä¸­çš„å¤‡ä»½å°†æ•°æ®æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„çŠ¶æ€ã€‚ å’ŒUndo Logç›¸åï¼ŒRedoLogè®°å½•çš„æ˜¯æ–°æ•°æ®çš„å¤‡ä»½ã€‚åœ¨äº‹åŠ¡æäº¤å‰ï¼Œåªè¦å°†RedoLogæŒä¹…åŒ–å³å¯ï¼Œä¸éœ€è¦å°†æ•°æ®æŒä¹…åŒ–ã€‚å½“ç³»ç»Ÿå´©æºƒæ—¶ï¼Œè™½ç„¶æ•°æ®æ²¡æœ‰æŒä¹…åŒ–ï¼Œä½†æ˜¯RedoLogå·²ç»æŒä¹…åŒ–ã€‚ç³»ç»Ÿå¯ä»¥æ ¹æ®RedoLogçš„å†…å®¹ï¼Œå°†æ‰€æœ‰æ•°æ®æ¢å¤åˆ°æœ€æ–°çš„çŠ¶æ€ã€‚</span></p><p><span>æœ¬åœ°äº‹åŠ¡ä¸»è¦é™åˆ¶åœ¨å•ä¸ªä¼šè¯å†…ï¼Œä¸æ¶‰åŠå¤šä¸ªæ•°æ®åº“èµ„æºã€‚ä½†æ˜¯åœ¨åŸºäº </span><strong><span>SOAï¼ˆService-Oriented Architectureï¼Œé¢å‘æœåŠ¡æ¶æ„ï¼‰</span></strong><span>çš„åˆ†å¸ƒå¼åº”ç”¨ç¯å¢ƒä¸‹ï¼Œè¶Šæ¥è¶Šå¤šçš„åº”ç”¨è¦æ±‚å¯¹å¤šä¸ªæ•°æ®åº“èµ„æºï¼Œå¤šä¸ªæœåŠ¡çš„è®¿é—®éƒ½èƒ½çº³å…¥åˆ°åŒä¸€ä¸ªäº‹åŠ¡å½“ä¸­ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡åº”è¿è€Œç”Ÿã€‚</span></p><h3><a name="1422-åˆ†å¸ƒå¼äº‹åŠ¡" class="md-header-anchor"></a><span>14.2.2 åˆ†å¸ƒå¼äº‹åŠ¡</span></h3><p><span>	</span><span>åœ¨å¼€å‘ä¸­ï¼Œä¸ºäº†é™ä½å•æœºçš„å‹åŠ›ï¼Œé€šå¸¸ä¼šè¿›è¡Œåˆ†è¡¨åˆ†åº“ï¼Œå°†è¡¨åˆ†å¸ƒåœ¨ä¸åŒçš„æ•°æ®åº“ä¸­ï¼ˆæ•°æ®åº“æœ‰å¯èƒ½åˆ†å¸ƒåœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼‰ï¼Œä½†æ˜¯ä¸€ä¸ªä¸šåŠ¡åœºæ™¯å¯èƒ½ä¼šå¤„ç†ä¸åŒåº“ä¸­çš„è¡¨ï¼Œäº‹åŠ¡çš„æäº¤å°±ä¸èƒ½åœ¨åƒå•æœºé‚£æ ·å¤„ç†ï¼Œå› ä¸ºæ¶‰åŠåˆ°å¤šä¸ªæœåŠ¡å™¨çš„æ§åˆ¶ï¼Œè¦è€ƒè™‘æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ˜¯å¦æ­£å¸¸ã€ç½‘ç»œå»¶æ—¶å¸¦å®½ç­‰å› ç´ ï¼Œè¿™äº›åœ¨å•æœºä¸Šå¹¶æ²¡æœ‰å¤ªå¤§çš„å½±å“ã€‚æ‰€ä»¥è¯´å¤šæœåŠ¡å™¨ä¹‹é—´äº‹åŠ¡çš„æ§åˆ¶å˜å¾—ç›¸å¯¹å¤æ‚ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ä¹Ÿå°±ç›¸åº”çš„å‡ºç°ã€‚</span></p><p><span>æ¯”å¦‚åŸæ¥å•æœºæ”¯æ’‘äº†æ•´ä¸ªç”µå•†ç½‘ç«™ï¼Œç°åœ¨å¯¹æ•´ä¸ªç½‘ç«™è¿›è¡Œæ‹†è§£ï¼Œåˆ†ç¦»å‡ºäº†è®¢å•ä¸­å¿ƒã€ç”¨æˆ·ä¸­å¿ƒã€åº“å­˜ä¸­å¿ƒç­‰,å¯¹äºè®¢å•ä¸­å¿ƒï¼Œæœ‰ä¸“é—¨çš„æ•°æ®åº“å­˜å‚¨è®¢å•ä¿¡æ¯ï¼Œç”¨æˆ·ä¸­å¿ƒä¹Ÿæœ‰ä¸“é—¨çš„æ•°æ®åº“å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œåº“å­˜ä¸­å¿ƒä¹Ÿä¼šæœ‰ä¸“é—¨çš„æ•°æ®åº“å­˜å‚¨åº“å­˜ä¿¡æ¯,å¦‚æœè¦åŒæ—¶å¯¹è®¢å•å’Œåº“å­˜è¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆå°±ä¼šæ¶‰åŠåˆ°è®¢å•æ•°æ®åº“å’Œåº“å­˜æ•°æ®åº“ï¼Œä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œå°±éœ€è¦ç”¨åˆ°åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</span></p><p><strong><span>åˆ†å¸ƒå¼äº‹åŠ¡</span></strong><span>ï¼šåˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯æŒ‡äº‹åŠ¡çš„å‚ä¸è€…ã€æ”¯æŒäº‹åŠ¡çš„æœåŠ¡å™¨ã€èµ„æºæœåŠ¡å™¨ä»¥åŠäº‹åŠ¡ç®¡ç†å™¨åˆ†åˆ«ä½äºä¸åŒçš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸åŒèŠ‚ç‚¹ä¹‹ä¸Šã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯ä¸€æ¬¡å¤§çš„æ“ä½œç”±ä¸åŒçš„å°æ“ä½œç»„æˆï¼Œè¿™äº›å°çš„æ“ä½œåˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä¸”å±äºä¸åŒçš„åº”ç”¨ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡éœ€è¦ä¿è¯è¿™äº›å°æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚æœ¬è´¨ä¸Šæ¥è¯´ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯ä¸ºäº†ä¿è¯ä¸åŒæ•°æ®åº“çš„æ•°æ®ä¸€è‡´æ€§ã€‚</span></p><p><span>æœ€æ—©çš„åˆ†å¸ƒå¼äº‹åŠ¡åº”ç”¨æ¶æ„</span><em><span>ä¸æ¶‰åŠæœåŠ¡ä¹‹é—´çš„è®¿é—®è°ƒç”¨</span></em><span>ï¼Œä»…ä»…æ˜¯æœåŠ¡å†…æ“ä½œæ¶‰åŠå¯¹å¤šä¸ªæ•°æ®åº“èµ„æºçš„è®¿é—®ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192200.png" referrerpolicy="no-referrer"></p><p><span>å½“ä¸€ä¸ªæœåŠ¡æ“ä½œè®¿é—®ä¸åŒçš„æ•°æ®åº“èµ„æºï¼Œåˆå¸Œæœ›å¯¹å®ƒä»¬çš„è®¿é—®å…·æœ‰äº‹åŠ¡ç‰¹æ€§æ—¶ï¼Œå°±éœ€è¦é‡‡ç”¨åˆ†å¸ƒå¼äº‹åŠ¡æ¥åè°ƒæ‰€æœ‰çš„äº‹åŠ¡å‚ä¸è€…ã€‚</span></p><p><span>åœ¨ä¸Šé¢çš„åˆ†å¸ƒå¼äº‹åŠ¡åº”ç”¨æ¶æ„ä¸­ï¼Œå°½ç®¡ä¸€ä¸ªæœåŠ¡æ“ä½œä¼šè®¿é—®å¤šä¸ªæ•°æ®åº“èµ„æºï¼Œä½†æ˜¯æ¯•ç«Ÿæ•´ä¸ªäº‹åŠ¡è¿˜æ˜¯æ§åˆ¶åœ¨å•ä¸€æœåŠ¡çš„å†…éƒ¨ã€‚å¦‚æœä¸€ä¸ªæœåŠ¡æ“ä½œéœ€è¦è°ƒç”¨å¦å¤–ä¸€ä¸ªæœåŠ¡ï¼Œè¿™æ—¶çš„äº‹åŠ¡å°±éœ€è¦</span><strong><span>è·¨è¶Š</span></strong><span>å¤šä¸ª</span><strong><span>æœåŠ¡</span></strong><span>äº†ã€‚</span><strong><span>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œèµ·å§‹äºæŸä¸ªæœåŠ¡çš„äº‹åŠ¡åœ¨è°ƒç”¨å¦å¤–ä¸€ä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œéœ€è¦ä»¥æŸç§æœºåˆ¶æµè½¬åˆ°å¦å¤–ä¸€ä¸ªæœåŠ¡</span></strong><span>ï¼Œä»è€Œä½¿è¢«è°ƒç”¨çš„æœåŠ¡è®¿é—®çš„èµ„æºä¹Ÿè‡ªåŠ¨åŠ å…¥åˆ°è¯¥äº‹åŠ¡å½“ä¸­æ¥ã€‚ä¸‹å›¾åæ˜ äº†è¿™æ ·ä¸€ä¸ªè·¨è¶Šå¤šä¸ªæœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡ï¼š</span></p><p><span> </span><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192705.png" referrerpolicy="no-referrer"></p><p><span>å¦‚æœå°†ä¸Šé¢è¿™ä¸¤ç§åœºæ™¯ï¼ˆä¸€ä¸ªæœåŠ¡å¯ä»¥è°ƒç”¨å¤šä¸ªæ•°æ®åº“èµ„æºï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å…¶ä»–æœåŠ¡ï¼‰ç»“åˆåœ¨ä¸€èµ·ï¼Œå¯¹æ­¤è¿›è¡Œå»¶ä¼¸ï¼Œæ•´ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„å‚ä¸è€…å°†ä¼šç»„æˆå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ ‘å½¢æ‹“æ‰‘ç»“æ„ã€‚åœ¨ä¸€ä¸ªè·¨æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡ä¸­ï¼Œäº‹åŠ¡çš„å‘èµ·è€…å’Œæäº¤å‡ç³»åŒä¸€ä¸ªï¼Œå®ƒå¯ä»¥æ˜¯æ•´ä¸ªè°ƒç”¨çš„å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯å®¢æˆ·ç«¯æœ€å…ˆè°ƒç”¨çš„é‚£ä¸ªæœåŠ¡ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192155.png" referrerpolicy="no-referrer"></p><h2><a name="143-åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ" class="md-header-anchor"></a><span>14.3 åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ</span></h2><p><span>åˆ†å¸ƒå¼äº‹åŠ¡æ˜¯æœ€æ ¸å¿ƒçš„è¿˜æ˜¯å…¶ACIDç‰¹æ€§ã€‚ç ”ç©¶åˆ†å¸ƒå¼äº‹åŠ¡æœ¬è´¨ä¸Šè¿˜æ˜¯ç ”ç©¶å…¶æ˜¯å¦‚ä½•ä¿è¯ACIDçš„ã€‚äº‹åŠ¡æ¨¡å‹ä¸ºåˆ†å¸ƒå¼äº‹åŠ¡æä¾›äº†ç†è®ºåŸºç¡€ï¼Œåƒ2PCã€3PCåè®®åˆ™æ˜¯å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„è®¾è®¡æ–¹æ¡ˆã€‚</span></p><h3><a name="1431-xopen-xaåè®®" class="md-header-anchor"></a><span>14.3.1 X/Open XAåè®®</span></h3><p><strong><span>DTPæ¨¡å‹ï¼ˆ X/Open Distributed Transactionï¼‰</span></strong><span>ï¼šæœ€æ—©çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å‹ï¼Œæ˜¯ç”± X/Open å›½é™…è”ç›Ÿæå‡ºçš„ï¼Œä¹Ÿå°±æ˜¯X/Open XAåè®®ï¼Œç®€ç§°XAåè®®ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192153.png" referrerpolicy="no-referrer"></p><p>&nbsp;</p><p><span>DTPæ¨¡å‹åŒ…å«</span><strong><span>ä¸€ä¸ªå…¨å±€äº‹åŠ¡ç®¡ç†å™¨</span></strong><span>ï¼ˆTM Transaction Managerï¼‰å’Œ</span><strong><span>å¤šä¸ªèµ„æºç®¡ç†å™¨</span></strong><span>ï¼ˆRM Resource Managerï¼‰ã€‚å…¨å±€äº‹åŠ¡ç®¡ç†å™¨</span><strong><span>è´Ÿè´£ç®¡ç†å…¨å±€äº‹åŠ¡çŠ¶æ€ä¸å‚ä¸çš„èµ„æºï¼ŒååŒèµ„æºä¸€èµ·æäº¤æˆ–å›æ»š</span></strong><span>ï¼›èµ„æºç®¡ç†å™¨è´Ÿè´£å…·ä½“çš„èµ„æºæ“ä½œã€‚</span></p><p><span>XAåè®®æè¿°äº†TMä¸RMä¹‹é—´çš„æ¥å£ï¼Œå…è®¸å¤šä¸ªèµ„æºåœ¨åŒä¸€åˆ†å¸ƒå¼äº‹åŠ¡ä¸­è®¿é—®ã€‚</span></p><p><strong><span>TMï¼šTransaction Manager äº‹åŠ¡ç®¡ç†å™¨</span></strong></p><ul><li><span>åˆ†å¸ƒå¼äº‹åŠ¡çš„å®ç°ç”±äº‹åŠ¡ç®¡ç†å™¨æ¥å®Œæˆï¼Œå®ƒä¼šæä¾›åˆ†å¸ƒå¼äº‹åŠ¡çš„æ“ä½œæ¥å£ä¾›æˆ‘ä»¬çš„ä¸šåŠ¡ç³»ç»Ÿè°ƒç”¨ã€‚è¿™äº›æ¥å£ç§°ä¸ºTXæ¥å£ã€‚</span></li><li><span>äº‹åŠ¡ç®¡ç†å™¨è¿˜ç®¡ç†ç€æ‰€æœ‰çš„èµ„æºç®¡ç†å™¨ï¼Œé€šè¿‡å®ƒä»¬æä¾›çš„XAæ¥å£æ¥ç»Ÿä¸€è°ƒåº¦è¿™äº›èµ„æºç®¡ç†å™¨ï¼Œä»¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</span></li><li><strong><span>DTPåªæ˜¯ä¸€å¥—å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„è§„èŒƒï¼Œå¹¶æ²¡æœ‰å®šä¹‰å…·ä½“å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼ŒTMå¯ä»¥é‡‡ç”¨2PCã€3PCã€Paxosç­‰åè®®å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</span></strong></li></ul><p><strong><span>RMï¼šResource Manager èµ„æºç®¡ç†å™¨</span></strong></p><ul><li><span>èƒ½å¤Ÿæä¾›æ•°æ®æœåŠ¡çš„å¯¹è±¡éƒ½å¯ä»¥æ˜¯èµ„æºç®¡ç†å™¨ï¼Œæ¯”å¦‚ï¼šæ•°æ®åº“ã€æ¶ˆæ¯ä¸­é—´ä»¶ã€ç¼“å­˜ç­‰ã€‚å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œæ•°æ®åº“å³ä¸ºåˆ†å¸ƒå¼äº‹åŠ¡ä¸­çš„èµ„æºç®¡ç†å™¨ã€‚</span></li><li><span>èµ„æºç®¡ç†å™¨èƒ½å¤Ÿæä¾›å•æ•°æ®åº“çš„äº‹åŠ¡èƒ½åŠ›ï¼Œå®ƒä»¬é€šè¿‡XAæ¥å£ï¼Œå°†æœ¬æ•°æ®åº“çš„æäº¤ã€å›æ»šç­‰èƒ½åŠ›æä¾›ç»™äº‹åŠ¡ç®¡ç†å™¨è°ƒç”¨ï¼Œä»¥å¸®åŠ©äº‹åŠ¡ç®¡ç†å™¨å®ç°åˆ†å¸ƒå¼çš„äº‹åŠ¡ç®¡ç†ã€‚</span></li><li><strong><span>XAæ˜¯DTPæ¨¡å‹å®šä¹‰çš„æ¥å£ï¼Œç”¨äºå‘äº‹åŠ¡ç®¡ç†å™¨æä¾›è¯¥èµ„æºç®¡ç†å™¨(è¯¥æ•°æ®åº“)çš„æäº¤ã€å›æ»šç­‰èƒ½åŠ›</span></strong><span>ã€‚XAåè®®å®ç°é€šå¸¸åœ¨RMå±‚ã€‚</span></li><li><strong><span>DTPåªæ˜¯ä¸€å¥—å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„è§„èŒƒï¼ŒRMå…·ä½“çš„å®ç°æ˜¯ç”±æ•°æ®åº“å‚å•†æ¥å®Œæˆçš„ã€‚</span></strong></li></ul><p><strong><span>åŸºäº DTP æ¨¡å‹çš„åˆ†å¸ƒå¼äº‹åŠ¡æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</span></strong></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192151.png" referrerpolicy="no-referrer"></p><ol start='' ><li><span>åº”ç”¨ç¨‹åºï¼ˆAPï¼‰å‘TMç”³è¯·å¼€å§‹ä¸€ä¸ªäº‹åŠ¡</span></li><li><span>é’ˆå¯¹è¦æ“ä½œçš„ RMï¼ŒAP ä¼šå…ˆå‘ TM æ³¨å†Œï¼ˆTM è´Ÿè´£è®°å½• AP æ“ä½œè¿‡å“ªäº› RMï¼Œå³</span><strong><span>åˆ†æ”¯äº‹åŠ¡</span></strong><span>ï¼‰ï¼ŒTM é€šè¿‡ XA æ¥å£å‡½æ•°é€šçŸ¥ç›¸åº” RM å¼€å¯åˆ†å¸ƒå¼äº‹åŠ¡çš„å­äº‹åŠ¡ï¼Œæ¥ç€ AP å°±å¯ä»¥å¯¹è¯¥ RM ç®¡ç†çš„èµ„æºè¿›è¡Œæ“ä½œã€‚</span></li><li><span>å½“ AP å¯¹æ‰€æœ‰ RM æ“ä½œå®Œæ¯•åï¼ŒAP æ ¹æ®æ‰§è¡Œæƒ…å†µé€šçŸ¥ TM æäº¤æˆ–å›æ»šè¯¥å…¨å±€äº‹åŠ¡ï¼ŒTM é€šè¿‡ XA æ¥å£å‡½æ•°é€šçŸ¥å„ RM å®Œæˆæ“ä½œã€‚TM ä¼šå…ˆè¦æ±‚å„ä¸ª RM åšé¢„æäº¤ï¼Œæ‰€æœ‰ RM è¿”å›æˆåŠŸåï¼Œå†è¦æ±‚å„ RM åšæ­£å¼æäº¤ï¼ŒXA åè®®è¦æ±‚ï¼Œä¸€æ—¦ RM é¢„æäº¤æˆåŠŸï¼Œåˆ™åç»­çš„æ­£å¼æäº¤ä¹Ÿå¿…é¡»èƒ½æˆåŠŸï¼›å¦‚æœä»»æ„ä¸€ä¸ª RM é¢„æäº¤å¤±è´¥ï¼Œåˆ™ TM é€šçŸ¥å„ RM å›æ»šã€‚</span></li><li><span>æ‰€æœ‰ RM æäº¤æˆ–å›æ»šå®Œæˆåï¼Œå…¨å±€äº‹åŠ¡ç»“æŸã€‚</span></li></ol><p><strong><span>1ã€åŸå­æ€§</span></strong></p><p><span>XAåè®®ä½¿ç”¨2PCï¼ˆTwo Phase Commit ä¸¤é˜¶æ®µæäº¤ï¼‰åŸå­æäº¤åè®®æ¥ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡åŸå­æ€§ã€‚</span></p><p><span>ä¸¤é˜¶æ®µæäº¤æ˜¯æŒ‡å°†æäº¤è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</span><strong><span>å‡†å¤‡é˜¶æ®µ</span></strong><span>ï¼ˆæŠ•ç¥¨é˜¶æ®µï¼‰å’Œ</span><strong><span>æäº¤é˜¶æ®µ</span></strong><span>ï¼ˆæ‰§è¡Œé˜¶æ®µï¼‰ã€‚</span></p><ul><li><p><span>å‡†å¤‡é˜¶æ®µ </span></p><p><span>TMå‘æ¯ä¸ªRMå‘é€å‡†å¤‡æ¶ˆæ¯ã€‚å¦‚æœ RM çš„æœ¬åœ°äº‹åŠ¡æ“ä½œæ‰§è¡ŒæˆåŠŸï¼Œåˆ™è¿”å›æˆåŠŸï¼›å¦‚æœ RM çš„æœ¬åœ°äº‹åŠ¡æ“ä½œæ‰§è¡Œå¤±è´¥ï¼Œåˆ™è¿”å›å¤±è´¥ã€‚</span></p></li><li><p><span>æäº¤é˜¶æ®µ</span></p><p><span>å¦‚æœ TM æ”¶åˆ°äº†æ‰€æœ‰ RM å›å¤çš„æˆåŠŸæ¶ˆæ¯ï¼Œåˆ™å‘æ¯ä¸ª RM å‘é€æäº¤æ¶ˆæ¯ï¼›å¦åˆ™å‘é€å›æ»šæ¶ˆæ¯ï¼›RM æ ¹æ® TM çš„æŒ‡ä»¤æ‰§è¡Œæäº¤æˆ–è€…å›æ»šæœ¬åœ°äº‹åŠ¡æ“ä½œï¼Œé‡Šæ”¾æ‰€æœ‰äº‹åŠ¡å¤„ç†è¿‡ç¨‹ä¸­ä½¿ç”¨çš„é”èµ„æºã€‚</span></p></li></ul><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192148.png" referrerpolicy="no-referrer"></p><p><span>å­˜åœ¨çš„é—®é¢˜ï¼š</span></p><p><strong><span>åŒæ­¥é˜»å¡</span></strong><span>ï¼šå½“å‚ä¸äº‹åŠ¡è€…å­˜åœ¨å ç”¨å…¬å…±èµ„æºçš„æƒ…å†µï¼Œå…¶ä¸­ä¸€ä¸ªå ç”¨äº†èµ„æºï¼Œå…¶ä»–äº‹åŠ¡å‚ä¸è€…å°±åªèƒ½é˜»å¡ç­‰å¾…èµ„æºé‡Šæ”¾ï¼Œå¤„äºé˜»å¡çŠ¶æ€ã€‚å¹¶å‘æ€§å·®ã€‚</span></p><p><strong><span>å•ç‚¹æ•…éšœ</span></strong><span>ï¼šä¸€æ—¦äº‹åŠ¡ç®¡ç†å™¨å‡ºç°æ•…éšœï¼Œæ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨</span></p><p><strong><span>æ•°æ®ä¸ä¸€è‡´</span></strong><span>ï¼šåœ¨é˜¶æ®µäºŒï¼Œå¦‚æœäº‹åŠ¡ç®¡ç†å™¨åªå‘é€äº†éƒ¨åˆ† commit æ¶ˆæ¯ï¼Œæ­¤æ—¶ç½‘ç»œå‘ç”Ÿå¼‚å¸¸ï¼Œé‚£ä¹ˆåªæœ‰éƒ¨åˆ†å‚ä¸è€…æ¥æ”¶åˆ° commit æ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰éƒ¨åˆ†å‚ä¸è€…æäº¤äº†äº‹åŠ¡ï¼Œä½¿å¾—ç³»ç»Ÿæ•°æ®ä¸ä¸€è‡´ã€‚</span></p><p><strong><span>2ã€éš”ç¦»æ€§</span></strong></p><p><span>XA åè®®ä¸­æ²¡æœ‰æè¿°å¦‚ä½•å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œä½†æ˜¯ XA åè®®è¦æ±‚ DTP æ¨¡å‹ä¸­çš„æ¯ä¸ª RM éƒ½è¦å®ç°æœ¬åœ°äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºäº XA åè®®å®ç°çš„åˆ†å¸ƒå¼äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯ç”±æ¯ä¸ª RM æœ¬åœ°äº‹åŠ¡çš„éš”ç¦»æ€§æ¥ä¿è¯çš„ï¼Œå½“ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„æ‰€æœ‰å­äº‹åŠ¡éƒ½æ˜¯éš”ç¦»çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡å¤©ç„¶çš„å°±å®ç°äº†éš”ç¦»æ€§ã€‚</span></p><p><span>ä»¥ MySQL æ¥ä¸¾ä¾‹ï¼ŒMySQL ä½¿ç”¨ 2PLï¼ˆTwo-Phase Lockingï¼Œä¸¤é˜¶æ®µé”ï¼‰æœºåˆ¶æ¥æ§åˆ¶æœ¬åœ°äº‹åŠ¡çš„å¹¶å‘ï¼Œä¿è¯éš”ç¦»æ€§ã€‚2PL ä¸ 2PC ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å°†é”æ“ä½œåˆ†ä¸ºåŠ é”å’Œè§£é”ä¸¤ä¸ªé˜¶æ®µï¼Œå¹¶ä¸”ä¿è¯ä¸¤ä¸ªé˜¶æ®µå®Œå…¨ä¸ç›¸äº¤ã€‚åŠ é”é˜¶æ®µï¼ŒåªåŠ é”ï¼Œä¸æ”¾é”ã€‚è§£é”é˜¶æ®µï¼Œåªæ”¾é”ï¼Œä¸åŠ é”ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192145.png" referrerpolicy="no-referrer"></p><p><span>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨ä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œæ¯æ‰§è¡Œä¸€æ¡æ›´æ–°æ“ä½œä¹‹å‰ï¼Œéƒ½ä¼šå…ˆè·å–å¯¹åº”çš„é”èµ„æºï¼Œåªæœ‰è·å–é”èµ„æºæˆåŠŸæ‰ä¼šæ‰§è¡Œè¯¥æ“ä½œï¼Œå¹¶ä¸”ä¸€æ—¦è·å–äº†é”èµ„æºå°±ä¼šæŒæœ‰è¯¥é”èµ„æºç›´åˆ°æœ¬äº‹åŠ¡æ‰§è¡Œç»“æŸã€‚</span></p><p><span>MySQL é€šè¿‡è¿™ç§ 2PL æœºåˆ¶ï¼Œå¯ä»¥ä¿è¯åœ¨æœ¬åœ°äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶ä»–å¹¶å‘äº‹åŠ¡ä¸èƒ½æ“ä½œç›¸åŒèµ„æºï¼Œä»è€Œå®ç°äº†äº‹åŠ¡éš”ç¦»ã€‚</span></p><p><strong><span>3ã€ä¸€è‡´æ€§</span></strong></p><p><span>å‰é¢æåˆ°ä¸€è‡´æ€§æœ‰ä¸¤å±‚è¯­ä¹‰ï¼Œä¸€å±‚æ˜¯ç¡®ä¿äº‹åŠ¡æ‰§è¡Œç»“æŸåï¼Œæ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬å˜ä¸ºå¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€ã€‚å¦ä¸€å±‚è¯­ä¹‰æ˜¯äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸­é—´çŠ¶æ€ä¸èƒ½è¢«è§‚å¯Ÿåˆ°ã€‚</span></p><h3><a name="1432-tccæ¨¡å‹" class="md-header-anchor"></a><span>14.3.2 TCCæ¨¡å‹</span></h3><p><span>TCCï¼ˆTry-Confirm-Cancelï¼‰åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å‹ç›¸å¯¹äº XA ç­‰ä¼ ç»Ÿæ¨¡å‹ï¼Œå…¶ç‰¹å¾åœ¨äºå®ƒä¸ä¾èµ–èµ„æºç®¡ç†å™¨ï¼ˆRMï¼‰å¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„æ”¯æŒï¼Œè€Œæ˜¯é€šè¿‡å¯¹ä¸šåŠ¡é€»è¾‘çš„åˆ†è§£æ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ã€‚</span></p><p><span>TCC æ¨¡å‹è®¤ä¸ºå¯¹äºä¸šåŠ¡ç³»ç»Ÿä¸­ä¸€ä¸ªç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘ï¼Œå…¶å¯¹å¤–æä¾›æœåŠ¡æ—¶ï¼Œå¿…é¡»æ¥å—ä¸€äº›ä¸ç¡®å®šæ€§ï¼Œå³å¯¹ä¸šåŠ¡é€»è¾‘åˆæ­¥æ“ä½œçš„è°ƒç”¨ä»…æ˜¯ä¸€ä¸ªä¸´æ—¶æ€§æ“ä½œï¼Œè°ƒç”¨å®ƒçš„ä¸»ä¸šåŠ¡æœåŠ¡ä¿ç•™äº†åç»­çš„å–æ¶ˆæƒã€‚å¦‚æœä¸»ä¸šåŠ¡æœåŠ¡è®¤ä¸ºå…¨å±€äº‹åŠ¡åº”è¯¥å›æ»šï¼Œå®ƒä¼šè¦æ±‚å–æ¶ˆä¹‹å‰çš„ä¸´æ—¶æ€§æ“ä½œï¼Œè¿™å°±å¯¹åº”ä»ä¸šåŠ¡æœåŠ¡çš„å–æ¶ˆæ“ä½œã€‚è€Œå½“ä¸»ä¸šåŠ¡æœåŠ¡è®¤ä¸ºå…¨å±€äº‹åŠ¡åº”è¯¥æäº¤æ—¶ï¼Œå®ƒä¼šæ”¾å¼ƒä¹‹å‰ä¸´æ—¶æ€§æ“ä½œçš„å–æ¶ˆæƒï¼Œè¿™å¯¹åº”ä»ä¸šåŠ¡æœåŠ¡çš„ç¡®è®¤æ“ä½œã€‚æ¯ä¸€ä¸ªåˆæ­¥æ“ä½œï¼Œæœ€ç»ˆéƒ½ä¼šè¢«ç¡®è®¤æˆ–å–æ¶ˆã€‚</span></p><p><span>TCCäº‹åŠ¡æœºåˆ¶ç›¸æ¯”äºä¸Šé¢ä»‹ç»çš„XAï¼Œè§£å†³äº†å…¶å‡ ä¸ªç¼ºç‚¹: </span></p><ol start='' ><li><span>è§£å†³äº†åè°ƒè€…å•ç‚¹ï¼Œç”±ä¸»ä¸šåŠ¡æ–¹å‘èµ·å¹¶å®Œæˆè¿™ä¸ªä¸šåŠ¡æ´»åŠ¨ã€‚ä¸šåŠ¡æ´»åŠ¨ç®¡ç†å™¨ä¹Ÿå˜æˆå¤šç‚¹ï¼Œå¼•å…¥é›†ç¾¤ã€‚ </span></li><li><span>åŒæ­¥é˜»å¡:å¼•å…¥è¶…æ—¶ï¼Œè¶…æ—¶åè¿›è¡Œè¡¥å¿ï¼Œå¹¶ä¸”ä¸ä¼šé”å®šæ•´ä¸ªèµ„æºï¼Œå°†èµ„æºè½¬æ¢ä¸ºä¸šåŠ¡é€»è¾‘å½¢å¼ï¼Œç²’åº¦å˜å°ã€‚ </span></li><li><span>æ•°æ®ä¸€è‡´æ€§ï¼Œæœ‰äº†è¡¥å¿æœºåˆ¶ä¹‹åï¼Œç”±ä¸šåŠ¡æ´»åŠ¨ç®¡ç†å™¨æ§åˆ¶ä¸€è‡´æ€§</span></li></ol><h2><a name="144-mysqlåˆ†å¸ƒå¼äº‹åŠ¡" class="md-header-anchor"></a><span>14.4 MySQLåˆ†å¸ƒå¼äº‹åŠ¡</span></h2><p><span>MySQL çš„ InnoDB å¼•æ“å…¶å®èƒ½å¤Ÿæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„ XA äº‹åŠ¡ï¼›XA äº‹åŠ¡å°±æ˜¯ç”¨äº†æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­æåˆ°çš„ä¸¤é˜¶æ®µæäº¤åè®®å®ç°åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå…¶ä¸­äº‹åŠ¡ç®¡ç†å™¨ä¸ºåè°ƒè€…ï¼Œè€Œèµ„æºç®¡ç†å™¨å°±æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡çš„å‚ä¸è€…ã€‚</span></p><p><span>å‚è€ƒ</span></p><ul><li><a href='https://juejin.im/post/6844903647197806605'><span>å†æœ‰äººé—®ä½ åˆ†å¸ƒå¼äº‹åŠ¡ï¼ŒæŠŠè¿™ç¯‡æ‰”ç»™ä»–</span></a></li><li><a href='https://juejin.im/post/6844903573667446797#heading-5'><span>å¸¸ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</span></a></li><li><a href='https://www.infoq.cn/article/g1avP9FUA6CDOYRAlv4R'><span>ä¸€ç¯‡æ–‡ç« å¸¦ä½ å­¦ä¹ åˆ†å¸ƒå¼äº‹åŠ¡</span></a></li><li><a href='https://xiaomi-info.github.io/2020/01/02/distributed-transaction/'><span>åˆ†å¸ƒå¼äº‹åŠ¡,è¿™ä¸€ç¯‡å°±å¤Ÿäº†</span></a></li><li><a href='https://draveness.me/distributed-transaction-principle/'><span>åˆ†å¸ƒå¼äº‹åŠ¡çš„å®ç°åŸç†</span></a></li></ul><h1><a name="ç¬¬ä¸‰éƒ¨åˆ†-ä¼˜åŒ–ç¯‡" class="md-header-anchor"></a><span>ç¬¬ä¸‰éƒ¨åˆ† ä¼˜åŒ–ç¯‡</span></h1><h1><a name="17-å¸¸ç”¨sqlæŠ€å·§å’Œå¸¸è§é—®é¢˜" class="md-header-anchor"></a><span>17. å¸¸ç”¨SQLæŠ€å·§å’Œå¸¸è§é—®é¢˜</span></h1><h2><a name="171-æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨" class="md-header-anchor"></a><span>17.1 æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨</span></h2><p><span>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼‰ï¼Œæ˜¯æŒ‡ä¸€ä¸ªç”¨æ¥æè¿°æˆ–è€…åŒ¹é…ä¸€ç³»åˆ—ç¬¦åˆæŸä¸ªå¥æ³•è§„åˆ™çš„å­—ç¬¦ä¸²çš„å•ä¸ªå­—ç¬¦ä¸²ã€‚</span></p><p><span>MySQLä¸­å¯ä»¥ä½¿ç”¨çš„æ¨¡å¼åºåˆ—å¦‚è¡¨ï¼š</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192142.png" referrerpolicy="no-referrer"></p><p><strong><span>æ­£åˆ™è¡¨è¾¾å¼æ“ä½œç¬¦</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">expr <span class="cm-keyword">REGEXP</span> pat</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">expr <span class="cm-keyword">NOT</span> <span class="cm-keyword">REGEXP</span> pat</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>å¦‚æœå­—ç¬¦ä¸²exprä¸æ¨¡å¼patæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚å¦‚æœexpræˆ–patä¸ºNULLï¼Œåˆ™è¿”å›å€¼ä¸ºNULLã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="markdown"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="markdown"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" cm-header cm-header1 CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class=" cm-header cm-header1"># åŒ¹é…ä»¥ç‰¹å®šå­—ç¬¦å¼€å¤´ç‰¹å®šå­—ç¬¦ç»“å°¾</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">select 'abcdgjk123' regexp '^a[a-w]<span class="cm-em">*3$';</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h2><a name="172-å·§ç”¨randæå–éšæœºè¡Œ" class="md-header-anchor"></a><span>17.2 å·§ç”¨RAND()æå–éšæœºè¡Œ</span></h2><p><span>åœ¨MySQLä¸­ï¼Œäº§ç”Ÿéšæœºæ•°çš„æ–¹æ³•æ˜¯RAND()å‡½æ•°ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸ªå‡½æ•°ä¸ORDER BYå­å¥ä¸€èµ·å®ŒæˆéšæœºæŠ½å–æŸäº›è¡Œçš„åŠŸèƒ½ã€‚å®ƒçš„åŸç†å…¶å®å°±æ˜¯ORDER BY RAND()èƒ½å¤ŸæŠŠæ•°æ®éšæœºæ’åºã€‚</span></p><p><span>ä¾‹å¦‚ï¼Œå¯æŒ‰ç…§éšæœºé¡ºåºæ£€ç´¢æ•°æ®è¡Œï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> sales2 <span class="cm-keyword">order</span> <span class="cm-keyword">by</span> rand() <span class="cm-keyword">limit</span> <span class="cm-number">5</span>; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------------+--------+------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id &nbsp; | company_id | moneys | <span class="cm-builtin">year</span> | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------------+--------+------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">876</span>  | <span class="cm-number">876</span> &nbsp; &nbsp; &nbsp;  | <span class="cm-number">876</span> &nbsp;  | <span class="cm-number">0000</span> | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">283</span>  | <span class="cm-number">283</span> &nbsp; &nbsp; &nbsp;  | <span class="cm-number">283</span> &nbsp;  | <span class="cm-number">0000</span> | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">442</span>  | <span class="cm-number">442</span> &nbsp; &nbsp; &nbsp;  | <span class="cm-number">442</span> &nbsp;  | <span class="cm-number">0000</span> | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">874</span>  | <span class="cm-number">874</span> &nbsp; &nbsp; &nbsp;  | <span class="cm-number">874</span> &nbsp;  | <span class="cm-number">0000</span> | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">849</span>  | <span class="cm-number">849</span> &nbsp; &nbsp; &nbsp;  | <span class="cm-number">849</span> &nbsp;  | <span class="cm-number">0000</span> | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+------------+--------+------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><blockquote><p><span>éšæœºæŠ½å–æ ·æœ¬å¸¸ç”¨äºå¯¹æ€»ä½“çš„ç»Ÿè®¡ã€‚</span></p></blockquote><h2><a name="173-ç”¨bit-group-functionsåšç»Ÿè®¡" class="md-header-anchor"></a><span>17.3 ç”¨BIT GROUP FUNCTIONSåšç»Ÿè®¡</span></h2><p><span>ä½¿ç”¨ GROUP BY è¯­å¥å’Œ</span><code>BIT_AND</code><span>ã€</span><code>BIT_OR</code><span> å‡½æ•°å®Œæˆç»Ÿè®¡å·¥ä½œã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„ä¸€èˆ¬ç”¨é€”å°±æ˜¯åšæ•°å€¼ä¹‹é—´çš„é€»è¾‘ä½è¿ç®—ï¼Œä½†æ˜¯ï¼Œå½“æŠŠå®ƒä»¬ä¸ GROUP BY å­å¥è”åˆä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥åšä¸€äº›å…¶ä»–çš„ä»»åŠ¡ã€‚</span></p><p><span>å‡è®¾ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªä»»åŠ¡ï¼šä¸€ä¸ªè¶…å¸‚éœ€è¦è®°å½•æ¯ä¸ªç”¨æˆ·æ¯æ¬¡æ¥è¶…å¸‚éƒ½è´­ä¹°äº†å“ªäº›å•†å“ã€‚ä¸ºäº†å°†é—®é¢˜ç®€å•åŒ–ï¼Œå‡è®¾è¯¥è¶…å¸‚åªæœ‰é¢åŒ…ã€ç‰›å¥¶ã€é¥¼å¹²ã€å•¤é…’ 4 ç§å•†å“ã€‚é‚£ä¹ˆé€šå¸¸è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</span>
<span>ä¸€èˆ¬å…ˆå»ºç«‹ä¸€ä¸ªè´­ç‰©å•è¡¨ï¼Œé‡Œé¢è®°å½•è´­ç‰©å‘ç”Ÿçš„æ—¶é—´ã€é¡¾å®¢ä¿¡æ¯ç­‰ï¼›ç„¶åå†å»ºç«‹ä¸€ä¸ªè´­ç‰©å•æ˜ç»†è¡¨ï¼Œé‡Œé¢è®°å½•è¯¥é¡¾å®¢æ‰€è´­ä¹°çš„å•†å“ã€‚è¿™æ ·è®¾è®¡è¡¨ç»“æ„çš„ä¼˜ç‚¹æ˜¯é¡¾å®¢æ‰€è´­ä¹°çš„å•†å“çš„è¯¦ç»†ä¿¡æ¯å¯ä»¥è®°å½•ä¸‹æ¥ï¼Œæ¯”å¦‚æ•°é‡ã€å•ä»·ç­‰ã€‚ä½†æ˜¯ä¸Šè¿°è®¾è®¡å­˜åœ¨ç›¸åº”çš„ç¼ºç‚¹æ˜¯æ•°æ®åº“è®¾è®¡å¤æ‚ï¼Œå¦‚æœç”¨æˆ·ä¸€æ¬¡è´­ä¹°å•†å“æ¯”è¾ƒå¤šçš„è¯ï¼Œéœ€è¦å¾ˆå¤§çš„å­˜å‚¨ç©ºé—´ã€‚</span></p><p><span>å¯ä»¥é‡‡ç”¨ä¸‹é¢ä¸€ç§æ–°çš„è§£å†³åŠæ³•ï¼Œç”¨ä¸€ä¸ªæ•°å€¼å‹å­—æ®µæ¥è¡¨ç¤ºç”¨æˆ·çš„ç‰©å“ã€‚è¯¥å­—æ®µå­˜å‚¨ä¸€ä¸ªåè¿›åˆ¶æ•°å­—ï¼Œå½“å®ƒè½¬æ¢æˆäºŒè¿›åˆ¶çš„æ—¶å€™ï¼Œé‚£ä¹ˆæ¯ä¸€ä½ä»£è¡¨ä¸€ç§å•†å“ï¼Œè€Œä¸”å¦‚æœæ‰€åœ¨ä½æ˜¯â€œ1â€é‚£ä¹ˆè¡¨ç¤ºé¡¾å®¢è´­ä¹°äº†è¯¥ç§å•†å“ï¼Œâ€œ0â€è¡¨ç¤ºæ²¡æœ‰è´­ä¹°è¯¥ç§å•†å“ã€‚æ¯”å¦‚æ•°å€¼çš„ç¬¬ 1 ä½ä»£è¡¨é¢åŒ…ï¼ˆè§„å®šä»å³å‘å·¦å¼€å§‹è®¡ç®—ï¼‰ã€ç¬¬ 2 ä½ä»£è¡¨ç‰›å¥¶ã€ç¬¬ 3 ä½ä»£è¡¨é¥¼å¹²ã€ç¬¬ 4 ä½ä»£è¡¨å•¤é…’ï¼Œè¿™æ ·å¦‚æœä¸€ä¸ªç”¨æˆ·è´­ç‰©å•çš„å•†å“åˆ—çš„æ•°å€¼ä¸º 5ï¼Œé‚£ä¹ˆäºŒè¿›åˆ¶è¡¨ç¤ºä¸º 0101ï¼Œè¿™æ ·ä»å³å‘å·¦ç¬¬ 1 ä½å’Œç¬¬ 3 ä½æ˜¯ 1ï¼Œé‚£ä¹ˆå°±å¯ä»¥çŸ¥é“è¿™ä¸ªç”¨æˆ·è´­ä¹°äº†é¢åŒ…å’Œé¥¼å¹²ï¼Œè€Œå¦‚æœè¿™ä¸ªå®¢æˆ·æœ‰å¤šä¸ªè¿™æ ·çš„è´­ç‰©å•ï¼ˆåœ¨æ•°æ®åº“ä¸­å°±æ˜¯æœ‰å¤šæ¡è®°å½•ï¼‰ï¼ŒæŠŠè¿™äº›è´­ç‰©å•æŒ‰ç”¨æˆ·åˆ†ç»„åš BIT_OR()æ“ä½œå°±å¯ä»¥çŸ¥é“è¿™ä¸ªç”¨æˆ·éƒ½è´­ä¹°è¿‡ä»€ä¹ˆå•†å“ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">create</span> <span class="cm-keyword">table</span> order_rab (id <span class="cm-builtin">int</span>,customer_id <span class="cm-builtin">int</span>,kind <span class="cm-builtin">int</span>); </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">0</span> rows affected (<span class="cm-number">0.05</span> sec) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> order_rab <span class="cm-keyword">values</span> (<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">5</span>),(<span class="cm-number">2</span>,<span class="cm-number">1</span>,<span class="cm-number">4</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">2</span> rows affected (<span class="cm-number">0.00</span> sec) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">insert</span> <span class="cm-keyword">into</span> order_rab <span class="cm-keyword">values</span> (<span class="cm-number">3</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>),(<span class="cm-number">4</span>,<span class="cm-number">2</span>,<span class="cm-number">4</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Query</span> OK, <span class="cm-number">2</span> rows affected (<span class="cm-number">0.00</span> sec) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> order_rab; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+-------------+------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| id &nbsp; | customer_id | kind | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+-------------+------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1</span> &nbsp;  | <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">5</span> &nbsp;  | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2</span> &nbsp;  | <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">4</span> &nbsp;  | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">3</span> &nbsp;  | <span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">3</span> &nbsp;  | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">4</span> &nbsp;  | <span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">4</span> &nbsp;  | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------+-------------+------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 345px;"></div><div class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre><p><span>å…¶ä¸­ customerid æ˜¯é¡¾å®¢ç¼–å·ï¼Œkind æ˜¯æ‰€è´­ä¹°çš„å•†å“ï¼Œåˆå§‹åŒ–äº†ä¸¤ä¸ªé¡¾å®¢ 1 å’Œ 2 çš„æ•°æ®ï¼Œä»–ä»¬æ¯äººè´­ç‰©ä¸¤æ¬¡ï¼Œå‰è€…è´­ä¹°çš„å•†å“æ•°å€¼æ˜¯ 5 å’Œ 4ï¼Œè½¬åŒ–ä¸ºäºŒè¿›åˆ¶åˆ†åˆ«ä¸º 0101ã€0100ï¼Œè¡¨ç¤ºè¿™ä¸ªé¡¾å®¢ç¬¬ä¸€æ¬¡è´­ä¹°äº†ç‰›å¥¶å’Œå•¤é…’ï¼Œç¬¬äºŒæ¬¡è´­ä¹°äº†ç‰›å¥¶ï¼›åè€…è´­ä¹°çš„å•†å“æ•°å€¼æ˜¯ 3 å’Œ 4ï¼Œè½¬åŒ–ä¸ºäºŒè¿›åˆ¶åˆ†åˆ«ä¸º 0011ã€0100ï¼Œè¡¨ç¤ºè¿™ä¸ªé¡¾å®¢ç¬¬ä¸€æ¬¡è´­ä¹°äº†é¥¼å¹²å’Œå•¤é…’ï¼Œç¬¬äºŒæ¬¡è´­ä¹°äº†ç‰›å¥¶ã€‚ </span>
<span>ä¸‹é¢ç”¨ BIT_OR()å‡½æ•°ä¸ GROUP BY å­å¥è”åˆèµ·æ¥ï¼Œç»Ÿè®¡ä¸€ä¸‹è¿™ä¸¤ä¸ªé¡¾å®¢åœ¨è¿™ä¸ªè¶…å¸‚ä¸€å…±éƒ½è´­ä¹°è¿‡ä»€ä¹ˆå•†å“ï¼Œå¦‚ä¸‹ä¾‹:</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">select</span> customer_id,bit_or(kind) <span class="cm-keyword">from</span> order_rab <span class="cm-keyword">group</span> <span class="cm-keyword">by</span> customer_id; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------+--------------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| customer_id | bit_or(kind) | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------+--------------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">5</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| <span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">7</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-------------+--------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><p><span>å¯ä»¥çœ‹åˆ°é¡¾å®¢ 1 çš„ BIT_OR()ç»“æœæ˜¯ 5 å³ 0101ï¼Œè¡¨ç¤ºè¿™ä¸ªé¡¾å®¢åœ¨æœ¬è¶…å¸‚è´­ä¹°è¿‡ç‰›å¥¶å’Œå•¤é…’ï¼›é¡¾å®¢ 2 çš„ BIT_OR()ç»“æœæ˜¯ 7 å³ 0111ï¼Œè¡¨ç¤ºè¿™ä¸ªé¡¾å®¢åœ¨æœ¬è¶…å¸‚è´­ä¹°è¿‡ç‰›å¥¶ã€é¥¼å¹²ã€å•¤é…’ã€‚</span></p><h2><a name="174-å°ç»“" class="md-header-anchor"></a><span>17.4 å°ç»“ </span></h2><p><span>æœ¬ç« è®²è¿°äº†åœ¨æ•°æ®åº“å¼€å‘æ—¶ä¼šç”¨åˆ°çš„ä¸€äº› SQL å°æŠ€å·§å’Œéœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚ </span></p><ul><li><span>åº”ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨ä¸€æ®µå¾ˆå¤§çš„å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°ç¬¦åˆè‡ªå·±è§„åˆ™çš„ä¸€äº›</span>
<span>è¯­å¥ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨è¿›è¡ŒåŒ¹é…æŸ¥æ‰¾çš„æ—¶å€™éå¸¸æœ‰ç”¨ã€‚  </span></li><li><span>RAND()å‡½æ•°ä¸ ORDER BY å­—å¥çš„é…åˆä½¿ç”¨èƒ½å¤Ÿå®ç°éšæœºæŠ½å–æ ·æœ¬çš„åŠŸèƒ½ï¼Œè¿™ä¸ªæŠ€å·§</span>
<span>åœ¨è¿›è¡Œæ•°æ®ç»Ÿè®¡çš„æ—¶å€™å¾ˆæ–¹ä¾¿ã€‚ </span></li><li><span>GROUP BY çš„ WITH ROLLUP å­—å¥èƒ½å¤Ÿå®ç°ç±»ä¼¼äº OLAP çš„æŸ¥è¯¢ã€‚ </span></li><li><span>BIT å‡½æ•°ä¸ GROUP BY å­å¥çš„è”åˆä½¿ç”¨åœ¨æŸäº›åº”ç”¨åœºåˆå¯ä»¥å¤§å¤§é™ä½å­˜å‚¨é‡ï¼Œæé«˜</span>
<span>ç»Ÿè®¡æŸ¥è¯¢æ•ˆç‡ã€‚ </span></li><li><span>MySQL æ•°æ®åº“åå’Œè¡¨åçš„å¤§å°å†™ä¸æ“ä½œç³»ç»Ÿå¯¹å¤§å°å†™çš„æ•æ„Ÿæ€§å…³ç³»å¯†åˆ‡ï¼Œå› æ­¤éœ€</span>
<span>è¦æ ¼å¤–å¼•èµ·ç”¨æˆ·çš„æ³¨æ„ã€‚ </span></li><li><span>MySQL çš„å¤–é”®åŠŸèƒ½ä»…å¯¹ InnoDB å­˜å‚¨å¼•æ“çš„è¡¨æœ‰ä½œç”¨ï¼Œå…¶ä»–ç±»å‹å­˜å‚¨å¼•æ“çš„è¡¨è™½ç„¶</span>
<span>å¯ä»¥å»ºç«‹å¤–é”®ï¼Œä½†æ˜¯å¹¶ä¸èƒ½èµ·åˆ°å¤–é”®çš„ä½œç”¨ã€‚</span></li></ul><h1><a name="18-sqlä¼˜åŒ–" class="md-header-anchor"></a><span>18. SQLä¼˜åŒ–</span></h1><h2><a name="181-ä¼˜åŒ–sqlè¯­å¥çš„ä¸€èˆ¬æ­¥éª¤" class="md-header-anchor"></a><span>18.1 ä¼˜åŒ–SQLè¯­å¥çš„ä¸€èˆ¬æ­¥éª¤</span></h2><h3><a name="1811-é€šè¿‡-show-statuså‘½ä»¤äº†è§£å„ç§sqlçš„æ‰§è¡Œé¢‘ç‡" class="md-header-anchor"></a><span>18.1.1 é€šè¿‡ show statuså‘½ä»¤äº†è§£å„ç§SQLçš„æ‰§è¡Œé¢‘ç‡</span></h3><p><span>	</span><span>MySQLå®¢æˆ·ç«¯è¿æ¥æˆåŠŸåï¼Œé€šè¿‡</span><code>show[session|global]status</code><span>å‘½ä»¤å¯ä»¥æä¾›æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ‰€æœ‰å­˜å‚¨å¼•æ“çš„è¡¨ç»Ÿè®¡ä¿¡æ¯</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'Com_%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># InnoDBç›¸å…³çš„è¡¨ç»Ÿè®¡ä¿¡æ¯</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'Innodb_%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŸ¥çœ‹æ•°æ®åº“åŸºæœ¬æƒ…å†µ</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Connectionsï¼šè¯•å›¾è¿æ¥ MySQL æœåŠ¡å™¨çš„æ¬¡æ•°ã€‚ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Uptimeï¼šæœåŠ¡å™¨å·¥ä½œæ—¶é—´ã€‚ </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Slow_queriesï¼šæ…¢æŸ¥è¯¢çš„æ¬¡æ•°ã€‚</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'Connections|Uptime|Slow_queries'</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><span>Com_xxx è¡¨ç¤ºæ¯ä¸ª xxx è¯­å¥æ‰§è¡Œçš„æ¬¡æ•°ï¼Œæˆ‘ä»¬é€šå¸¸æ¯”è¾ƒå…³å¿ƒçš„æ˜¯ä»¥ä¸‹å‡ ä¸ªç»Ÿè®¡å‚æ•°ã€‚ </span></p><ul><li><span>Com_selectï¼šæ‰§è¡Œ select æ“ä½œçš„æ¬¡æ•°ï¼Œä¸€æ¬¡æŸ¥è¯¢åªç´¯åŠ  1ã€‚ </span></li><li><span>Com_insertï¼šæ‰§è¡Œ INSERT æ“ä½œçš„æ¬¡æ•°ï¼Œå¯¹äºæ‰¹é‡æ’å…¥çš„ INSERT æ“ä½œï¼Œåªç´¯åŠ ä¸€æ¬¡ã€‚ </span></li><li><span>Com_updateï¼šæ‰§è¡Œ UPDATE æ“ä½œçš„æ¬¡æ•°ã€‚ </span></li><li><span>Com_deleteï¼šæ‰§è¡Œ DELETE æ“ä½œçš„æ¬¡æ•°ã€‚</span></li></ul><h3><a name="1812-å®šä½æ‰§è¡Œæ•ˆç‡ä½çš„sqlè¯­å¥" class="md-header-anchor"></a><span>18.1.2 å®šä½æ‰§è¡Œæ•ˆç‡ä½çš„SQLè¯­å¥</span></h3><h3><a name="1813-é€šè¿‡explainåˆ†æä½æ•ˆç‡sqlçš„æ‰§è¡Œè®¡åˆ’" class="md-header-anchor"></a><span>18.1.3 é€šè¿‡EXPLAINåˆ†æä½æ•ˆç‡SQLçš„æ‰§è¡Œè®¡åˆ’</span></h3><p><span> é€šè¿‡ EXPLAIN æˆ–è€… DESC å‘½ä»¤è·å– MySQLå¦‚ä½•æ‰§è¡Œ SELECT è¯­å¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ¨ SELECT è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¡¨å¦‚ä½•è¿æ¥å’Œè¿æ¥çš„é¡ºåºã€‚</span></p><h3><a name="1814-ç¡®å®šé—®é¢˜å¹¶é‡‡å–ç›¸åº”çš„ä¼˜åŒ–æªæ–½" class="md-header-anchor"></a><span>18.1.4 ç¡®å®šé—®é¢˜å¹¶é‡‡å–ç›¸åº”çš„ä¼˜åŒ–æªæ–½</span></h3><p><span>å¦‚æœç»è¿‡ä¸Šè¿°æ­¥éª¤å·²ç»åˆ†æå‡ºé—®é¢˜å‡ºç°çš„åŸå› ï¼Œæ­¤æ—¶ç”¨æˆ·å¯ä»¥æ ¹æ®æƒ…å†µè¿›è¡Œç›¸åº”çš„ä¼˜åŒ–ã€‚</span></p><p><span>æ¯”å¦‚å…¨è¡¨æ‰«æå¯¼è‡´æŸ¥è¯¢æ•ˆç‡ä½å¯ä»¥è€ƒè™‘æ·»åŠ ç´¢å¼•ã€‚</span></p><h2><a name="182-ç´¢å¼•é—®é¢˜" class="md-header-anchor"></a><span>18.2 ç´¢å¼•é—®é¢˜</span></h2><h3><a name="1821-ç´¢å¼•çš„å­˜å‚¨åˆ†ç±»" class="md-header-anchor"></a><span>18.2.1 ç´¢å¼•çš„å­˜å‚¨åˆ†ç±»</span></h3><p><span>MyISAM å­˜å‚¨å¼•æ“çš„è¡¨çš„æ•°æ®å’Œç´¢å¼•æ˜¯è‡ªåŠ¨åˆ†å¼€å­˜å‚¨çš„ï¼Œå„è‡ªæ˜¯ç‹¬ç«‹çš„ä¸€ä¸ªæ–‡ä»¶ï¼›InnoDBå­˜å‚¨å¼•æ“çš„è¡¨çš„æ•°æ®å’Œç´¢å¼•æ˜¯å­˜å‚¨åœ¨åŒä¸€ä¸ªè¡¨ç©ºé—´é‡Œé¢ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªæ–‡ä»¶ç»„æˆã€‚</span></p><p><span>MySQL ä¸­ç´¢å¼•çš„å­˜å‚¨ç±»å‹ç›®å‰åªæœ‰ä¸¤ç§ï¼ˆBTREE å’Œ HASHï¼‰ï¼Œå…·ä½“å’Œè¡¨çš„å­˜å‚¨å¼•æ“ç›¸å…³ï¼š</span><strong><span>MyISAM å’Œ InnoDB å­˜å‚¨å¼•æ“éƒ½åªæ”¯æŒ BTREE ç´¢å¼•ï¼›MEMORY/HEAP å­˜å‚¨å¼•æ“å¯ä»¥æ”¯æŒ HASHå’Œ BTREE ç´¢å¼•</span></strong><span>ã€‚</span></p><h3><a name="1822-mysqlå¦‚ä½•ä½¿ç”¨ç´¢å¼•" class="md-header-anchor"></a><span>18.2.2 MySQLå¦‚ä½•ä½¿ç”¨ç´¢å¼•</span></h3><p><strong><span>1ã€ä½¿ç”¨ç´¢å¼•</span></strong></p><p><span>(1)å¤šåˆ—ç´¢å¼•ï¼Œæœ€å·¦åŸåˆ™ï¼ŒæŸ¥è¯¢çš„æ¡ä»¶ä¸­ç”¨åˆ°äº†æœ€å·¦è¾¹çš„åˆ—ï¼Œç´¢å¼•ä¸€èˆ¬å°±ä¼šä½¿ç”¨ã€‚</span></p><p><span>(2)likeæŸ¥è¯¢ï¼Œåé¢å¦‚æœæ˜¯å¸¸é‡å¹¶ä¸”</span><strong><span>åªæœ‰%å·ä¸åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦</span></strong><span>ï¼Œç´¢å¼•æ‰å¯èƒ½è¢«ä½¿ç”¨ã€‚</span></p><p><span>(3)å¦‚æœå¯¹å¤§çš„æ–‡æœ¬è¿›è¡Œæœç´¢ï¼Œä½¿ç”¨å…¨æ–‡ç´¢å¼•è€Œä¸ç”¨ä½¿ç”¨ like â€˜%â€¦%â€™ã€‚</span></p><p><strong><span>2ã€å­˜åœ¨ç´¢å¼•ä½†ä¸ä½¿ç”¨ç´¢å¼•</span></strong></p><p><span>(1)å¦‚æœ MySQL ä¼°è®¡ä½¿ç”¨ç´¢å¼•æ¯”å…¨è¡¨æ‰«ææ›´æ…¢ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚ä¾‹å¦‚å¦‚æœåˆ—key_part1 å‡åŒ€åˆ†å¸ƒåœ¨ 1 å’Œ 100 ä¹‹é—´ï¼Œä¸‹åˆ—æŸ¥è¯¢ä¸­ä½¿ç”¨ç´¢å¼•å°±ä¸æ˜¯å¾ˆå¥½ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> * <span class="cm-keyword">FROM</span> <span class="cm-keyword">table_name</span> <span class="cm-keyword">where</span> key_part1 &gt; <span class="cm-number">1</span> <span class="cm-keyword">and</span> key_part1 &lt; <span class="cm-number">90</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>(2)oråˆ†å‰²å¼€çš„æ¡ä»¶ï¼Œå¦‚æœorå‰çš„æ¡ä»¶çš„åˆ—ä¸­æœ‰ç´¢å¼•ï¼Œè€Œåé¢çš„åˆ—ä¸­æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠåˆ°çš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ç”¨åˆ°ã€‚</span></p><p><span>(3)likeåé¢çš„å€¼ä»¥%å¼€å¤´</span></p><p><span>(4)å¦‚æœåˆ—ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä¸€å®šè®°å¾—åœ¨ where æ¡ä»¶ä¸­æŠŠå­—ç¬¦å¸¸é‡å€¼ç”¨å¼•å·å¼•èµ·æ¥ï¼Œå¦åˆ™çš„è¯å³ä¾¿è¿™ä¸ªåˆ—ä¸Šæœ‰ç´¢å¼•ï¼ŒMySQL ä¹Ÿä¸ä¼šç”¨åˆ°çš„ã€‚</span></p><h3><a name="1823-æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ" class="md-header-anchor"></a><span>18.2.3 æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ</span></h3><p><span>å¦‚æœç´¢å¼•æ­£åœ¨å·¥ä½œï¼ŒHandler_read_key çš„å€¼å°†å¾ˆé«˜ï¼Œè¿™ä¸ªå€¼ä»£è¡¨äº†ä¸€ä¸ªè¡Œè¢«ç´¢å¼•å€¼è¯»çš„æ¬¡æ•°ï¼Œå¾ˆä½çš„å€¼è¡¨æ˜å¢åŠ ç´¢å¼•å¾—åˆ°çš„æ€§èƒ½æ”¹å–„ä¸é«˜ï¼Œå› ä¸ºç´¢å¼•å¹¶ä¸ç»å¸¸ä½¿ç”¨ã€‚ Handler_read_rnd_next çš„å€¼é«˜åˆ™æ„å‘³ç€æŸ¥è¯¢è¿è¡Œä½æ•ˆï¼Œå¹¶ä¸”åº”è¯¥å»ºç«‹ç´¢å¼•è¡¥æ•‘ã€‚è¿™ä¸ªå€¼çš„å«ä¹‰æ˜¯åœ¨æ•°æ®æ–‡ä»¶ä¸­è¯»ä¸‹ä¸€è¡Œçš„è¯·æ±‚æ•°ã€‚å¦‚æœæ­£è¿›è¡Œå¤§é‡çš„è¡¨æ‰«æï¼Œ</span><code>Handler_read_rnd_next</code><span>çš„å€¼è¾ƒé«˜ï¼Œåˆ™é€šå¸¸è¯´æ˜è¡¨ç´¢å¼•ä¸æ­£ç¡®æˆ–å†™å…¥çš„æŸ¥è¯¢æ²¡æœ‰åˆ©ç”¨ç´¢å¼•ï¼Œå…·ä½“å¦‚ä¸‹ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'Handler_read%'</span>; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+-------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-keyword">Value</span> | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+-------+ </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Handler_read_first &nbsp;  | <span class="cm-number">0</span> &nbsp; &nbsp; | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Handler_read_key &nbsp; &nbsp;  | <span class="cm-number">5</span> &nbsp; &nbsp; | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Handler_read_next &nbsp; &nbsp; | <span class="cm-number">0</span> &nbsp; &nbsp; | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Handler_read_prev &nbsp; &nbsp; | <span class="cm-number">0</span> &nbsp; &nbsp; | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Handler_read_rnd &nbsp; &nbsp;  | <span class="cm-number">0</span> &nbsp; &nbsp; | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Handler_read_rnd_next | <span class="cm-number">2055</span>  | </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+-----------------------+-------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><h2><a name="183-ä¸¤ä¸ªç®€å•å®ç”¨çš„ä¼˜åŒ–æ–¹æ³•" class="md-header-anchor"></a><span>18.3 ä¸¤ä¸ªç®€å•å®ç”¨çš„ä¼˜åŒ–æ–¹æ³•</span></h2><h3><a name="1831-å®šæœŸåˆ†æè¡¨å’Œæ£€æŸ¥è¡¨" class="md-header-anchor"></a><span>18.3.1 å®šæœŸåˆ†æè¡¨å’Œæ£€æŸ¥è¡¨</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">analyze</span> <span class="cm-keyword">table</span> tb1_name[,tb2_name]...</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">check</span> <span class="cm-keyword">table</span> tb_name...;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><h3><a name="1832-å®šæœŸä¼˜åŒ–è¡¨" class="md-header-anchor"></a><span>18.3.2 å®šæœŸä¼˜åŒ–è¡¨</span></h3><p><span>ä¼˜åŒ–è¡¨çš„è¯­æ³•å¦‚ä¸‹ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">OPTIMIZE</span> [<span class="cm-keyword">LOCAL</span> | <span class="cm-keyword">NO_WRITE_TO_BINLOG</span>] <span class="cm-keyword">TABLE</span> tbl_name [, tbl_name] ...</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>å¦‚æœå·²ç»åˆ é™¤äº†è¡¨çš„ä¸€å¤§éƒ¨åˆ†ï¼Œæˆ–è€…å¦‚æœå·²ç»å¯¹å«æœ‰å¯å˜é•¿åº¦è¡Œçš„è¡¨ï¼ˆå«æœ‰ VARCHARã€BLOB æˆ– TEXT åˆ—çš„è¡¨ï¼‰è¿›è¡Œäº†å¾ˆå¤šæ›´æ”¹ï¼Œåˆ™åº”ä½¿ç”¨ OPTIMIZE TABLE å‘½ä»¤æ¥è¿›è¡Œè¡¨ä¼˜åŒ–ã€‚è¿™ä¸ªå‘½ä»¤å¯ä»¥å°†è¡¨ä¸­çš„ç©ºé—´ç¢ç‰‡è¿›è¡Œåˆå¹¶ï¼Œå¹¶ä¸”å¯ä»¥æ¶ˆé™¤ç”±äºåˆ é™¤æˆ–è€…æ›´æ–°é€ æˆçš„ç©ºé—´æµªè´¹ï¼Œä½†OPTIMIZE TABLE å‘½ä»¤åªå¯¹ MyISAMã€BDB å’Œ InnoDB è¡¨èµ·ä½œç”¨ã€‚</span></p><blockquote><p><span>ANALYZEã€CHECKã€OPTIMIZE æ‰§è¡ŒæœŸé—´å°†å¯¹è¡¨è¿›è¡Œé”å®šï¼Œå› æ­¤ä¸€å®šæ³¨æ„è¦åœ¨æ•°æ®åº“ä¸ç¹å¿™çš„æ—¶å€™æ‰§è¡Œç›¸å…³çš„æ“ä½œã€‚</span></p></blockquote><h2><a name="184-å¸¸ç”¨sqlçš„ä¼˜åŒ–" class="md-header-anchor"></a><span>18.4 å¸¸ç”¨SQLçš„ä¼˜åŒ–</span></h2><p><span>æœç´¢èµ„æ–™äº†è§£ï¼Œ</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">USE</span> <span class="cm-keyword">INDEX</span>(index_name...);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">IGGNORE <span class="cm-keyword">INDEX</span>(index_name...);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">FORCE</span> <span class="cm-keyword">INDEX</span>(index_name...);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h1><a name="19-ä¼˜åŒ–æ•°æ®åº“å¯¹è±¡" class="md-header-anchor"></a><span>19. ä¼˜åŒ–æ•°æ®åº“å¯¹è±¡</span></h1><h2><a name="191-ä¼˜åŒ–è¡¨çš„æ•°æ®ç±»å‹" class="md-header-anchor"></a><span>19.1 ä¼˜åŒ–è¡¨çš„æ•°æ®ç±»å‹</span></h2><p><span>åœ¨MySQLä¸­ï¼Œå¯ä»¥ä½¿ç”¨PROCEDURE ANALYSE()å¯¹å½“å‰åº”ç”¨çš„è¡¨è¿›è¡Œåˆ†æï¼Œè¯¥å‡½æ•°å¯ä»¥å¯¹æ•°æ®è¡¨åˆ—çš„æ•°æ®ç±»å‹æå‡ºä¼˜åŒ–å»ºè®®ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®åº”ç”¨çš„å®é™…æƒ…å†µé…Œæƒ…è€ƒè™‘æ˜¯å¦å®æ–½ä¼˜åŒ–ã€‚</span></p><p><span>ä½¿ç”¨æ–¹æ³•ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> tb_name <span class="cm-keyword">procedure</span> analyse();</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ä¸ä¸ºé‚£äº›åŒ…å«çš„å€¼å¤šäº16ä¸ªæˆ–è€…256å­—èŠ‚çš„ENUMç±»å‹æå‡ºå»ºè®®</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">select</span> * <span class="cm-keyword">from</span> tb_name <span class="cm-keyword">procedure</span> analyse(<span class="cm-number">16</span>,<span class="cm-number">256</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><h2><a name="192-é€šè¿‡æ‹†åˆ†æé«˜è¡¨çš„è®¿é—®æ•ˆç‡" class="md-header-anchor"></a><span>19.2 é€šè¿‡æ‹†åˆ†æé«˜è¡¨çš„è®¿é—®æ•ˆç‡</span></h2><p><span>è¿™é‡Œæ‰€è¯´çš„</span><strong><span>â€œæ‹†åˆ†â€ï¼Œæ˜¯æŒ‡å¯¹æ•°æ®è¡¨è¿›è¡Œæ‹†åˆ†</span></strong><span>ã€‚å¦‚æœé’ˆå¯¹ </span><strong><span>MyISAM</span></strong><span> ç±»å‹çš„è¡¨è¿›è¡Œæ‹†åˆ†ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§æ‹†åˆ†æ–¹æ³•ã€‚</span></p><p><span>(1)å‚ç›´æ‹†åˆ†</span></p><p><span>å°†è¡¨ä¸­çš„åŒ…å«çš„åˆ—éƒ¨åˆ†æ‹†å¼€ï¼Œè½¬ç§»åˆ°å¦ä¸€ä¸ªè¡¨ã€‚å‚ç›´æ‹†åˆ†å¯ä»¥æŒ‰ä»¥ä¸‹åŸåˆ™è¿›è¡Œï¼š</span></p><ul><li><span>æŠŠä¸å¸¸ç”¨çš„å­—æ®µå•ç‹¬å­˜æ”¾åˆ°ä¸€ä¸ªè¡¨ä¸­</span></li><li><span>æŠŠå¤§å­—æ®µç‹¬ç«‹å­˜æ”¾åˆ°ä¸€ä¸ªè¡¨ä¸­</span></li><li><span>æŠŠç»å¸¸ä¸€èµ·ä½¿ç”¨çš„å­—æ®µæ”¾ä¸€èµ·</span></li></ul><p><span>(2)æ°´å¹³æ‹†åˆ†</span></p><p><span>è¡¨çš„æ°´å¹³æ‹†åˆ†æ˜¯ä¸ºäº†è§£å†³å•è¡¨çš„æ•°æ®é‡è¿‡å¤§çš„é—®é¢˜ï¼Œæ°´å¹³æ‹†åˆ†çš„è¡¨æ¯ä¸€ä¸ªè¡¨çš„ç»“æ„éƒ½æ˜¯ä¸€è‡´çš„ã€‚</span></p><h2><a name="193-é€†è§„èŒƒåŒ–" class="md-header-anchor"></a><span>19.3 é€†è§„èŒƒåŒ–</span></h2><p><span>è§„èŒƒåŒ–è¶Šé«˜ï¼Œé‚£ä¹ˆäº§ç”Ÿçš„å…³ç³»å°±è¶Šå¤šï¼Œå…³ç³»è¿‡å¤šçš„ç›´æ¥ç»“æœå°±æ˜¯å¯¼è‡´è¡¨ä¹‹é—´çš„è¿æ¥æ“ä½œè¶Šé¢‘ç¹ï¼Œè€Œè¡¨ä¹‹é—´çš„è¿æ¥æ“ä½œæ˜¯æ€§èƒ½è¾ƒä½çš„æ“ä½œï¼Œç›´æ¥å½±å“åˆ°æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œæ‰€ä»¥å¯¹äºæŸ¥è¯¢è¾ƒå¤šçš„åº”ç”¨å°±éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿ç”¨é€†è§„èŒƒåŒ–å¯¹æ•°æ®è¿›è¡Œè®¾è®¡ï¼Œé€šè¿‡é€†è§„èŒƒåŒ–æ¥æé«˜æŸ¥è¯¢çš„æ€§èƒ½ã€‚ </span>
<span>åè§„èŒƒçš„å¥½å¤„æ˜¯é™ä½è¿æ¥æ“ä½œçš„éœ€æ±‚ã€é™ä½å¤–ç å’Œç´¢å¼•çš„æ•°ç›®ï¼Œè¿˜å¯èƒ½å‡å°‘è¡¨çš„æ•°ç›®ï¼Œç›¸åº”å¸¦æ¥çš„é—®é¢˜æ˜¯å¯èƒ½å‡ºç°æ•°æ®çš„å®Œæ•´æ€§é—®é¢˜ã€‚</span></p><p><span>å¸¸ç”¨çš„åè§„èŒƒæŠ€æœ¯æœ‰ï¼š</span><strong><span>å¢åŠ å†—ä½™åˆ—</span></strong><span>ã€å¢åŠ æ´¾ç”Ÿåˆ—ã€é‡æ–°ç»„è¡¨å’Œåˆ†å‰²è¡¨ã€‚</span></p><p><span>ï¼ˆ1ï¼‰å¢åŠ å†—ä½™åˆ—ï¼šæŒ‡åœ¨å¤šä¸ªè¡¨ä¸­å…·æœ‰ç›¸åŒçš„åˆ—ï¼Œå®ƒå¸¸ç”¨æ¥åœ¨æŸ¥è¯¢æ—¶é¿å…è¿æ¥æ“ä½œã€‚</span></p><p><span>ï¼ˆ2ï¼‰å¢åŠ æ´¾ç”Ÿåˆ—ï¼šæŒ‡å¢åŠ çš„åˆ—æ¥è‡ªå…¶ä»–è¡¨ä¸­çš„æ•°æ®ï¼Œç”±å…¶ä»–è¡¨ä¸­çš„æ•°æ®ç»è¿‡è®¡ç®—ç”Ÿæˆã€‚å¢åŠ çš„æ´¾ç”Ÿåˆ—å…¶ä½œç”¨æ˜¯åœ¨æŸ¥è¯¢æ—¶å‡å°‘è¿æ¥æ“ä½œï¼Œé¿å…ä½¿ç”¨é›†å‡½æ•°ã€‚</span></p><p><span>ï¼ˆ3ï¼‰é‡æ–°ç»„è¡¨ï¼šæŒ‡å¦‚æœè®¸å¤šç”¨æˆ·éœ€è¦æŸ¥çœ‹ä¸¤ä¸ªè¡¨è¿æ¥å‡ºæ¥çš„ç»“æœæ•°æ®ï¼Œåˆ™æŠŠè¿™ä¸¤ä¸ªè¡¨é‡æ–°ç»„æˆä¸€ä¸ªè¡¨æ¥å‡å°‘è¿æ¥è€Œæé«˜æ€§èƒ½ã€‚</span></p><p><span>ï¼ˆ4ï¼‰åˆ†å‰²è¡¨ï¼šæ ¹æ®éœ€æ±‚å°†ä¸€ä¸ªè¡¨åˆ†å‰²æˆå¤šä¸ªè¡¨å­˜å‚¨ã€‚</span></p><p><span>é€†è§„èŒƒæŠ€æœ¯éœ€è¦ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§ã€‚æ— è®ºä½¿ç”¨ä½•ç§åè§„èŒƒæŠ€æœ¯ï¼Œéƒ½éœ€è¦ä¸€å®šçš„ç®¡ç†æ¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯æ‰¹å¤„ç†ç»´æŠ¤ã€åº”ç”¨é€»è¾‘å’Œè§¦å‘å™¨ã€‚</span></p><p><span>ï¼ˆ1ï¼‰æ‰¹å¤„ç†ç»´æŠ¤ï¼šæŒ‡å¯¹å¤åˆ¶åˆ—æˆ–æ´¾ç”Ÿåˆ—çš„ä¿®æ”¹ç§¯ç´¯ä¸€å®šçš„æ—¶é—´åï¼Œè¿è¡Œä¸€æ‰¹å¤„ç†ä½œä¸šæˆ–å­˜å‚¨è¿‡ç¨‹å¯¹å¤åˆ¶æˆ–æ´¾ç”Ÿåˆ—è¿›è¡Œä¿®æ”¹ï¼Œè¿™åªèƒ½åœ¨å¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</span></p><p><span>ï¼ˆ2ï¼‰æ•°æ®çš„å®Œæ•´æ€§ä¹Ÿå¯ç”±åº”ç”¨é€»è¾‘æ¥å®ç°ï¼Œè¿™å°±è¦æ±‚å¿…é¡»åœ¨åŒä¸€äº‹åŠ¡ä¸­å¯¹æ‰€æœ‰æ¶‰åŠçš„è¡¨è¿›è¡Œå¢ã€åˆ ã€æ”¹æ“ä½œã€‚ç”¨åº”ç”¨é€»è¾‘æ¥å®ç°æ•°æ®çš„å®Œæ•´æ€§é£é™©è¾ƒå¤§ï¼Œå› ä¸ºåŒä¸€é€»è¾‘å¿…é¡»åœ¨æ‰€æœ‰çš„åº”ç”¨ä¸­ä½¿ç”¨å’Œç»´æŠ¤ï¼Œå®¹æ˜“é—æ¼ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€æ±‚å˜åŒ–æ—¶ï¼Œä¸æ˜“äºç»´æŠ¤ã€‚</span></p><p><span>ï¼ˆ3ï¼‰å¦ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨è§¦å‘å™¨ï¼Œå¯¹æ•°æ®çš„ä»»ä½•ä¿®æ”¹ç«‹å³è§¦å‘å¯¹å¤åˆ¶åˆ—æˆ–æ´¾ç”Ÿåˆ—çš„ç›¸åº”ä¿®æ”¹ã€‚è§¦å‘å™¨æ˜¯å®æ—¶çš„ï¼Œè€Œä¸”ç›¸åº”çš„å¤„ç†é€»è¾‘åªåœ¨ä¸€ä¸ªåœ°æ–¹å‡ºç°ï¼Œæ˜“äºç»´æŠ¤ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯è§£å†³è¿™ç±»é—®é¢˜æ¯”è¾ƒå¥½çš„åŠæ³•ã€‚é€†è§„èŒƒæŠ€æœ¯éœ€è¦ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§ã€‚æ— è®ºä½¿ç”¨ä½•ç§åè§„èŒƒæŠ€æœ¯ï¼Œéƒ½éœ€è¦ä¸€å®šçš„ç®¡ç†æ¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯æ‰¹å¤„ç†ç»´æŠ¤ã€åº”ç”¨é€»è¾‘å’Œè§¦å‘å™¨ã€‚</span></p><p><span>ï¼ˆ1ï¼‰æ‰¹å¤„ç†ç»´æŠ¤ï¼šæŒ‡å¯¹å¤åˆ¶åˆ—æˆ–æ´¾ç”Ÿåˆ—çš„ä¿®æ”¹ç§¯ç´¯ä¸€å®šçš„æ—¶é—´åï¼Œè¿è¡Œä¸€æ‰¹å¤„ç†ä½œä¸šæˆ–å­˜å‚¨è¿‡ç¨‹å¯¹å¤åˆ¶æˆ–æ´¾ç”Ÿåˆ—è¿›è¡Œä¿®æ”¹ï¼Œè¿™åªèƒ½åœ¨å¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</span></p><p><span>ï¼ˆ2ï¼‰æ•°æ®çš„å®Œæ•´æ€§ä¹Ÿå¯ç”±åº”ç”¨é€»è¾‘æ¥å®ç°ï¼Œè¿™å°±è¦æ±‚å¿…é¡»åœ¨åŒä¸€äº‹åŠ¡ä¸­å¯¹æ‰€æœ‰æ¶‰åŠçš„è¡¨è¿›è¡Œå¢ã€åˆ ã€æ”¹æ“ä½œã€‚ç”¨åº”ç”¨é€»è¾‘æ¥å®ç°æ•°æ®çš„å®Œæ•´æ€§é£é™©è¾ƒå¤§ï¼Œå› ä¸ºåŒä¸€é€»è¾‘å¿…é¡»åœ¨æ‰€æœ‰çš„åº”ç”¨ä¸­ä½¿ç”¨å’Œç»´æŠ¤ï¼Œå®¹æ˜“é—æ¼ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€æ±‚å˜åŒ–æ—¶ï¼Œä¸æ˜“äºç»´æŠ¤ã€‚</span></p><p><span>ï¼ˆ3ï¼‰å¦ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨è§¦å‘å™¨ï¼Œå¯¹æ•°æ®çš„ä»»ä½•ä¿®æ”¹ç«‹å³è§¦å‘å¯¹å¤åˆ¶åˆ—æˆ–æ´¾ç”Ÿåˆ—çš„ç›¸åº”ä¿®æ”¹ã€‚è§¦å‘å™¨æ˜¯å®æ—¶çš„ï¼Œè€Œä¸”ç›¸åº”çš„å¤„ç†é€»è¾‘åªåœ¨ä¸€ä¸ªåœ°æ–¹å‡ºç°ï¼Œæ˜“äºç»´æŠ¤ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯è§£å†³è¿™ç±»é—®é¢˜æ¯”è¾ƒå¥½çš„åŠæ³•ã€‚</span></p><h2><a name="194-ä½¿ç”¨ä¸­é—´è¡¨æé«˜ç»Ÿè®¡æŸ¥è¯¢é€Ÿåº¦" class="md-header-anchor"></a><span>19.4 ä½¿ç”¨ä¸­é—´è¡¨æé«˜ç»Ÿè®¡æŸ¥è¯¢é€Ÿåº¦</span></h2><p><span>å¯¹äºæ•°æ®é‡è¾ƒå¤§çš„è¡¨ï¼Œåœ¨å…¶ä¸Šè¿›è¡Œç»Ÿè®¡æŸ¥è¯¢é€šå¸¸ä¼šæ•ˆç‡å¾ˆä½ï¼Œå¹¶ä¸”è¿˜è¦è€ƒè™‘ç»Ÿè®¡æŸ¥è¯¢æ˜¯å¦ä¼šå¯¹åœ¨çº¿çš„åº”ç”¨äº§ç”Ÿè´Ÿé¢å½±å“ã€‚é€šå¸¸åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ä¸­é—´è¡¨å¯ä»¥æé«˜ç»Ÿè®¡æŸ¥è¯¢çš„æ•ˆç‡ã€‚</span></p><p><span>ä¸­é—´è¡¨åœ¨ç»Ÿè®¡æŸ¥è¯¢ä¸­ç»å¸¸ä¼šç”¨åˆ°ï¼Œå…¶ä¼˜ç‚¹å¦‚ä¸‹: </span></p><ul><li><span>ä¸­é—´è¡¨å¤åˆ¶æºè¡¨éƒ¨åˆ†æ•°æ®ï¼Œå¹¶ä¸”ä¸æºè¡¨ç›¸â€œéš”ç¦»â€ï¼Œåœ¨ä¸­é—´è¡¨ä¸Šåšç»Ÿè®¡æŸ¥è¯¢ä¸ä¼šå¯¹åœ¨çº¿åº”ç”¨äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</span></li><li><span>ä¸­é—´è¡¨ä¸Šå¯ä»¥çµæ´»çš„æ·»åŠ ç´¢å¼•æˆ–å¢åŠ ä¸´æ—¶ç”¨çš„æ–°å­—æ®µ,ä»è€Œè¾¾åˆ°æé«˜ç»Ÿè®¡æŸ¥è¯¢æ•ˆç‡å’Œè¾…åŠ©ç»Ÿè®¡æŸ¥è¯¢ä½œç”¨ã€‚</span></li></ul><h1><a name="20-é”é—®é¢˜" class="md-header-anchor"></a><span>20. é”é—®é¢˜</span></h1><p><span>é”æ—¶è®¡ç®—æœºåè°ƒå¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å¹¶å‘è®¿é—®æŸä¸€èµ„æºçš„æœºåˆ¶ï¼Œå¹¶å‘è®¿é—®æ§åˆ¶çš„åŸºç¡€ã€‚</span></p><h2><a name="201-mysqlé”æ¦‚è¿°" class="md-header-anchor"></a><span>20.1 MySQLé”æ¦‚è¿°</span></h2><p><span>MySQLä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒä¸åŒçš„æ‰€æœºåˆ¶ã€‚æ¯”å¦‚ï¼ŒMyISAMå’ŒMEMORYä½¿ç”¨çš„æ˜¯è¡¨çº§é”(table-level locking);BDBå­˜å‚¨å¼•æ“é‡‡ç”¨çš„æ˜¯é¡µé¢é”ï¼ˆpage-level lockingï¼‰ï¼Œä½†ä¹Ÿæ”¯æŒè¡¨çº§é”ï¼›InnoDBå­˜å‚¨å¼•æ“æ—¢æ”¯æŒè¡Œçº§é”(row-level locking)ï¼Œä¹Ÿæ”¯æŒè¡¨çº§é”ï¼Œé»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨çš„æ˜¯è¡Œçº§é”ã€‚</span></p><p><span>MySQLé”çš„ç‰¹æ€§</span></p><ul><li><span>è¡¨çº§é”ï¼šå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼Œ</span><strong><span>æ— æ­»é”</span></strong><span>ï¼Œé”å®šç²’åº¦å¤§ï¼Œé”å†²çªæ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½</span></li><li><span>è¡Œçº§é”ï¼šå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼Œ</span><strong><span>å­˜åœ¨æ­»é”</span></strong><span>ï¼Œé”å®šç²’åº¦å°ï¼Œé”å†²çªæ¦‚ç‡æœ€å°ï¼Œå¹¶å‘åº¦æœ€é«˜</span></li><li><span>é¡µé¢é”ï¼šç‰¹ç‚¹ä»‹äºè¡Œçº§é”å’Œè¡¨çº§é”ä¹‹é—´</span></li></ul><blockquote><p><span>MyISAMä¸æ”¯æŒäº‹åŠ¡ï¼Œæ‰€ä»¥å¯¹å…¶è®¾ç½® </span><code>set autocommit = 0</code><span>æ— æ•ˆï¼Œåªæœ‰å¯¹æ”¯æŒäº‹åŠ¡çš„å­˜å‚¨å¼•æ“ï¼ˆInnoDBï¼‰æ‰ç”Ÿæ•ˆã€‚</span></p></blockquote><h2><a name="202-myisamè¡¨é”" class="md-header-anchor"></a><span>20.2 MyISAMè¡¨é”</span></h2><p><span>MyISAM å­˜å‚¨å¼•æ“åªæ”¯æŒè¡¨é”ï¼Œå¦‚æœå¯¹å¹¶å‘è¦æ±‚ä¸é«˜ï¼Œå¹¶ä¸”ä¸»è¦ä»¥æŸ¥è¯¢ä¸ºä¸»çš„ä¸šåŠ¡ï¼Œå¯ä»¥é‡‡ç”¨MyISAMã€‚</span></p><h3><a name="2021-mysqlè¡¨çº§é”çš„é”æ¨¡å¼" class="md-header-anchor"></a><span>20.2.1 MySQLè¡¨çº§é”çš„é”æ¨¡å¼</span></h3><p><span>MySQL çš„è¡¨çº§é”æœ‰ä¸¤ç§æ¨¡å¼ï¼š</span><strong><span>è¡¨å…±äº«è¯»é”</span></strong><span>ï¼ˆTable Read Lockï¼‰å’Œ</span><strong><span>è¡¨ç‹¬å å†™é”</span></strong><span>ï¼ˆTable Write Lockï¼‰ã€‚</span></p><p><span>é”æ¨¡å¼çš„å…¼å®¹æ€§å¦‚ä¸‹ï¼š</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192132.png" referrerpolicy="no-referrer"></p><p><span>æ ¹æ®ä¸Šå›¾ï¼Œå¯¹äºå­˜å‚¨å¼•æ“ä¸ºMyISAMçš„è¡¨ï¼Œä¸ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹è¡¨åŠ è¯»é”ï¼Œ</span><strong><span>å¯ä»¥å¯¹è¡¨åŠ å¤šä¸ªè¯»é”</span></strong><span>ï¼Œä½†ä¼šé˜»å¡å¯¹åŒä¸€è¡¨åŠ å¤šä¸ªå†™é”ï¼›å¯¹ MyISAM è¡¨çš„å†™æ“ä½œï¼Œåˆ™ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨çš„è¯»å’Œå†™æ“ä½œï¼›</span><strong><span>MyISAM è¡¨çš„è¯»æ“ä½œä¸å†™æ“ä½œä¹‹é—´ï¼Œä»¥åŠå†™æ“ä½œä¹‹é—´æ˜¯ä¸²è¡Œçš„</span></strong><span>ï¼</span></p><blockquote><p><span>å¯¹è¡¨åŠ è¯»é”ï¼Œä¼šè¯éƒ½å¯è¯»ï¼Œä¸å¯å†™ï¼Œä½†æ˜¯åŠ é”çš„ä¼šè¯ä¸èƒ½è¯»å…¶å®ƒæœªåŠ é”çš„è¡¨ã€‚</span></p><p><span>å¯¹è¡¨åŠ å†™é”ï¼Œåªæœ‰åŠ é”çš„ä¼šè¯èƒ½è¯»å†™è¡¨ï¼Œå…¶ä½™ä¼šè¯ä¸å¯è¯»å†™è¡¨ã€‚</span></p></blockquote><p><span>è¡¨çº§é”çš„åŠ é”å’Œè§£é”è¯­å¥ï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">LOCK</span> <span class="cm-keyword">TABLES</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  tbl_name [[<span class="cm-keyword">AS</span>] alias] lock_type</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [, tbl_name [[<span class="cm-keyword">AS</span>] alias] lock_type] ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">lock_type: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">READ</span> [<span class="cm-keyword">LOCAL</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | [<span class="cm-keyword">LOW_PRIORITY</span>] <span class="cm-keyword">WRITE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">UNLOCK</span> <span class="cm-keyword">TABLES</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 230px;"></div><div class="CodeMirror-gutters" style="display: none; height: 230px;"></div></div></div></pre><p><span>ä¸‹é¢æ¼”ç¤ºäº†å½“ä¸€ä¸ªçº¿ç¨‹è·å¾—å¯¹ä¸€ä¸ªè¡¨çš„å†™é”åï¼Œåªæœ‰æŒæœ‰é”çš„çº¿ç¨‹å¯ä»¥å¯¹è¡¨è¿›è¡Œæ›´æ–°æ“ä½œã€‚å…¶ä»–çº¿ç¨‹çš„è¯»ã€å†™æ“ä½œéƒ½ä¼šç­‰å¾…ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ä¸ºæ­¢ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192126.png" referrerpolicy="no-referrer"></p><h3><a name="2022-å¦‚ä½•åŠ è¡¨é”" class="md-header-anchor"></a><span>20.2.2 å¦‚ä½•åŠ è¡¨é”</span></h3><p><strong><span>MyISAM åœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼ˆSELECTï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œåœ¨æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆUPDATEã€DELETEã€INSERT ç­‰ï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”</span></strong><span>ï¼Œè¿™ä¸ªè¿‡ç¨‹å¹¶ä¸éœ€è¦ç”¨æˆ·å¹²é¢„ï¼Œå› æ­¤ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸éœ€è¦ç›´æ¥ç”¨ LOCK TABLE å‘½ä»¤ç»™ MyISAM è¡¨æ˜¾å¼åŠ é”ã€‚</span></p><p><span>ç»™ MyISAM è¡¨æ˜¾ç¤ºåŠ é”ï¼Œä¸€èˆ¬æ˜¯ä¸ºäº†åœ¨ä¸€å®šç¨‹åº¦æ¨¡æ‹Ÿäº‹åŠ¡æ“ä½œï¼Œå®ç°å¯¹æŸä¸€æ—¶é—´ç‚¹å¤šä¸ªè¡¨çš„ä¸€è‡´æ€§è¯»å–ã€‚</span></p><p><span>åœ¨ç”¨ LOCK TABLES ç»™è¡¨æ˜¾å¼åŠ è¡¨é”æ—¶ï¼Œå¿…é¡»åŒæ—¶å–å¾—æ‰€æœ‰æ¶‰åŠåˆ°è¡¨çš„é”ï¼Œå¹¶ä¸” MySQL ä¸æ”¯æŒé”å‡çº§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ</span><strong><span>åœ¨æ‰§è¡Œ LOCK TABLES åï¼Œåªèƒ½è®¿é—®æ˜¾å¼åŠ é”çš„è¿™äº›è¡¨ï¼Œä¸èƒ½è®¿é—®æœªåŠ é”çš„è¡¨</span></strong><span>ï¼›åŒæ—¶ï¼Œ</span><strong><span>å¦‚æœåŠ çš„æ˜¯è¯»é”ï¼Œé‚£ä¹ˆåªèƒ½æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œè€Œä¸èƒ½æ‰§è¡Œæ›´æ–°æ“ä½œ</span></strong><span>ã€‚å…¶å®ï¼Œåœ¨è‡ªåŠ¨åŠ é”çš„æƒ…å†µä¸‹ä¹ŸåŸºæœ¬å¦‚æ­¤ï¼ŒMyISAM æ€»æ˜¯ä¸€æ¬¡è·å¾— SQL è¯­å¥æ‰€éœ€è¦çš„å…¨éƒ¨é”ã€‚è¿™ä¹Ÿæ­£æ˜¯ MyISAM è¡¨ä¸ä¼šå‡ºç°æ­»é”ï¼ˆDeadlock Freeï¼‰çš„åŸå› ã€‚</span></p><p><span>ä¸€ä¸ª session ä½¿ç”¨ LOCK TABLE å‘½ä»¤ç»™è¡¨ film_text åŠ äº†è¯»é”ï¼Œ</span><strong><span>è¿™ä¸ª session å¯ä»¥æŸ¥è¯¢é”å®šè¡¨ä¸­çš„è®°å½•ï¼Œä½†æ›´æ–°æˆ–è®¿é—®å…¶ä»–è¡¨éƒ½ä¼šæç¤ºé”™è¯¯</span></strong><span>ï¼›åŒæ—¶ï¼Œå¦å¤–ä¸€ä¸ªsession å¯ä»¥æŸ¥è¯¢è¡¨ä¸­çš„è®°å½•ï¼Œä½†æ›´æ–°å°±ä¼šå‡ºç°é”ç­‰å¾…ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192122.png" referrerpolicy="no-referrer"></p><h3><a name="2023-å¹¶å‘æ’å…¥concurrent-inserts" class="md-header-anchor"></a><span>20.2.3 å¹¶å‘æ’å…¥(Concurrent Inserts)</span></h3><p><span>ä¸Šæ–‡æåˆ°è¿‡ MyISAM è¡¨çš„è¯»å’Œå†™æ˜¯ä¸²è¡Œçš„ï¼Œä½†è¿™æ˜¯å°±æ€»ä½“è€Œè¨€çš„ã€‚åœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼ŒMyISAMè¡¨ä¹Ÿæ”¯æŒæŸ¥è¯¢å’Œæ’å…¥æ“ä½œçš„å¹¶å‘è¿›è¡Œï¼Œåœ¨å¯¹è¡¨è¯»æ“ä½œçš„åŒæ—¶ï¼Œè¿›è¡Œæ›´æ–°æ“ä½œã€‚</span></p><p><span>MyISAMå­˜å‚¨å¼•æ“æœ‰ä¸€ä¸ªç³»ç»Ÿå˜é‡concurrent_insertï¼Œä¸“é—¨ç”¨ä»¥æ§åˆ¶å…¶å¹¶å‘æ’å…¥çš„è¡Œä¸ºï¼Œå…¶å€¼åˆ†åˆ«å¯ä»¥ä¸º0ã€1æˆ–2ã€‚ </span></p><ul><li><span>å½“concurrent_insertè®¾ç½®ä¸º0æ—¶ï¼Œä¸å…è®¸å¹¶å‘æ’å…¥ã€‚ </span></li><li><span>å½“concurrent_insertè®¾ç½®ä¸º1æ—¶ï¼Œå¦‚æœMyISAMè¡¨ä¸­æ²¡æœ‰ç©ºæ´ï¼ˆå³è¡¨çš„ä¸­é—´æ²¡æœ‰è¢«åˆ é™¤çš„è¡Œï¼‰ï¼ŒMyISAMå…è®¸åœ¨ä¸€ä¸ªè¿›ç¨‹è¯»è¡¨çš„åŒæ—¶ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹ä»è¡¨å°¾æ’å…¥è®°å½•ã€‚è¿™ä¹Ÿæ˜¯MySQLçš„é»˜è®¤è®¾ç½®ã€‚ </span></li><li><span>å½“concurrent_insertè®¾ç½®ä¸º2æ—¶ï¼Œæ— è®ºMyISAMè¡¨ä¸­æœ‰æ²¡æœ‰ç©ºæ´ï¼Œéƒ½å…è®¸åœ¨è¡¨å°¾å¹¶å‘æ’å…¥</span>
<span>è®°å½•ã€‚</span></li></ul><h3><a name="2024-myisamçš„é”è°ƒåº¦" class="md-header-anchor"></a><span>20.2.4 MyISAMçš„é”è°ƒåº¦</span></h3><p><span>MyISAMå­˜å‚¨å¼•æ“çš„è¯»é”å’Œå†™é”æ˜¯äº’æ–¥çš„ï¼Œè¯»å†™æ“ä½œæ˜¯ä¸²è¡Œçš„ã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªè¿›ç¨‹è¯·æ±‚æŸä¸ª MyISAM è¡¨çš„è¯»é”ï¼ŒåŒæ—¶å¦ä¸€ä¸ªè¿›ç¨‹ä¹Ÿè¯·æ±‚åŒä¸€è¡¨çš„å†™é”ï¼ŒMySQL å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</span>
<span>ç­”æ¡ˆæ˜¯</span><strong><span>å†™è¿›ç¨‹å…ˆè·å¾—é”</span></strong><span>ã€‚å³ä½¿è¯»è¯·æ±‚å…ˆåˆ°é”ç­‰å¾…é˜Ÿåˆ—ï¼Œå†™è¯·æ±‚ååˆ°ï¼Œå†™é”ä¹Ÿä¼šæ’åˆ°è¯»é”è¯·æ±‚ä¹‹å‰ï¼è¿™æ˜¯å› ä¸ºMySQL è®¤ä¸ºå†™è¯·æ±‚ä¸€èˆ¬æ¯”è¯»è¯·æ±‚è¦é‡è¦ã€‚è¿™ä¹Ÿæ­£æ˜¯ MyISAM è¡¨ä¸å¤ªé€‚åˆäºæœ‰å¤§é‡æ›´æ–°æ“ä½œå’ŒæŸ¥è¯¢æ“ä½œåº”ç”¨çš„åŸå› ï¼Œå› ä¸ºå¤§é‡çš„æ›´æ–°æ“ä½œä¼šé€ æˆæŸ¥è¯¢æ“ä½œå¾ˆéš¾è·å¾—è¯»é”ï¼Œä»è€Œå¯èƒ½æ°¸è¿œé˜»å¡ã€‚è¿™ç§æƒ…å†µæœ‰æ—¶å¯èƒ½ä¼šå˜å¾—éå¸¸ç³Ÿç³•ï¼å¹¸å¥½æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›è®¾ç½®æ¥è°ƒèŠ‚ MyISAM çš„è°ƒåº¦è¡Œä¸ºã€‚</span></p><ul><li><span>é€šè¿‡æŒ‡å®šå¯åŠ¨å‚æ•°low-priority-updatesï¼Œä½¿MyISAMå¼•æ“é»˜è®¤ç»™äºˆè¯»è¯·æ±‚ä»¥ä¼˜å…ˆçš„æƒåˆ©ã€‚ </span></li><li><span>é€šè¿‡æ‰§è¡Œå‘½ä»¤SET LOW_PRIORITY_UPDATES=1ï¼Œä½¿è¯¥è¿æ¥å‘å‡ºçš„æ›´æ–°è¯·æ±‚ä¼˜å…ˆçº§é™ä½ã€‚ </span></li><li><span>é€šè¿‡æŒ‡å®šINSERTã€UPDATEã€DELETEè¯­å¥çš„LOW_PRIORITYå±æ€§ï¼Œé™ä½è¯¥è¯­å¥çš„ä¼˜å…ˆçº§ã€‚</span></li></ul><h2><a name="203-innodbé”é—®é¢˜" class="md-header-anchor"></a><span>20.3 InnoDBé”é—®é¢˜</span></h2><p><span>InnoDBä¸MyISAMçš„æœ€å¤§ä¸åŒæœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯æ”¯æŒäº‹åŠ¡ï¼ˆTRANSACTIONSï¼‰ï¼›è€Œæ˜¯é‡‡ç”¨äº†è¡Œçº§é”ã€‚</span></p><h3><a name="2031-äº‹åŠ¡åŸºç¡€" class="md-header-anchor"></a><span>20.3.1 äº‹åŠ¡åŸºç¡€</span></h3><p><strong><span>1ã€äº‹åŠ¡åŠå…¶ACIDå±æ€§</span></strong></p><p><span>ä¸åœ¨é˜è¿°ã€‚</span></p><p><strong><span>2ã€å¹¶å‘äº‹åŠ¡å¤„ç†å¸¦æ¥çš„é—®é¢˜</span></strong></p><p><span>ç›¸å¯¹äºä¸²è¡Œå¤„ç†ï¼Œå¹¶å‘äº‹åŠ¡å¤„ç†èƒ½å¤§å¤§å¢åŠ æ•°æ®åº“èµ„æºçš„åˆ©ç”¨ç‡ï¼Œæé«˜æ•°æ®åº“ç³»ç»Ÿçš„äº‹åŠ¡ååé‡ã€‚ä½†å¹¶å‘äº‹åŠ¡å¤„ç†ä¹Ÿä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œä¸»è¦æœ‰ï¼š</span><strong><span>æ›´æ–°ä¸¢å¤±ã€è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</span></strong><span>ã€‚</span></p><blockquote><p><span>æ›´æ–°ä¸¢å¤±å±äºåº”ç”¨å±‚é¢ï¼Œä¸å±äºæ•°æ®åº“ç³»ç»Ÿçš„ç®¡ç†èŒƒç•´ã€‚</span></p></blockquote><p><strong><span>3ã€äº‹åŠ¡éš”ç¦»çº§åˆ«</span></strong></p><p><span>â€œè„è¯»â€ã€â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€ï¼Œå…¶å®éƒ½æ˜¯æ•°æ®åº“è¯»ä¸€è‡´æ€§é—®é¢˜ï¼Œå¿…é¡»ç”±æ•°æ®åº“æä¾›ä¸€å®šçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶æ¥è§£å†³ã€‚</span></p><p><span>æ•°æ®åº“å®ç°äº‹åŠ¡éš”ç¦»çš„æ–¹å¼ï¼ŒåŸºæœ¬ä¸Šå¯åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ã€‚ </span></p><ul><li><span>ä¸€ç§æ˜¯åœ¨è¯»å–æ•°æ®å‰ï¼Œå¯¹å…¶åŠ é”ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚ </span></li><li><span>å¦ä¸€ç§æ˜¯ä¸ç”¨åŠ ä»»ä½•é”ï¼Œé€šè¿‡ä¸€å®šæœºåˆ¶ç”Ÿæˆä¸€ä¸ªæ•°æ®è¯·æ±‚æ—¶é—´ç‚¹çš„ä¸€è‡´æ€§æ•°æ®å¿«ç…§ï¼ˆSnapshot)ï¼Œå¹¶ç”¨è¿™ä¸ªå¿«ç…§æ¥æä¾›ä¸€å®šçº§åˆ«ï¼ˆè¯­å¥çº§æˆ–äº‹åŠ¡çº§ï¼‰çš„ä¸€è‡´æ€§è¯»å–ã€‚ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œå¥½è±¡æ˜¯æ•°æ®åº“å¯ä»¥æä¾›åŒä¸€æ•°æ®çš„å¤šä¸ªç‰ˆæœ¬ï¼Œå› æ­¤ï¼Œè¿™ç§æŠ€æœ¯å«åšæ•°æ®å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMultiVersion Concurrency Controlï¼Œç®€ç§° MVCC æˆ–MCCï¼‰ï¼Œä¹Ÿç»å¸¸ç§°ä¸ºå¤šç‰ˆæœ¬æ•°æ®åº“ã€‚ </span></li></ul><p><strong><span>æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»è¶Šä¸¥æ ¼ï¼Œå¹¶å‘å‰¯ä½œç”¨è¶Šå°ï¼Œä½†ä»˜å‡ºçš„ä»£ä»·ä¹Ÿå°±è¶Šå¤§</span></strong><span>ï¼Œå› ä¸ºäº‹åŠ¡éš”ç¦»å®è´¨ä¸Šå°±æ˜¯ä½¿äº‹åŠ¡åœ¨ä¸€å®šç¨‹åº¦ä¸Šâ€œä¸²è¡ŒåŒ–â€è¿›è¡Œï¼Œè¿™æ˜¾ç„¶ä¸â€œå¹¶å‘â€æ˜¯çŸ›ç›¾çš„ã€‚</span></p><h3><a name="2032-innodbçš„è¡Œé”æ¨¡å¼åŠåŠ é”æ–¹æ³•" class="md-header-anchor"></a><span>20.3.2 InnoDBçš„è¡Œé”æ¨¡å¼åŠåŠ é”æ–¹æ³•</span></h3><p><span>InnoDBå®ç°æ ‡å‡†çš„è¡Œçº§é”å®šï¼Œå…¶ä¸­æœ‰ä¸¤ç§ç±»å‹çš„é”å®šï¼š</span></p><ul><li><strong><span>å…±äº«ï¼ˆSï¼‰é”</span></strong><span>ï¼šå…è®¸æŒæœ‰è¯¥é”çš„äº‹åŠ¡è¯»å–ä¸€è¡Œã€‚</span></li><li><strong><span>æ’ä»–ï¼ˆXï¼‰é”å®š</span></strong><span>ï¼šå…è®¸æŒæœ‰è¯¥é”çš„äº‹åŠ¡æ›´æ–°æˆ–åˆ é™¤è¡Œã€‚</span></li></ul><p><span>å¦‚æœäº‹åŠ¡T1åœ¨è¡Œrä¸ŠæŒæœ‰ä¸€ä¸ªå…±äº«ï¼ˆSï¼‰é”ï¼Œé‚£ä¹ˆæ¥è‡ªæŸäº›ä¸åŒäº‹åŠ¡T2çš„å¯¹è¡Œrä¸Šçš„é”çš„è¯·æ±‚å°†æŒ‰ä»¥ä¸‹æ–¹å¼å¤„ç†ï¼š</span></p><ul><li><span>T2å¯ä»¥è¯·æ±‚Sé”å¯ä»¥ç«‹å³è·å¾—ï¼ŒT1å’ŒT2éƒ½åœ¨rä¸Šä¿æŒäº†Sé”</span></li><li><span>T2ä¸èƒ½ç«‹å³æˆäºˆXé”è¯·æ±‚ã€‚</span></li></ul><p><span>å¦‚æœäº‹åŠ¡T1åœ¨è¡Œrä¸Šæ‹¥æœ‰æ’ä»–ï¼ˆXï¼‰é”ï¼Œåˆ™ä¸èƒ½ç«‹å³æ‰¹å‡†æŸä¸ªä¸åŒäº‹åŠ¡T2å¯¹rä¸Šä»»ä¸€ç±»å‹çš„é”çš„è¯·æ±‚ã€‚ç›¸åï¼Œäº‹åŠ¡T2å¿…é¡»ç­‰å¾…äº‹åŠ¡T1é‡Šæ”¾å¯¹è¡Œrçš„é”å®šã€‚</span></p><p><span>InnoDBä¸ºäº†æ”¯æŒå¤šç§ç²’åº¦é”å®šï¼Œå…è®¸è¡Œé”å’Œè¡¨é”å¹¶å­˜ã€‚</span></p><p><span>InnoDB è¿˜æœ‰ä¸¤ç§å†…éƒ¨ä½¿ç”¨çš„æ„å‘é”ï¼ˆIntention Locksï¼‰æ„å‘é”æ˜¯</span><strong><span>è¡¨çº§é”</span></strong><span>ï¼ŒæŒ‡ç¤ºäº‹åŠ¡ç¨åå¯¹è¡¨ä¸­çš„è¡Œéœ€è¦å“ªç§ç±»å‹çš„é”ï¼ˆå…±äº«é”æˆ–æ’ä»–é”ï¼‰ã€‚æœ‰ä¸¤ç§ç±»å‹çš„æ„å›¾é”ï¼š</span></p><ul><li><span>æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œå…±äº«é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ IS é”ã€‚ </span></li><li><span>æ„å‘æ’ä»–é”ï¼ˆIXï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œæ’ä»–é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æ’ä»–é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ IX é”ã€‚</span></li></ul><p><span>InnoDBè¡Œé”æ¨¡å¼å…¼å®¹æ€§åˆ—è¡¨ï¼š</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192117.png" referrerpolicy="no-referrer"></p><p><span>å¦‚æœä¸€ä¸ªäº‹åŠ¡è¯·æ±‚çš„é”æ¨¡å¼ä¸å½“å‰çš„é”å…¼å®¹ï¼ŒInnoDB å°±å°†è¯·æ±‚çš„é”æˆäºˆè¯¥äº‹åŠ¡ï¼›åä¹‹ï¼Œå¦‚æœä¸¤è€…ä¸å…¼å®¹ï¼Œè¯¥äº‹åŠ¡å°±è¦ç­‰å¾…é”é‡Šæ”¾ã€‚</span></p><blockquote><p><span>æ„å‘é”é™¤äº†å…¨è¡¨è¯·æ±‚ï¼ˆä¾‹å¦‚LOCK TABLES ... WRITEï¼‰ä»¥å¤–ï¼Œä¸é˜»æ­¢ä»»ä½•å…¶ä»–å†…å®¹ã€‚æ„å›¾é”å®šçš„ä¸»è¦ç›®çš„æ˜¯è¡¨æ˜æœ‰äººæ­£åœ¨é”å®šè¡¨ä¸­çš„è¡Œï¼Œæˆ–è€…æ‰“ç®—é”å®šè¡¨ä¸­çš„è¡Œã€‚</span></p></blockquote><p><strong><span>æ„å‘é”æ˜¯InnoDBè‡ªåŠ¨åŠ çš„ï¼Œä¸éœ€è¦ç”¨æˆ·å¹²é¢„ã€‚å¯¹äº UPDATEã€DELETE å’Œ INSERT è¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼ˆX)ï¼›å¯¹äºæ™®é€š SELECT è¯­å¥ï¼ŒInnoDB ä¸ä¼šåŠ ä»»ä½•é”</span></strong><span>ï¼›äº‹åŠ¡å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯­å¥æ˜¾ç¤ºç»™è®°å½•é›†åŠ å…±äº«é”æˆ–æ’ä»–é”ã€‚ </span></p><ul><li><span>å…±äº«é”ï¼ˆSï¼‰ï¼š</span><code>SELECT * FROM table_name WHERE ... LOCK IN SHARE MODE</code><span> </span></li><li><span>æ’ä»–é”ï¼ˆX)ï¼š</span><code>SELECT * FROM table_name WHERE ... FOR UPDATE</code><span> </span></li></ul><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192114.png" referrerpolicy="no-referrer"></p><p><span>å½“ä½¿ç”¨SELECT...FOR UPDATEåŠ é”åå†æ›´æ–°è®°å½•ï¼Œå‡ºç°å¦‚è¡¨20-8æ‰€ç¤ºçš„æƒ…å†µã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921192110.png" referrerpolicy="no-referrer"></p><h3><a name="2033-innodbè¡Œé”å®ç°æ–¹å¼" class="md-header-anchor"></a><span>20.3.3 InnoDBè¡Œé”å®ç°æ–¹å¼</span></h3><p><span>InnoDB</span><strong><span>è¡Œé”</span></strong><span>æ˜¯é€šè¿‡ç»™ç´¢å¼•ä¸Šçš„</span><strong><span>ç´¢å¼•é¡¹åŠ é”</span></strong><span>æ¥å®ç°çš„ã€‚</span><strong><span>åªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDBæ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä½¿ç”¨è¡¨é”</span></strong><span>ï¼</span></p><p><span>(1)åœ¨ä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æŸ¥è¯¢çš„æ—¶å€™ï¼ŒInnoDBä½¿ç”¨çš„æ˜¯è¡¨é”ï¼Œè€Œä¸æ˜¯è¡Œé”ã€‚</span></p><blockquote><p><span>åŠ é”æ˜¯ç»™ç´¢å¼•é¡¹åŠ é”ã€‚ç°åœ¨T1ä¼šè¯é€šè¿‡ç´¢å¼•æŸ¥è¯¢å¹¶åŠ é”ï¼Œé‚£ä¹ˆæ­¤ä¼šè¯ä¸­è·å¾—è¡Œé”ï¼Œå¦‚æœT2ä¼šè¯ä¹Ÿé€šè¿‡ç´¢å¼•æŸ¥è¯¢å¹¶åŠ é”ï¼Œè‹¥ä¸æ˜¯åŒä¸€æ¡è®°å½•åˆ™ä¸ä¼šBLOCKï¼Œå¦åˆ™BLOCKï¼Œè‹¥è·å¾—é”ä¹Ÿæ˜¯è¡Œé”ï¼›è‹¥æœT2ä¼šè¯ä¸æ˜¯é€šè¿‡ç´¢å¼•æŸ¥è¯¢ï¼Œå¦‚æœåŠ é”è‚¯å®šæ˜¯åŠ è¡¨é”ï¼Œä½†æ˜¯æ­¤æ—¶T1ä¼šè¯æŒæœ‰ISé”æˆ–è€…IXé”ï¼Œæ ¹æ®æ„å‘é”çš„æ€§è´¨ï¼Œä¸èƒ½å†æ¬¡ä¸ºå…¶åŠ è¡¨é”ï¼Œæ‰€ä»¥æ­¤æ—¶ä¼šè¯å°±ä¼šå‡ºç°ç­‰å¾…ã€‚</span></p></blockquote><p><span>(2)ç”±äº MySQL çš„è¡Œé”æ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”ï¼Œä¸æ˜¯é’ˆå¯¹è®°å½•åŠ çš„é”ï¼Œæ‰€ä»¥è™½ç„¶æ˜¯è®¿é—®ä¸åŒè¡Œçš„è®°å½•ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä½¿ç”¨ç›¸åŒçš„ç´¢å¼•é”®ï¼Œæ˜¯ä¼šå‡ºç°é”å†²çªçš„ã€‚</span></p><blockquote><p><span>æ¼”ç¤ºæ—¶ï¼Œä¸€å®šè¦å…³é—­è‡ªåŠ¨æäº¤æ¨¡å¼</span></p></blockquote><p><span>(3)å½“è¡¨æœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œä¸åŒçš„äº‹åŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç´¢å¼•é”å®šä¸åŒçš„è¡Œï¼Œå¦å¤–ï¼Œä¸è®ºæ˜¯ä½¿ç”¨ä¸»é”®ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•æˆ–æ™®é€šç´¢å¼•ï¼ŒInnoDB éƒ½ä¼šä½¿ç”¨è¡Œé”æ¥å¯¹æ•°æ®åŠ é”ã€‚</span></p><p><img src="https://gitee.com/git_wjx/picture_bed/raw/master/20200921191911.png" referrerpolicy="no-referrer"></p><h3><a name="2034-é—´éš™é”next-keyé”ï¼‰" class="md-header-anchor"></a><span>20.3.4 é—´éš™é”ï¼ˆNext-Keyé”ï¼‰</span></h3><blockquote><p><span>è¿™åœ°æ–¹ï¼Œæˆ‘æ„Ÿè§‰æ ‘ä¸­è®²è§£çš„ä¸æ˜¯å¾ˆå¥½ï¼Œå¤§å®¶å¯ä»¥ç½‘ä¸Šçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæˆ–è€…æœç´¢èµ„æ–™ã€‚</span></p></blockquote><p><span>InnoDB å­˜å‚¨å¼•æ“æœ‰ä¸‰ç§è¡Œé”çš„ç®—æ³•ï¼Œå…¶åˆ†åˆ«æ˜¯ï¼š</span></p><ul><li><span>Record Lock: å•ä¸ªè¡Œè®°å½•ä¸Šçš„é”</span></li><li><span>Gap Lock: é—´éš™é”ï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œä½†ä¸åŒ…å«è®°å½•æœ¬èº«</span></li><li><span>Next-Key é”: Gap Lock + Record Lockï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œå¹¶ä¸”ä¼šé”å®šè®°å½•æœ¬èº«</span></li></ul><hr><p><span>å½“æˆ‘ä»¬ç”¨</span><strong><span>èŒƒå›´æ¡ä»¶è€Œä¸æ˜¯ç›¸ç­‰æ¡ä»¶æ£€ç´¢æ•°æ®</span></strong><span>ï¼Œå¹¶è¯·æ±‚å…±äº«æˆ–æ’ä»–é”æ—¶ï¼ŒInnoDB ä¼šç»™ç¬¦åˆæ¡ä»¶çš„</span><strong><span>å·²æœ‰æ•°æ®è®°å½•çš„ç´¢å¼•é¡¹</span></strong><span>åŠ é”ï¼›å¯¹äºé”®å€¼åœ¨æ¡ä»¶èŒƒå›´å†…ä½†å¹¶ä¸å­˜åœ¨çš„è®°å½•ï¼Œå«åšâ€œé—´éš™ï¼ˆGAP)â€ï¼ŒInnoDB ä¹Ÿä¼šå¯¹è¿™ä¸ªâ€œé—´éš™â€åŠ é”ï¼Œè¿™ç§é”æœºåˆ¶å°±æ˜¯æ‰€è°“çš„é—´éš™é”ï¼ˆNext-Key é”ï¼‰ã€‚</span></p><p><span>å‡å¦‚ emp è¡¨ä¸­åªæœ‰ 101 æ¡è®°å½•ï¼Œå…¶ empid çš„å€¼åˆ†åˆ«æ˜¯ 1,2,...,100,101ï¼Œä¸‹é¢çš„ SQLï¼š</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">Select</span> * <span class="cm-keyword">from</span>  emp <span class="cm-keyword">where</span> empid &gt; <span class="cm-number">100</span> <span class="cm-keyword">for</span> <span class="cm-keyword">update</span>;</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>æ˜¯ä¸€ä¸ªèŒƒå›´æ¡ä»¶çš„æ£€ç´¢ï¼ŒInnoDB ä¸ä»…ä¼šå¯¹ç¬¦åˆæ¡ä»¶çš„ empid å€¼ä¸º 101 çš„è®°å½•åŠ é”ï¼Œä¹Ÿä¼šå¯¹empid å¤§äº 101ï¼ˆè¿™äº›è®°å½•å¹¶ä¸å­˜åœ¨ï¼‰çš„â€œé—´éš™â€åŠ é”ã€‚</span></p><p><span>InnoDB </span><strong><span>ä½¿ç”¨é—´éš™é”çš„ç›®çš„</span></strong><span>ï¼Œ</span><strong><span>ä¸€æ–¹é¢æ˜¯ä¸ºäº†é˜²æ­¢å¹»è¯»</span></strong><span>ï¼Œä»¥æ»¡è¶³ç›¸å…³éš”ç¦»çº§åˆ«çš„è¦æ±‚ï¼Œå¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œè¦æ˜¯ä¸ä½¿ç”¨é—´éš™é”ï¼Œå¦‚æœå…¶ä»–äº‹åŠ¡æ’å…¥äº† empid å¤§äº 100 çš„ä»»ä½•è®°å½•ï¼Œé‚£ä¹ˆæœ¬äº‹åŠ¡å¦‚æœå†æ¬¡æ‰§è¡Œä¸Šè¿°è¯­å¥ï¼Œå°±ä¼šå‘ç”Ÿå¹»è¯»ï¼›å¦å¤–ä¸€æ–¹é¢ï¼Œæ˜¯ä¸ºäº†æ»¡è¶³å…¶æ¢å¤å’Œå¤åˆ¶çš„éœ€è¦ã€‚</span></p><blockquote><p><span>InnoDB é™¤äº†é€šè¿‡èŒƒå›´æ¡ä»¶åŠ é”æ—¶ä½¿ç”¨é—´éš™é”å¤–ï¼Œå¦‚æœä½¿ç”¨ç›¸ç­‰æ¡ä»¶è¯·æ±‚ç»™ä¸€ä¸ªä¸å­˜åœ¨çš„è®°å½•åŠ é”ï¼ŒInnoDB ä¹Ÿä¼šä½¿ç”¨é—´éš™é”ï¼</span></p></blockquote><h3><a name="2035-æ¢å¤å’Œå¤åˆ¶çš„éœ€è¦å¯¹-innodb-é”æœºåˆ¶çš„å½±å“" class="md-header-anchor"></a><span>20.3.5 æ¢å¤å’Œå¤åˆ¶çš„éœ€è¦ï¼Œå¯¹ InnoDB é”æœºåˆ¶çš„å½±å“</span></h3><p><span>MySQL é€šè¿‡ </span><strong><span>BINLOG</span></strong><span> å½•æ‰§è¡ŒæˆåŠŸçš„ INSERTã€UPDATEã€DELETE ç­‰æ›´æ–°æ•°æ®çš„ SQL è¯­å¥ï¼Œå¹¶ç”±æ­¤å®ç° MySQL æ•°æ®åº“çš„æ¢å¤å’Œä¸»ä»å¤åˆ¶ã€‚</span></p><p><span>MySQLæ¢å¤æœºåˆ¶çš„ç‰¹ç‚¹ï¼š</span></p><ol start='' ><li><span>MySQL çš„æ¢å¤æ˜¯ SQL è¯­å¥çº§çš„ï¼Œä¹Ÿå°±æ˜¯é‡æ–°æ‰§è¡Œ BINLOG ä¸­çš„ SQL è¯­å¥ã€‚</span></li><li><span>MySQL çš„ Binlog æ˜¯æŒ‰ç…§äº‹åŠ¡æäº¤çš„å…ˆåé¡ºåºè®°å½•çš„ï¼Œæ¢å¤ä¹Ÿæ˜¯æŒ‰è¿™ä¸ªé¡ºåºè¿›è¡Œçš„ã€‚</span></li></ol><p><span>MySQL çš„æ¢å¤æœºåˆ¶è¦æ±‚ï¼š</span><strong><span>åœ¨ä¸€ä¸ªäº‹åŠ¡æœªæäº¤å‰ï¼Œå…¶ä»–å¹¶å‘äº‹åŠ¡ä¸èƒ½æ’å…¥æ»¡è¶³å…¶é”å®šæ¡ä»¶çš„ä»»ä½•è®°å½•ï¼Œä¹Ÿå°±æ˜¯ä¸å…è®¸å‡ºç°å¹»è¯»</span></strong><span>ï¼Œè¿™å·²ç»è¶…è¿‡äº† ISO/ANSI SQL92â€œå¯é‡å¤è¯»â€éš”ç¦»çº§åˆ«çš„è¦æ±‚ï¼Œå®é™…ä¸Šæ˜¯è¦æ±‚äº‹åŠ¡è¦ä¸²è¡ŒåŒ–ã€‚</span></p><h1><a name="21-ä¼˜åŒ–mysql-server" class="md-header-anchor"></a><span>21. ä¼˜åŒ–MySQL Server</span></h1><p><span>ä¹‹å‰æåˆ°è¿‡ï¼ŒMySQLçš„ä¼˜åŒ–ï¼Œä»åŸºç¡€å±‚é¢æœ‰SQLè¯­å¥çš„ä¼˜åŒ–ï¼Œè¡¨å­—æ®µæ•°æ®åº“å¯¹è±¡çš„ä¼˜åŒ–ã€‚å¦å¤–MySQLè¿˜æœ‰æœ¬èŠ‚å°†è¦ä»‹ç»çš„Serverå±‚é¢ä¸Šçš„ä¼˜åŒ–ã€‚</span></p><p><span>ä¸ºä»€ä¹ˆè¦ä¼˜åŒ–ï¼Ÿ</span></p><p><span>é€šå¸¸ä¸€ä¸ªåº”ç”¨çš„ååé‡ç“¶é¢ˆå¾€å¾€å‡ºç°åœ¨æ•°æ®åº“ä¸­çš„å¤„ç†é€Ÿåº¦ä¸Šï¼Œéšç€åº”ç”¨çš„ä½¿ç”¨ï¼Œæ•°æ®åº“æ•°æ®é€æ¸å¢å¤šï¼Œæ•°æ®åº“å¤„ç†å‹åŠ›é€æ¸å¢å¤§ï¼Œå…³ç³»å‹æ•°æ®åº“çš„æ•°æ®æ˜¯å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„ï¼ŒIOé€Ÿåº¦è¿œè¿œå°äºROMã€‚æ‰€ä»¥è¯´é€šè¿‡ä¼˜åŒ–ï¼Œå‡å°‘ç³»ç»Ÿç“¶é¢ˆå’Œèµ„æºçš„å ç”¨ï¼Œæé«˜ç³»ç»Ÿååº”é€Ÿåº¦ã€‚</span></p><p><span>ä¾‹å¦‚ï¼š</span></p><ol start='' ><li><span>é€šè¿‡ä¼˜åŒ–æ–‡ä»¶ç³»ç»Ÿï¼Œæ¥æé«˜ç£ç›˜I/Oçš„ç‹¬å†™é€Ÿåº¦ï¼›</span></li><li><span>é€šè¿‡ä¼˜åŒ–æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ç­–ç•¥ï¼Œæé«˜MySQLåœ¨é«˜è´Ÿè·æƒ…å†µä¸‹çš„è´Ÿè½½èƒ½åŠ›ï¼›</span></li><li><span>é€šè¿‡ä¼˜åŒ–è¡¨ç»“æ„ã€ç´¢å¼•ã€æŸ¥è¯¢è¯­å¥ç­‰ä½¿å¾—æŸ¥è¯¢å“åº”æ›´å¿«ã€‚</span></li></ol><h2><a name="211mysqlä½“ç³»ç»“æ„" class="md-header-anchor"></a><span>21.1MySQLä½“ç³»ç»“æ„</span></h2><p><span>MySQLå®ä¾‹ç”±ä¸€ç»„åå°çº¿ç¨‹ã€ä¸€äº›å†…å­˜å—å’Œè‹¥å¹²æœåŠ¡çº¿ç¨‹ç»„æˆã€‚</span></p><p><span>åå°çº¿ç¨‹åŒ…æ‹¬ï¼š</span></p><ul><li><p><span>ä¸»çº¿ç¨‹ï¼šä¸»è¦è´Ÿè´£å°†è„ç¼“å­˜é¡µåˆ·æ–°åˆ°æ•°æ®æ–‡ä»¶ï¼Œæ‰§è¡Œpurgeæ“ä½œï¼Œè§¦å‘æ£€æŸ¥ç‚¹ï¼Œåˆå¹¶æ’å…¥ç¼“å†²åŒºç­‰ã€‚</span></p></li><li><p><span>IOçº¿ç¨‹ï¼š</span></p><ul><li><span>insert bufferçº¿ç¨‹ï¼šä¸»è¦è´Ÿè´£æ’å…¥ç¼“å†²åŒºçš„åˆå¹¶æ“ä½œã€‚</span></li><li><span>readçº¿ç¨‹ï¼šè´Ÿè´£æ•°æ®åº“è¯»æ“ä½œï¼Œå¯é…ç½®å¤šä¸ªè¯»çº¿ç¨‹ã€‚</span></li><li><span>writeçº¿ç¨‹ï¼šè´Ÿè´£æ•°æ®åº“å†™æ“ä½œï¼Œå¯é…ç½®å¤šä¸ªå†™çº¿ç¨‹ã€‚</span></li><li><span>logçº¿ç¨‹ï¼šå°†é‡åšæ—¥å¿—åˆ·æ–°åˆ°logfileä¸­ã€‚</span></li></ul></li><li><p><span>é”çº¿ç¨‹ï¼šè´Ÿè´£é”æ§åˆ¶å’Œæ­»é”æ£€æµ‹ã€‚</span></p></li><li><p><span>é”™è¯¯ç›‘æ§çº¿ç¨‹ï¼šä¸»è¦è´Ÿè´£é”™è¯¯ç›‘æ§å’Œé”™è¯¯å¤„ç†ã€‚</span></p></li><li><p><span>purgeçº¿ç¨‹ï¼šMySQL5.5ä¹‹åç”¨å•ç‹¬çš„çº¿ç¨‹æ‰§è¡Œpurgeæ“ä½œã€‚</span></p></li></ul><p><span>å¯é€šè¿‡</span><code>SHOW ENGINE INNODB STATUS</code><span>æŸ¥çœ‹çº¿ç¨‹çš„çŠ¶æ€ã€‚</span></p><h2><a name="212-æŸ¥çœ‹mysql-serverå‚æ•°" class="md-header-anchor"></a><span>21.2 æŸ¥çœ‹MySQL Serverå‚æ•°</span></h2><ul><li><code>show variables:</code><span>ï¼šæŸ¥çœ‹MySQLæœåŠ¡å™¨é™æ€å‚æ•°å€¼ã€‚æ•°æ®åº“å¯åŠ¨ä¼šä¸ä¼šåŠ¨æ€æ›´æ”¹çš„å€¼ï¼Œæ¯”å¦‚buffer_sizeã€character_setã€æ•°æ®æ–‡ä»¶åç§°ç­‰ã€‚</span></li><li><code>show status</code><span>ï¼šæŸ¥çœ‹MySQLæœåŠ¡å™¨åŠ¨æ€è¿è¡ŒçŠ¶æ€ä¿¡æ¯ã€‚å¦‚é”ç­‰å¾…ã€å½“å‰è¿æ¥æ•°ç­‰ã€‚</span></li></ul><p><span>å†…å­˜ä¼˜åŒ–åŸåˆ™ï¼š</span></p><ul><li><span>å°†å°½é‡å¤šçš„å†…å­˜åˆ†é…ç»™MySQLåšç¼“å­˜ï¼Œä½†è¦ç»™æ“ä½œç³»ç»Ÿå’Œå…¶ä»–åº”ç”¨ç¨‹åºçš„è¿è¡Œé¢„ç•™è¶³å¤Ÿçš„å†…å­˜ï¼Œå¦åˆ™å¦‚æœäº§ç”ŸSWAPé¡µäº¤æ¢ï¼Œå°†ä¸¥é‡å½±å“ç³»ç»Ÿæ€§èƒ½ã€‚</span></li><li><span>MyISAMçš„æ•°æ®æ–‡ä»¶è¯»å–ä¾èµ–äºæ“ä½œç³»ç»Ÿè‡ªèº«çš„IOç¼“å­˜ï¼Œå› æ­¤ï¼Œå¦‚æœæœ‰MyISAMè¡¨ï¼Œå°±è¦é¢„ç•™æ›´å¤šçš„å†…å­˜ç»™æ“ä½œç³»ç»ŸåšIOç¼“å­˜ã€‚</span></li><li><span>æ’åºåŒºã€è¿æ¥åŒºç­‰ç¼“å­˜æ˜¯åˆ†é…ç»™æ¯ä¸ªæ•°æ®åº“ä¼šè¯ä¸“ç”¨çš„ï¼Œå…¶é»˜è®¤å€¼çš„è®¾ç½®è¦æ ¹æ®æœ€å¤§è¿æ¥æ•°åˆç†åˆ†é…ï¼Œå¦‚æœè®¾ç½®å¤ªå¤§ï¼Œä¸ä½†æµªè´¹å†…å­˜èµ„æºï¼Œè€Œä¸”åœ¨å¹¶å‘è¿æ¥è¾ƒé«˜æ—¶ä¼šå¯¼è‡´ç‰©ç†å†…å­˜è€—å°½ã€‚</span></li></ul><h2><a name="213-myisamå†…å­˜ä¼˜åŒ–" class="md-header-anchor"></a><span>21.3 MyISAMå†…å­˜ä¼˜åŒ–</span></h2><p><span>MyISAMå­˜å‚¨å¼•æ“ä½¿ç”¨</span><strong><span>ç´¢å¼•ç¼“å­˜ï¼ˆkey bufferï¼‰ç¼“å­˜ç´¢å¼•å—</span></strong><span>ï¼Œå¯¹äºæ•°æ®å—æ²¡æœ‰ç‰¹åˆ«çš„ç¼“å­˜æœºåˆ¶ï¼Œå®Œå…¨ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„IOç¼“å­˜ã€‚</span></p><h3><a name="2131-ç´¢å¼•ç¼“å­˜" class="md-header-anchor"></a><span>21.3.1 ç´¢å¼•ç¼“å­˜</span></h3><p><strong><span>key_buffer_sizeè®¾ç½®</span></strong></p><p><span>key_buffer_sizeå†³å®šMyISAMç´¢å¼•ç¼“å­˜åŒºçš„å¤§å°ï¼Œå®ƒç›´æ¥å½±å“MyISAMè¡¨çš„å­˜å–æ•ˆç‡ã€‚å»ºè®®è‡³å°‘åˆ†é…1/4å¯ç”¨ç‰©ç†å†…å­˜ã€‚</span></p><p><span>é€šè¿‡æ£€æŸ¥ç³»ç»ŸçŠ¶æ€å˜é‡å¯è¯„ä¼°MyISAMç¼“å­˜çš„æ•ˆç‡ï¼š</span></p><ul><li><span>è¯»æ¯”ç‡ï¼škey_reads/key_read_requestsï¼Œä¸€èˆ¬åº”å°äº0.01ã€‚</span></li><li><span>å†™æ¯”ç‡ï¼škey_writes/key_write_requestsï¼Œå¯¹äºæ›´æ–°å’Œåˆ é™¤ç‰¹åˆ«å¤šçš„åº”ç”¨å¯èƒ½æ¥è¿‘1ï¼Œå¯¹äºæ¯æ¬¡æ›´æ–°å¾ˆå¤šè¡Œçš„åº”ç”¨å°±ä¼šæ¯”è¾ƒå°ã€‚</span></li><li><span>ä½¿ç”¨ç‡ï¼š1-(key_blocks_unused*key_cache_block_size/key_buffer_size)ï¼Œä¸€èˆ¬åœ¨0.8å·¦å³æ¯”è¾ƒåˆé€‚ã€‚</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">variables</span> <span class="cm-keyword">like</span> <span class="cm-string">'key_%'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-keyword">Value</span> &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| key_buffer_size &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">8388608</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| key_cache_age_threshold  | <span class="cm-number">300</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| key_cache_block_size &nbsp; &nbsp; | <span class="cm-number">1024</span> &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| key_cache_division_limit | <span class="cm-number">100</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+--------------------------+---------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> rows <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'key_%'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-keyword">Value</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Key_blocks_not_flushed | <span class="cm-number">0</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Key_blocks_unused &nbsp; &nbsp;  | <span class="cm-number">7173</span>  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Key_blocks_used &nbsp; &nbsp; &nbsp;  | <span class="cm-number">2</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Key_read_requests &nbsp; &nbsp;  | <span class="cm-number">8</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Key_reads &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">4</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Key_write_requests &nbsp; &nbsp; | <span class="cm-number">0</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Key_writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">0</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+------------------------+-------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 529px;"></div><div class="CodeMirror-gutters" style="display: none; height: 529px;"></div></div></div></pre><p><strong><span>ä½¿ç”¨å¤šç´¢å¼•ç¼“å­˜</span></strong></p><p><span>å¤šç´¢å¼•ç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥</span><strong><span>å°†ä¸åŒçš„è¡¨ç´¢å¼•ç¼“å­˜å­˜æ”¾åˆ°ä¸åŒçš„key bufferä¸­</span></strong><span>ï¼Œå‡å°‘sessioné”®å¯¹key bufferçš„ç«äº‰å¯¼è‡´æ•°æ®è¢«æ·˜æ±°ã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ›å»ºæ–°çš„ç´¢å¼•ç¼“å­˜ï¼š</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> <span class="cm-keyword">global</span> key_buffer_name<span class="cm-variable-2">.key_buffer_size</span> = n;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># åˆ é™¤ç´¢å¼•ç¼“å­˜ï¼š</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æ³¨æ„ï¼šä¸èƒ½åˆ é™¤é»˜è®¤key_bufffer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> <span class="cm-keyword">global</span> key_buffer_name<span class="cm-variable-2">.key_buffer_size</span> = <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># æŒ‡å®šè¡¨çš„ç´¢å¼•ç¼“å­˜ï¼ˆä¸æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤ç´¢å¼•ç¼“å­˜ï¼‰</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">cache</span> <span class="cm-keyword">index</span> tb_name[,...] <span class="cm-keyword">in</span> key_buffer_name;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># å°†ç´¢å¼•é¢„è£…åˆ°é»˜è®¤key_bufferä¸­</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">load</span> <span class="cm-keyword">index</span> <span class="cm-keyword">into</span> <span class="cm-keyword">cache</span> tb_name[,...];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><h3><a name="213-tablecache" class="md-header-anchor"></a><span>21.3 table_cache</span></h3><p><span>æ¯ä¸ªè¿æ¥è¿›æ¥ï¼Œéƒ½ä¼šè‡³å°‘æ‰“å¼€ä¸€ä¸ªè¡¨ç¼“å­˜ã€‚å› æ­¤ï¼Œtable_cache ä¸ max_connections æœ‰å…³ï¼Œä¾‹å¦‚ï¼Œå¯¹äº 200 ä¸ªå¹¶è¡Œè¿è¡Œçš„è¿æ¥ï¼Œåº”è¯¥è®©è¡¨çš„ç¼“å­˜è‡³å°‘æœ‰ 200Ã—Nï¼Œè¿™é‡Œ N æ˜¯å¯ä»¥æ‰§è¡Œçš„æŸ¥è¯¢çš„ä¸€ä¸ªè”æ¥ä¸­è¡¨çš„æœ€å¤§æ•°é‡ã€‚</span></p><p><span>å¯ä»¥é€šè¿‡æ£€æŸ¥mysqldçš„çŠ¶æ€å˜é‡open_tableså’Œopened_tablesç¡®å®šè¿™ä¸ªå‚æ•°æ˜¯å¦è¿‡å°;</span></p><ul><li><code>open_tables</code><span>ï¼šè¡¨ç¤ºå½“å‰sessionæ‰“å¼€çš„è¡¨ç¼“å­˜æ•°ï¼Œå€¼ä¸ä¼šéšæ¯æ¬¡æŸ¥è¯¢ç´¯åŠ ã€‚</span></li><li><code>opened_tables</code><span>ï¼šè¡¨ç¤ºæ›¾ç»æ‰“å¼€çš„è¡¨ç¼“å­˜æ•°ã€‚å€¼ä¼šéšæ¯æ¬¡æŸ¥è¯¢ç´¯åŠ ã€‚</span></li></ul><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'open_tables'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name | <span class="cm-keyword">Value</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Open_tables &nbsp; | <span class="cm-number">1</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-keyword">row</span> <span class="cm-keyword">in</span> <span class="cm-keyword">set</span> (<span class="cm-number">0.00</span> sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">â€‹</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'opened_tables'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name | <span class="cm-keyword">Value</span> |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Opened_tables | <span class="cm-number">2</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------+-------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 322px;"></div><div class="CodeMirror-gutters" style="display: none; height: 322px;"></div></div></div></pre><h2><a name="214-innodbå†…å­˜ä¼˜åŒ–" class="md-header-anchor"></a><span>21.4 InnoDBå†…å­˜ä¼˜åŒ–</span></h2><h3><a name="2141-innodbbufferpoolsizeçš„è®¾ç½®" class="md-header-anchor"></a><span>21.4.1 innodb_buffer_pool_sizeçš„è®¾ç½®</span></h3><p><span>è¿™ä¸ªå‚æ•°å®šä¹‰äº† InnoDB å­˜å‚¨å¼•æ“çš„è¡¨æ•°æ®å’Œç´¢å¼•æ•°æ®çš„æœ€å¤§å†…å­˜ç¼“å†²åŒºå¤§å°ã€‚å’ŒMyISAM å­˜å‚¨å¼•æ“ä¸åŒï¼ŒMyISAM çš„ key_buffer_size åªç¼“å­˜ç´¢å¼•é”®ï¼Œè€Œ </span><strong><span>innodb_buffer_pool_sizeå´æ˜¯åŒæ—¶ä¸ºæ•°æ®å—å’Œç´¢å¼•å—åšç¼“å­˜</span></strong><span>ï¼Œè¿™ä¸ªç‰¹æ€§å’Œ Oracle æ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸ª</span><strong><span>å€¼è®¾å¾—è¶Šé«˜</span></strong><span>ï¼Œè®¿é—®è¡¨ä¸­æ•°æ®éœ€è¦çš„</span><strong><span>ç£ç›˜ I/O å°±è¶Šå°‘</span></strong><span>ã€‚åœ¨ä¸“ç”¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šï¼Œå¯åˆ†é…80%çš„ç‰©ç†å†…å­˜ã€‚</span></p><p><span>å¯é€šè¿‡</span><code>SHOW STATUS LIKE &#39;innodb_buffer_pool%&#39;</code><span>æŸ¥çœ‹ç¼“å­˜æ± çš„ä½¿ç”¨æƒ…å†µã€‚</span></p><p><span>InnoDBç¼“å­˜æ± å‘½ä¸­ç‡ï¼š1-innodb_buffer_pool_reads/innodb_buffer_pool_read_requestã€‚</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="mysql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="mysql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql&gt; <span class="cm-keyword">show</span> <span class="cm-keyword">status</span> <span class="cm-keyword">like</span> <span class="cm-string">'innodb_buffer_pool%'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------------------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Variable_name &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-keyword">Value</span> &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------------------+-------------+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_dump_status &nbsp; &nbsp; &nbsp;  | <span class="cm-keyword">not</span> started |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_load_status &nbsp; &nbsp; &nbsp;  | <span class="cm-keyword">not</span> started |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_pages_data &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">470</span> &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_bytes_data &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">7700480</span> &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_pages_dirty &nbsp; &nbsp; &nbsp;  | <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_bytes_dirty &nbsp; &nbsp; &nbsp;  | <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_pages_flushed &nbsp; &nbsp;  | <span class="cm-number">20</span> &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_pages_free &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">1961</span> &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_pages_misc &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_pages_total &nbsp; &nbsp; &nbsp;  | <span class="cm-number">2432</span> &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_read_ahead_rnd &nbsp; &nbsp; | <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_read_ahead &nbsp; &nbsp; &nbsp; &nbsp; | <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_read_ahead_evicted | <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_read_requests &nbsp; &nbsp;  | <span class="cm-number">20445</span> &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_reads &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">470</span> &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_wait_free &nbsp; &nbsp; &nbsp; &nbsp;  | <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">| Innodb_buffer_pool_write_requests &nbsp; &nbsp; | <span class="cm-number">28</span> &nbsp; &nbsp; &nbsp; &nbsp;  |</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">+---------------------------------------+-------------+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 506px;"></div><div class="CodeMirror-gutters" style="display: none; height: 506px;"></div></div></div></pre><h3><a name="2142-innodbæ—¥å¿—ä¼˜åŒ–" class="md-header-anchor"></a><span>21.4.2 InnoDBæ—¥å¿—ä¼˜åŒ–</span></h3><p><span>å½“æ›´æ–°æ•°æ®æ—¶ï¼ŒInnoDBå†…éƒ¨çš„æ“ä½œæµç¨‹å¤§è‡´æ˜¯ï¼š</span></p><ol start='' ><li><span>å°†æ•°æ®å†™å…¥ç¼“å­˜æ± ï¼Œå¹¶å¯¹ç›¸å…³è®°å½•åŠ ç‹¬å é”ã€‚</span></li><li><span>å°†UNDOä¿¡æ¯å†™å…¥undoè¡¨ç©ºé—´çš„å›æ»šæ®µä¸­ã€‚</span></li><li><span>æ›´æ–°ç¼“å­˜é¡µä¸­çš„æ•°æ®ï¼Œå¹¶å°†æ›´æ–°è®°å½•å†™å…¥é‡åšæ—¥å¿—ç¼“å­˜æ± ï¼ˆå¦ä¸€ä¸ªredo bufferï¼‰ä¸­ã€‚</span></li><li><span>æäº¤æ—¶ï¼Œæ ¹æ®innodb_flush_log_at_trx_commitçš„è®¾ç½®ï¼Œç”¨ä¸åŒçš„æ–¹å¼å°†é‡åšæ—¥å¿—ç¼“å­˜æ± ä¸­çš„æ›´æ–°è®°å½•åˆ·æ–°åˆ°é‡åšæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œç„¶åé‡Šæ”¾ç‹¬å é”ã€‚</span></li><li><span>åå°IOçº¿ç¨‹æ ¹æ®éœ€è¦æ‹©æœºå°†ç¼“å­˜ä¸­æ›´æ–°è¿‡çš„æ•°æ®åˆ·æ–°åˆ°ç£ç›˜æ–‡ä»¶ä¸­ã€‚</span></li></ol><p><strong><span>innodb_flush_log_at_trx_commitè®¾ç½®</span></strong></p><ul><li><span>å€¼ä¸º0ï¼šåœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œä¸ä¼šç«‹å³å°†ç¼“å­˜ä¸­çš„redoæ—¥å¿—å†™åˆ°ç£ç›˜æ–‡ä»¶ï¼Œè€Œæ˜¯æ¯ç§’è§¦å‘ä¸€æ¬¡ï¼Œå¹¶è°ƒç”¨æ“ä½œç³»ç»Ÿfsyncåˆ·æ–°IOç¼“å­˜ã€‚å¦‚æœæ•°æ®åº“å´©æºƒï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ã€‚</span></li><li><span>å€¼ä¸º1ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šäº‹åŠ¡æäº¤æ—¶ï¼Œç«‹å³å°†ç¼“å­˜ä¸­çš„redoæ—¥å¿—å›å†™åˆ°ç£ç›˜æ–‡ä»¶ï¼Œå¹¶è°ƒç”¨æ“ä½œç³»ç»Ÿfsyncåˆ·æ–°IOç¼“å­˜ã€‚</span></li><li><span>å€¼ä¸º2ï¼šäº‹åŠ¡æäº¤æ—¶ï¼Œç«‹å³å°†ç¼“å­˜ä¸­çš„redoæ—¥å¿—å›å†™åˆ°ç£ç›˜æ–‡ä»¶ï¼Œä½†å¹¶ä¸é©¬ä¸Šè°ƒç”¨fsyncåˆ·æ–°IOç¼“å­˜ï¼Œè€Œæ˜¯æ¯ç§’è§¦å‘ä¸€æ¬¡ã€‚å¦‚æœæ•°æ®åº“å´©æºƒï¼Œåªè¦æ“ä½œç³»ç»Ÿæ²¡æœ‰å´©æºƒï¼Œæ•°æ®å°±ä¸ä¼šä¸¢å¤±ã€‚</span></li></ul><h3><a name="2143-å…¶ä»–å‚æ•°" class="md-header-anchor"></a><span>21.4.3 å…¶ä»–å‚æ•°</span></h3><p><span>innodb_lock_wait_timeoutï¼šMySQL å¯ä»¥è‡ªåŠ¨åœ°ç›‘æµ‹è¡Œé”å¯¼è‡´çš„æ­»é”å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œä½†æ˜¯å¯¹äºè¡¨é”å¯¼è‡´çš„æ­»é”ä¸èƒ½è‡ªåŠ¨çš„ç›‘æµ‹ï¼Œæ‰€ä»¥è¯¥å‚æ•°ä¸»è¦è¢«ç”¨äºåœ¨å‡ºç°ç±»ä¼¼æƒ…å†µçš„æ—¶å€™ç­‰å¾…æŒ‡å®šçš„æ—¶é—´åå›æ»šã€‚ç³»ç»Ÿé»˜è®¤å€¼æ˜¯ 50 ç§’ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®åº”ç”¨çš„éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚</span></p><p><span>innodb_log_buffer_sizeå†³å®šInnoDBé‡åšæ—¥å¿—ç¼“å­˜æ± çš„å¤§å°ï¼Œé»˜è®¤æ˜¯8MBã€‚</span></p><h2><a name="215-mysqlå¹¶å‘ç›¸å…³å‚æ•°" class="md-header-anchor"></a><span>21.5 MySQLå¹¶å‘ç›¸å…³å‚æ•°</span></h2><p><strong><span>max_connectionsè®¾ç½®</span></strong></p><p><span>max_connectionsæ§åˆ¶å…è®¸è¿æ¥åˆ°MySQLæ•°æ®åº“çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤æ˜¯151ã€‚</span></p><p><span>å¦‚æœçŠ¶æ€å˜é‡connection_errors_max_connectionsä¸ä¸º0ä¸”ä¸€ç›´å¢é•¿ï¼Œè¯´æ˜ä¸æ–­æœ‰è¿æ¥è¯·æ±‚å› æ•°æ®åº“è¿æ¥æ•°å·²è¾¾åˆ°æœ€å¤§å…è®¸å€¼è€Œå¤±è´¥ã€‚</span></p><p><span> </span><strong><span>table_open_cacheè®¾ç½®</span></strong></p><p><span>table_open_cacheæ§åˆ¶æ‰€æœ‰SQLæ‰§è¡Œçº¿ç¨‹å¯æ‰“å¼€çš„è¡¨ç¼“å­˜æ•°é‡ã€‚è¯¥å€¼åº”è®¾ç½®ä¸ºï¼šmax_connections*Nï¼ŒNä¸ºæ¯ä¸ªè¿æ¥æ‰§è¡Œå…³è”æŸ¥è¯¢æ—¶æ‰€æ¶‰åŠåˆ°çš„è¡¨çš„æœ€å¤§ä¸ªæ•°ã€‚</span></p><p><strong><span>thread_cache_sizeè®¾ç½®</span></strong></p><p><span>thread_cache_sizeæ§åˆ¶MySQLç¼“å­˜å¯ä¾›é‡ç”¨çš„å®¢æˆ·æœåŠ¡çº¿ç¨‹çš„æ•°é‡ã€‚</span></p><p><span>å¯ä»¥é€šè¿‡çº¿ç¨‹cacheçš„å¤±æ•ˆç‡threads_created/connectionsæ¥è¡¡é‡tread_cache_sizeçš„è®¾ç½®æ˜¯å¦åˆé€‚ã€‚</span></p><p><strong><span>innodb_lock_wait_timeoutè®¾ç½®</span></strong></p><p><span>innodb_lock_wait_timeoutå¯ä»¥æ§åˆ¶InnoDBäº‹åŠ¡ç­‰å¾…è¡Œé”çš„æ—¶é—´ï¼Œé»˜è®¤ä¸º50msã€‚</span></p><h1><a name="22-ç£ç›˜ioé—®é¢˜" class="md-header-anchor"></a><span>22. ç£ç›˜I/Oé—®é¢˜</span></h1><p><span>ä½œä¸ºåº”ç”¨ç³»ç»Ÿçš„æŒä¹…åŒ–å±‚ï¼Œä¸ç®¡æ•°æ®åº“é‡‡å–äº†ä»€ä¹ˆæ ·çš„ Cache æœºåˆ¶ï¼Œä½†æ•°æ®åº“æœ€ç»ˆæ€»æ˜¯è¦å°†æ•°æ®å‚¨å­˜åˆ°å¯ä»¥é•¿ä¹…ä¿å­˜çš„I/Oè®¾å¤‡â”€â”€ç£ç›˜ä¸Šï¼Œä½†ç£ç›˜çš„å­˜å–é€Ÿåº¦æ˜¾ç„¶è¦æ¯”CPUã€RAM çš„é€Ÿåº¦æ…¢å¾ˆå¤šï¼Œå› æ­¤ï¼Œå¯¹äºæ¯”è¾ƒå¤§çš„æ•°æ®åº“ï¼Œç£ç›˜ I/O ä¸€èˆ¬æ€»ä¼šæˆä¸ºæ•°æ®åº“çš„ä¸€ä¸ªæ€§èƒ½ç“¶é¢ˆï¼</span></p><p><span>æˆ‘ä»¬å‰é¢æåˆ°çš„ SQL ä¼˜åŒ–ã€æ•°æ®åº“å¯¹è±¡ä¼˜åŒ–ã€æ•°æ®åº“å‚æ•°ä¼˜åŒ–ï¼Œä»¥åŠåº”ç”¨ç¨‹åºä¼˜åŒ–ç­‰ï¼Œ</span><strong><span>å¤§éƒ¨åˆ†éƒ½æ˜¯æƒ³é€šè¿‡å‡å°‘æˆ–å»¶ç¼“ç£ç›˜è¯»å†™æ¥å‡è½»ç£ç›˜ I/O çš„å‹åŠ›åŠå…¶å¯¹æ€§èƒ½çš„å½±å“</span></strong><span>ã€‚è§£å†³ç£ç›˜ I/O é—®é¢˜ï¼Œå‡å°‘æˆ–å»¶ç¼“ç£ç›˜æ“ä½œè‚¯å®šæ˜¯ä¸€ä¸ªé‡è¦æ–¹é¢ï¼Œä½†ç£ç›˜ I/O æ˜¯ä¸å¯é¿å…çš„ï¼Œå› æ­¤ï¼Œå¢å¼ºç£ç›˜ I/O æœ¬èº«çš„æ€§èƒ½å’Œååé‡ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦æ–¹é¢ã€‚</span></p><h2><a name="221-ä½¿ç”¨ç£ç›˜é˜µåˆ—" class="md-header-anchor"></a><span>22.1 ä½¿ç”¨ç£ç›˜é˜µåˆ—</span></h2><h2><a name="222-ä½¿ç”¨symbolic-linksåˆ†å¸ƒio" class="md-header-anchor"></a><span>22.2 ä½¿ç”¨Symbolic Linksåˆ†å¸ƒI/O</span></h2><p><span>MySQL çš„æ•°æ®åº“åå’Œè¡¨åæ˜¯ä¸æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•åå’Œæ–‡ä»¶åå¯¹åº”çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ›å»ºçš„æ•°æ®åº“å’Œè¡¨éƒ½å­˜æ”¾åœ¨å‚æ•° datadir å®šä¹‰çš„ç›®å½•ä¸‹ã€‚è¿™æ ·å¦‚æœä¸ä½¿ç”¨ RAID æˆ–é€»è¾‘å·ï¼Œæ‰€æœ‰çš„è¡¨éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªç£ç›˜è®¾å¤‡ä¸Šï¼Œæ— æ³•å‘æŒ¥å¤šç£ç›˜å¹¶è¡Œè¯»å†™çš„ä¼˜åŠ¿ï¼åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„ç¬¦å·è¿æ¥ï¼ˆSymbolic Linksï¼‰å°†ä¸åŒçš„æ•°æ®åº“æˆ–è¡¨ã€ç´¢å¼•æŒ‡å‘ä¸åŒçš„ç‰©ç†ç£ç›˜ï¼Œä»è€Œè¾¾åˆ°åˆ†</span><strong><span>å¸ƒç£ç›˜ I/O</span></strong><span> çš„ç›®çš„ã€‚</span></p><p><span>ï¼ˆ1ï¼‰å°†ä¸€ä¸ªæ•°æ®åº“æŒ‡å‘å…¶ä»–ç‰©ç†ç£ç›˜</span></p><p><span>ï¼ˆ2ï¼‰å°†MyISAMï¼ˆå…¶ä»–å­˜å‚¨å¼•æ“çš„è¡¨ä¸æ”¯æŒï¼‰è¡¨çš„æ•°æ®æ–‡ä»¶æˆ–ç´¢å¼•æ–‡ä»¶æŒ‡å‘å…¶ä»–ç‰©ç†ç£ç›˜ã€‚</span></p><p><span>ï¼ˆ3ï¼‰åœ¨Windowsä¸‹ä½¿ç”¨ç¬¦å·è¿æ¥ã€‚</span></p><h2><a name="223-ç¦æ­¢æ“ä½œç³»ç»Ÿæ›´æ–°æ–‡ä»¶çš„atimeå±æ€§" class="md-header-anchor"></a><span>22.3 ç¦æ­¢æ“ä½œç³»ç»Ÿæ›´æ–°æ–‡ä»¶çš„atimeå±æ€§</span></h2><p><span>atime æ˜¯ Linux/UNIX ç³»ç»Ÿä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å±æ€§ï¼Œæ¯å½“è¯»å–æ–‡ä»¶æ—¶ï¼Œæ“ä½œç³»ç»Ÿéƒ½ä¼šå°†è¯»æ“ä½œå‘ç”Ÿçš„æ—¶é—´å›å†™åˆ°ç£ç›˜ä¸Šã€‚å¯¹äºè¯»å†™é¢‘ç¹çš„æ•°æ®åº“æ–‡ä»¶æ¥è¯´ï¼Œè®°å½•æ–‡ä»¶çš„è®¿é—®æ—¶é—´ä¸€èˆ¬æ²¡æœ‰ä»»ä½•ç”¨å¤„ï¼Œå´ä¼šå¢åŠ ç£ç›˜ç³»ç»Ÿçš„è´Ÿæ‹…ï¼Œå½±å“ I/O çš„æ€§èƒ½ï¼å› æ­¤ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®æ–‡ä»¶ç³»ç»Ÿçš„ mountå±æ€§ï¼Œé˜»æ­¢æ“ä½œç³»ç»Ÿå†™ atime ä¿¡æ¯ï¼Œä»¥å‡è½»ç£ç›˜ I/O çš„è´Ÿæ‹…ã€‚</span></p><h2><a name="224-ç”¨è£¸è®¾å¤‡raw-deviceå­˜æ”¾innodbçš„å…±äº«è¡¨ç©ºé—´" class="md-header-anchor"></a><span>22.4 ç”¨è£¸è®¾å¤‡(Raw Device)å­˜æ”¾InnoDBçš„å…±äº«è¡¨ç©ºé—´</span></h2><p><span>MyISAM å­˜å‚¨å¼•æ“æœ‰è‡ªå·±çš„ç´¢å¼•ç¼“å­˜æœºåˆ¶ï¼Œä½†æ•°æ®æ–‡ä»¶çš„è¯»å†™å®Œå…¨ä¾èµ–äºæ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿç£ç›˜ I/O ç¼“å­˜å¯¹ MyISAM è¡¨çš„å­˜å–å¾ˆé‡è¦ã€‚ä½† InnoDB å­˜å‚¨å¼•æ“ä¸ MyISAM ä¸åŒï¼Œå®ƒé‡‡ç”¨ç±»ä¼¼ Oracle çš„æ•°æ®ç¼“å­˜æœºåˆ¶æ¥ Cache ç´¢å¼•å’Œæ•°æ®ï¼Œæ“ä½œç³»ç»Ÿçš„ç£ç›˜ I/O ç¼“å­˜å¯¹å…¶æ€§èƒ½ä¸ä»…æ²¡æœ‰å¸®åŠ©ï¼Œç”šè‡³è¿˜æœ‰åä½œç”¨ã€‚å› æ­¤ï¼Œåœ¨ InnoDB ç¼“å­˜å……è¶³çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Raw Device æ¥å­˜æ”¾ InnoDB å…±äº«è¡¨ç©ºé—´ã€‚</span></p><h1><a name="23-åº”ç”¨ä¼˜åŒ–" class="md-header-anchor"></a><span>23. åº”ç”¨ä¼˜åŒ–</span></h1><h2><a name="231-ä½¿ç”¨è¿æ¥æ± " class="md-header-anchor"></a><span>23.1 ä½¿ç”¨è¿æ¥æ± </span></h2><p><span>å¯¹äºè®¿é—®æ•°æ®åº“æ¥è¯´ï¼Œå»ºç«‹è¿æ¥çš„ä»£ä»·æ¯”è¾ƒæ˜‚è´µï¼Œå› æ­¤ï¼Œå¯ä»¥é€šè¿‡å»ºç«‹â€œè¿æ¥æ± â€æé«˜è®¿é—®çš„æ€§èƒ½ã€‚</span></p><p><span>è¿æ¥æ± ï¼š</span><strong><span>æŠŠè¿æ¥å½“åšå¯¹è±¡æˆ–è€…è®¾å¤‡ï¼Œç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªâ€œæ± å­â€ä¸­ï¼Œï¼Œä»¥å‰éœ€è¦ç›´æ¥è®¿é—®æ•°æ®åº“çš„åœ°æ–¹ï¼Œç°åœ¨éƒ½æ”¹ä¸ºä»è¿™ä¸ªâ€œæ± å­â€é‡Œé¢è·å–è¿æ¥æ¥ä½¿ç”¨</span></strong><span>ã€‚å› ä¸ºâ€œæ± å­â€ä¸­çš„è¿æ¥éƒ½å·²ç»é¢„å…ˆåˆ›å»ºå¥½ï¼Œå¯ä»¥ç›´æ¥åˆ†é…ç»™åº”ç”¨ä½¿ç”¨ï¼Œå› æ­¤å¤§å¤§å‡å°‘äº†åˆ›å»ºæ–°è¿æ¥æ‰€è€—è´¹çš„èµ„æºã€‚</span></p><h2><a name="232-å‡å°‘å¯¹mysqlçš„è®¿é—®" class="md-header-anchor"></a><span>23.2 å‡å°‘å¯¹MySQLçš„è®¿é—®</span></h2><h3><a name="2321-é¿å…å¯¹åŒä¸€æ•°æ®åšé‡å¤æ£€ç´¢" class="md-header-anchor"></a><span>23.2.1 é¿å…å¯¹åŒä¸€æ•°æ®åšé‡å¤æ£€ç´¢</span></h3><p><span>åº”ç”¨ä¸­éœ€è¦ç†æ¸…å¯¹æ•°æ®åº“çš„è®¿é—®é€»è¾‘ã€‚èƒ½å¤Ÿä¸€æ¬¡è¿æ¥å°±èƒ½å¤Ÿæå–å‡ºæ‰€æœ‰ç»“æœçš„ï¼Œå°±ä¸ç”¨ä¸¤æ¬¡è¿æ¥ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘å¯¹æ•°æ®åº“æ— è°“çš„é‡å¤è®¿é—®ã€‚</span></p><blockquote><p><span>ç¼–å†™SQLä»£ç çš„é€»è¾‘é—®é¢˜</span></p></blockquote><h3><a name="2322-ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜" class="md-header-anchor"></a><span>23.2.2 ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜</span></h3><p><span>MySQL çš„æŸ¥è¯¢ç¼“å­˜ï¼ˆMySQL Query Cacheï¼‰æ˜¯åœ¨ 4.1 ç‰ˆæœ¬ä»¥åæ–°å¢çš„åŠŸèƒ½ï¼Œå®ƒçš„ä½œç”¨æ˜¯å­˜å‚¨ SELECT æŸ¥è¯¢çš„æ–‡æœ¬ä»¥åŠç›¸åº”ç»“æœã€‚å¦‚æœéšåæ”¶åˆ°ä¸€ä¸ªç›¸åŒçš„æŸ¥è¯¢ï¼ŒæœåŠ¡å™¨ä¼šä»æŸ¥è¯¢ç¼“å­˜ä¸­é‡æ–°å¾—åˆ°æŸ¥è¯¢ç»“æœï¼Œè€Œä¸å†éœ€è¦è§£æå’Œæ‰§è¡ŒæŸ¥è¯¢ã€‚ </span></p><p><strong><span>æŸ¥è¯¢ç¼“å­˜çš„é€‚ç”¨å¯¹è±¡æ˜¯æ›´æ–°ä¸é¢‘ç¹çš„è¡¨ï¼Œå½“è¡¨æ›´æ”¹ï¼ˆåŒ…æ‹¬è¡¨ç»“æ„å’Œè¡¨æ•°æ®ï¼‰åï¼ŒæŸ¥è¯¢ç¼“å­˜å€¼çš„ç›¸å…³æ¡ç›®è¢«æ¸…ç©ºã€‚</span></strong><span> </span></p><h3><a name="2323-å¢åŠ -cache-å±‚" class="md-header-anchor"></a><span>23.2.3 å¢åŠ  CACHE å±‚</span></h3><p><span>åœ¨åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åº”ç”¨ç«¯åŠ  CACHE å±‚æ¥è¾¾åˆ°å‡è½»æ•°æ®åº“çš„è´Ÿæ‹…çš„ç›®çš„ã€‚CACHE å±‚æœ‰å¾ˆå¤šç§ï¼Œä¹Ÿæœ‰å¾ˆå¤šç§å®ç°çš„æ–¹å¼ï¼Œåªè¦èƒ½è¾¾åˆ°é™ä½æ•°æ®åº“çš„è´Ÿæ‹…ï¼Œåˆèƒ½æ»¡è¶³åº”ç”¨å°±å¯ä»¥ï¼Œè¿™å°±éœ€è¦æ ¹æ®åº”ç”¨çš„å®é™…æƒ…å†µè¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚ </span>
<span>æ¯”å¦‚ï¼Œå¯ä»¥æŠŠéƒ¨åˆ†æ•°æ®ä»æ•°æ®åº“ä¸­æŠ½å–å‡ºæ¥æ”¾åˆ°åº”ç”¨ç«¯ä»¥æ–‡æœ¬æ–¹å¼å­˜å‚¨ï¼Œç„¶åæœ‰æŸ¥è¯¢éœ€æ±‚çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä»è¿™ä¸ªâ€œCACHEâ€ä¸­æ£€ç´¢ã€‚æˆ–è€…å¯ä»¥åœ¨åº”ç”¨ç«¯å»ºç«‹ä¸€ä¸ªäºŒçº§æ•°æ®åº“ï¼Œå°†è®¿é—®é«˜é¢‘æ•°æ®æ”¾åœ¨äºŒçº§åº“ä¸Šï¼Œç„¶åè®¾å®šä¸€ä¸ªæœºåˆ¶ä¸ä¸»æ•°æ®åº“è¿›è¡ŒåŒæ­¥ã€‚å¯ä»¥å¤§å¤§é™ä½ä¸»æ•°æ®åº“çš„å‹åŠ›ã€‚</span></p><h2><a name="233-è´Ÿè½½å‡è¡¡" class="md-header-anchor"></a><span>23.3 è´Ÿè½½å‡è¡¡</span></h2><p><span>è´Ÿè½½å‡è¡¡ï¼ˆLoad Balanceï¼‰æ˜¯å®é™…åº”ç”¨ä¸­ä½¿ç”¨éå¸¸æ™®éçš„ä¸€ç§ä¼˜åŒ–æ–¹æ³•ï¼Œå®ƒçš„æœºåˆ¶å°±æ˜¯åˆ©ç”¨æŸç§å‡è¡¡ç®—æ³•ï¼Œå°†å›ºå®šçš„è´Ÿè½½é‡åˆ†å¸ƒåˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä»¥æ­¤æ¥å‡è½»å•å°æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œè¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ã€‚</span><strong><span>è´Ÿè½½å‡è¡¡å¯ä»¥ç”¨åœ¨ç³»ç»Ÿä¸­çš„å„ä¸ªå±‚é¢ä¸­ï¼Œä»å‰å°çš„ Web æœåŠ¡å™¨åˆ°ä¸­é—´å±‚çš„åº”ç”¨æœåŠ¡å™¨ï¼Œæœ€ååˆ°æ•°æ®å±‚çš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚</span></strong></p><h3><a name="2331-åˆ©ç”¨-mysql-å¤åˆ¶åˆ†æµæŸ¥è¯¢æ“ä½œ" class="md-header-anchor"></a><span>23.3.1 åˆ©ç”¨ MySQL å¤åˆ¶åˆ†æµæŸ¥è¯¢æ“ä½œ</span></h3><p><strong><span>ä¸»ä»å¤åˆ¶</span></strong><span>ï¼šå…·ä½“çš„å®ç°æ˜¯ä¸€ä¸ªä¸»æœåŠ¡å™¨æ‰¿æ‹…æ›´æ–°æ“ä½œï¼Œè€Œå¤šå°ä»æœåŠ¡å™¨æ‰¿æ‹…æŸ¥è¯¢æ“ä½œï¼Œä¸»ä»ä¹‹é—´é€šè¿‡å¤åˆ¶å®ç°æ•°æ®çš„åŒæ­¥ã€‚å¤šå°ä»æœåŠ¡å™¨ä¸€æ–¹é¢ç”¨æ¥ç¡®ä¿å¯ç”¨æ€§ï¼Œä¸€æ–¹é¢å¯ä»¥åˆ›å»ºä¸åŒçš„ç´¢å¼•ä»¥æ»¡è¶³ä¸åŒæŸ¥è¯¢çš„éœ€è¦ã€‚</span></p><h3><a name="2332-é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„" class="md-header-anchor"></a><span>23.3.2 é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„</span></h3><p><strong><span>é›†ç¾¤</span></strong><span>ï¼ˆClusterï¼‰</span></p><p><span>åˆ†å¸ƒå¼çš„æ•°æ®åº“æ¶æ„é€‚åˆå¤§æ•°æ®é‡ã€è´Ÿè½½é«˜çš„æƒ…å†µï¼Œå®ƒå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§å’Œé«˜å¯ç”¨æ€§ã€‚</span></p></div>
</body>
<!-- <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script> -->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="http://yandex.st/highlightjs/6.2/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!--ä¾§æ ç›®å½•ç”Ÿæˆä»£ç -->
<script>
    //æ ‡é¢˜åºå·è®¡æ•°å™¨
    var hCount = [0, 0, 0, 0, 0, 0];
    //è®¾ç½®è®¡æ•°å™¨
    function setHCount(number) {
        //å½“å‰è®¡æ•°å™¨åŠ ä¸€
        hCount[number - 1]++;
        for (var i = number, length = hCount.length; i < length; i++) {
            //å­ç›®å½•è®¡æ•°å™¨å…¨éƒ¨ç½®é›¶
            hCount[i] = 0;
        }
    }
    //é‡å‘½åç›®å½•åç§°
    function setHTagValue(item, number) {
        //è·å–æ ‡é¢˜å
        var text = $(item).get(0).innerHTML;
        //åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²
        var before = "";
        //ç”Ÿæˆåºå·
        for (var i = 0, length = hCount.length; i < number; i++) {
            if (i < number - 1)
                before += hCount[i] + ".";
            else
                before += hCount[i] + " ";
        }
        //åœ¨æ ‡é¢˜å‰é¢åŠ ä¸Šåºå·
        $(item).get(0).innerHTML = before + text;
    }
    function renameHTag(item) {
        var tag = $(item).get(0).localName;
        if (tag === "h1") {
            setHCount(1);
           //console\.log("æ•è·åˆ°æ ‡ç­¾:%s", tag);
            setHTagValue(item, 1);
        }
        if (tag === "h2") {
            setHCount(2);
            //console.log("æ•è·åˆ°æ ‡ç­¾:%s", tag);
            setHTagValue(item, 2);
        }
        if (tag === "h3") {
            setHCount(3);
            //console.log("æ•è·åˆ°æ ‡ç­¾:%s", tag);
            setHTagValue(item, 3);
        }
        if (tag === "h4") {
            setHCount(4);
            //console.log("æ•è·åˆ°æ ‡ç­¾:%s", tag);
            setHTagValue(item, 4);
        }
        if (tag === "h5") {
            setHCount(5);
            //console.log("æ•è·åˆ°æ ‡ç­¾:%s", tag);
            setHTagValue(item, 5);
        }
        if (tag === "h6") {
            setHCount(6);
            //console.log("æ•è·åˆ°æ ‡ç­¾:%s", tag);
            setHTagValue(item, 6)
        }
    }
    $(document).ready(function () {
        $("h1,h2,h3,h4,h5,h6").each(function (i, item) {
            //ç»™<H>ç±»æ ‡ç­¾ç¼–å·
            renameHTag(item);
            //è·å–æ ‡ç­¾çš„åå­—,h1,è¿˜æ˜¯h2
            var tag = $(item).get(0).localName;
            //ä¸ºè¯¥æ ‡ç­¾è®¾ç½®idå±æ€§
            $(item).attr("id", "wow" + i);
            //æ·»åŠ ä¸€ä¸ªé¡µå†…è¶…é“¾æ¥,å¹¶è®¾ç½®classé€‰æ‹©å™¨
            //      $("#category").append('<a class="new'+tag+'" href="#wow'+i+'">'+$(this).text()+'</a></br>');
            $("#category").append('<a class="new' + tag + '" href="#wow' + i + '">' + $(item).text() + '</a></br>');
            //ä¸ºæ¯ä¸€ä¸ªæ ‡é¢˜è¶…é“¾æ¥çš„classå±æ€§è®¾ç½®å·¦è¾¹è·
            $(".newh1").css("margin-left", 0);
            $(".newh2").css("margin-left", 20);
            $(".newh3").css("margin-left", 40);
            $(".newh4").css("margin-left", 60);
            $(".newh5").css("margin-left", 80);
            $(".newh6").css("margin-left", 100);
        });
        //è®¾ç½®classé€‰æ‹©å™¨ä¸º.book-bodyçš„htmlå†…å®¹
        $(".book-body").html($(".book-body").nextAll())
    });
</script>
<style type="text/css">
    @media (max-width: 1600px) {
        .book-body {
            /* padding-left: 200px; */
            padding-right: 0px;
        }
    }
    @media (max-width: 1400px) {
        .book-body {
            /* padding-left: 200px; */
            padding-right: 0px;
        }
    }
    @media (max-width: 1200px) {
        .book-body {
            /* padding-left: 300px; */
            padding-left: 0px;
        }
    }
    @media (max-width: 700px) {
        .book-body {
            padding-left: 0px;
        }
    }
    @media (min-width: 600px) {
        #category {
            /* ç»å¯¹å®šä½ */
            position: fixed;
            /* left: 20px; */
            /* ç›®å½•æ˜¾ç¤ºçš„ä½ç½® */
            right: 0px;
            top: 0;
            /* ç›®å½•æ çš„é«˜åº¦,è¿™é‡Œè®¾ç½®ä¸º60%ä¸»è¦æ˜¯ä¸ºäº†ä¸æŒ¡ä½è¿”å›é¡¶éƒ¨å’ŒæŠ˜å æŒ‰é’® */
            height: 79%;
            /* å¼€å¯å‚ç›´æ»šåŠ¨æ¡ */
            overflow-y: scroll;
            /* å¼€å¯æ°´å¹³æ»šåŠ¨æ¡ */
            overflow-x: scroll;
        }
    }
    @media (-webkit-max-device-pixel-ratio: 1) {
        ::-webkit-scrollbar-track-piece {
            background-color: #FFF
        }
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px
        }
        ::-webkit-scrollbar-thumb {
            background-color: #c2c2c2;
            background-clip: padding-box;
            min-height: 28px
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: #A0A0A0
        }
    }
</style>
<script>
    // id="category" Î¿nclick="showOrCloseCategory()"
    function showOrCloseCategory() {
        var id = document.getElementById("category");
        var book_body=document.getElementById("book_body");
        //å¦‚æœå±•å¼€äº†
        if (id.style.display == 'block') {
            //console.log("å¼€å§‹å±•å¼€");
            id.style.display='none';
            id.style.width="0%";
            book_body.style.width="100%";
            book_body.style.paddingleft=0;
        }
        //å¦‚æœè¢«æŠ˜å äº†
        else if (id.style.display =='none') {
            //console.log("å¼€å§‹æŠ˜å ");
            id.style.display = 'block';
            book_body.style.width="90%";
            id.style.width="20%"
        }
    }
</script>
<!--è¿”å›é¡¶éƒ¨-->
<a href="javascript:scroll(0,0)" style="position:fixed;float:right;right:40px;top:80%">è¿”å›é¡¶éƒ¨</a>
<button onclick="showOrCloseCategory()" style="position:fixed;float:right;right:40px;top:85%">æŠ˜å /å±•å¼€</button>
<!--æ–‡ç« ä¸»ä½“éƒ¨åˆ†-->
<div class="book-body" id="book_body" style="width:90%;display:block"> </div>
<!--ç›®å½•æ ï¼Œè®¾ç½®å ç”¨å®½åº¦ä¸º20%å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè®¾ç½®-->
<div  class="book-summary" id="category" style="width:20%;display:block" ></div>


</html>